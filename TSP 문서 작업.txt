MQL<25>print menu type_cdmProjectGroupObject select href setting.value;
menu   type_cdmProjectGroupObject
    href = ${COMMON_DIR}/emxForm.jsp?form=type_cdmProjectGroupObjectDetailForm&t
oolbar=cdmProjectObjectPropertyToolbar
    setting[Image].value = ${COMMON_DIR}/images/iconStatusObjectHold.gif
    setting[Registered Suite].value = EngineeringCentral
    setting[Structure Menu].value = cdmProjectGroupStructureMenuCommand
    setting[Target Location].value = content
    setting[Tree Scope Id].value = objectId
	
	
command = cdmProjectGroupPartsCommand
command = cdmProjectGroupDocumentsCommand
command = cdmProjectGroupECCommand
command = cdmProjectGroupWorkspaceCommand
command = cdmProjectGroupLifeCycleCommand
command = AEFHistory

MQL<27>print command cdmProjectGroupPartsCommand select href setting.value;
command   cdmProjectGroupPartsCommand
    href = ${COMMON_DIR}/emxIndentedTable.jsp?table=cdmProjectGroupPartsTable&to
olbar=cdmPartDetailsToolBar&freezePane=PartNo&selection=single&program=cdmProjec
tGroup:getParts
    setting[Registered Suite].value = EngineeringCentral


MQL<28>print command cdmProjectGroupDocumentsCommand select href setting.value;
command   cdmProjectGroupDocumentsCommand
    href = ${COMMON_DIR}/emxIndentedTable.jsp?table=cdmProjectGroupDocumentTable
&freezePane=Name&selection=single&program=cdmProjectGroup:getDocuments
    setting[Registered Suite].value = EngineeringCentral


MQL<29>print command cdmProjectGroupECCommand select href setting.value;
command   cdmProjectGroupECCommand
    href = ${COMMON_DIR}/emxIndentedTable.jsp?table=cdmProjectGroupECTable&freez
ePane=Name&selection=single&program=cdmProjectGroup:getEC
    setting[Registered Suite].value = EngineeringCentral


MQL<30>print command cdmProjectGroupWorkspaceCommand select href setting.value;
command   cdmProjectGroupWorkspaceCommand
    href = ${COMMON_DIR}/emxIndentedTable.jsp?table=cdmProjectGroupWorkspaceTabl
e&toolbar=&selection=single&program=cdmProjectGroup:getWorkspace
    setting[Registered Suite].value = EngineeringCentral
	
	
MQL<31>print command cdmProjectGroupLifeCycleCommand select href setting.value;
command   cdmProjectGroupLifeCycleCommand
    href = ${COMMON_DIR}/emxPortal.jsp?portal=cdmProjectGroupPortal
    setting[Registered Suite].value = EngineeringCentral
	
	
	
	
	
	
print menu Actions select menu;
print menu ENCActions select menu;
print menu ENCPartAction select command;
MQL<35>print command cdmENCCreatePartActions select href setting.value;
command   cdmENCCreatePartActions
    href = ../engineeringcentral/cdmCreatePartFS.jsp?header=emxEngineeringCentra
l.PartCreate.FormHeader&StringResourceFileId=emxEngineeringCentralStringResource
&SuiteDirectory=engineeringcentral
    setting[Access Function].value = checkCreatePartAccess
    setting[Access Program].value = emxENCActionLinkAccess
    setting[Image].value = ${COMMON_DIR}/images/iconSmallPart.gif
    setting[Popup Modal].value = true
    setting[Popup Size].value = Large
    setting[Registered Suite].value = EngineeringCentral
    setting[Target Location].value = popup
    setting[Window Height].value = 1250
    setting[Window Width].value = 850
	
	


MQL<37>print menu type_cdmPart select href command;
menu   type_cdmPart
    href = ${COMMON_DIR}/emxPortal.jsp?portal=cdmPartPropertiesPortal&header=emx
EngineeringCentral.Heading.PropertiesHeader
    command = cdmEBOMPowerViewCommand
    command = ENCSpecAndReferenceDoc
    command = ENCRevisions
    command = cdmPartRelatedECs
    command = cdmSeriesPart
    command = MCIPartDerivedOutputs
    command = ENCWhereUsed
    command = ENCRelatedItem
    command = APPClassifiedItemObjectAccess
    command = DomainAccessTreeCategory
    command = cdmPartAEFLifecycle
    command = AEFHistory	


MQL<38>print portal cdmPartPropertiesPortal select channel;
portal   cdmPartPropertiesPortal
    channel = cdmPartPropertyChannel1
    channel = ENCRelatedItemChannel

MQL<39>print channel cdmPartPropertyChannel1 select command;
channel   cdmPartPropertyChannel1
    command = cdmPartProperty
    command = cdmElectronicPartProperty
    command = cdmPartEngineeringSpecCommand
    command = APPImageManager
    command = ENCRevisions
    command = AEFHistory
	
	
MQL<40>print channel ENCRelatedItemChannel select command;
channel   ENCRelatedItemChannel
    command = ENCRelatedItem
    command = ENCWhereUsed


MQL<41>print command cdmPartProperty select href setting.value;
command   cdmPartProperty
    href = ${COMMON_DIR}/emxForm.jsp?toolbar=cdmPartDetailsToolBar&HelpMarker=em
xhelppartproperties&showChangeMgtToolbar=false&type=Part&header=emxEngineeringCe
ntral.Common.Properties&StringResourceFileId=emxEngineeringCentralStringResource
&SuiteDirectory=engineeringcentral&viewURL=../engineeringcentral/cdmPartProperty
Dialog.jsp
    setting[Access Function].value = isModificationAllowed
    setting[Access Program].value = cdmPartLibrary
    setting[Registered Suite].value = EngineeringCentral
    setting[Submit].value = true
	
	
	
MQL<42>print command cdmElectronicPartProperty select href setting.value;
command   cdmElectronicPartProperty
    href = ${COMMON_DIR}/emxForm.jsp?HelpMarker=emxhelppartproperties&showChange
MgtToolbar=false&type=Part&header=emxEngineeringCentral.Common.Properties&String
ResourceFileId=emxEngineeringCentralStringResource&SuiteDirectory=engineeringcen
tral&viewURL=../engineeringcentral/cdmElectronicPartPropertyDialog.jsp
    setting[Access Function].value = isElectronicPartModificationAllowed
    setting[Access Program].value = cdmPartLibrary
    setting[Registered Suite].value = EngineeringCentral
    setting[Submit].value = true
	
	
	
MQL<43>print command cdmPartEngineeringSpecCommand select href setting.value;
command   cdmPartEngineeringSpecCommand
    href = ${COMMON_DIR}/emxForm.jsp?HelpMarker=emxhelppartproperties&showChange
MgtToolbar=true&header=emxEngineeringCentral.Label.EngineeringSpec&StringResourc
eFileId=emxEngineeringCentralStringResource&SuiteDirectory=engineeringcentral&ty
pe=Part&toolbar=cdmPartEngineeringSpecDetailsToolBar&viewURL=../engineeringcentr
al/cdmPartEngineeringSpecPropertyDialog.jsp
    setting[Access Function].value = isEngineeringSpec
    setting[Access Program].value = cdmPartLibrary
    setting[Registered Suite].value = EngineeringCentral
    setting[Submit].value = true	
	
	
	
MQL<45>print menu cdmPartDetailsToolBar select command;
menu   cdmPartDetailsToolBar
    command = cdmPartEditDetails
    command = cdmPartOptionEditDetails
    command = cdmElectronicPartEditDetails
    command = cdmPartCloneSummary
    command = cdmPartRevisionsSummary


MQL<46>print command cdmPartEditDetails select href setting.value;
command   cdmPartEditDetails
    href = ${COMMON_DIR}/emxForm.jsp?header=emxEngineeringCentral.Part.EditPart&
mode=edit&HelpMarker=emxhelpparteditdetails&StringResourceFileId=emxEngineeringC
entralStringResource&SuiteDirectory=engineeringcentral&type=Part&viewURL=../engi
neeringcentral/cdmPartPropertyEditDialog.jsp
    setting[Access Function].value = isModificationEditPart
    setting[Access Program].value = cdmPartLibrary
    setting[Image].value = ${COMMON_DIR}/images/iconActionEdit.gif
    setting[Popup Modal].value = true
    setting[Registered Suite].value = EngineeringCentral
    setting[Target Location].value = self
    setting[Window Height].value = 600
    setting[Window Width].value = 500
	
	
MQL<47>print command cdmPartOptionEditDetails select href setting.value;
command   cdmPartOptionEditDetails
    href = ../engineeringcentral/cdmEditPartOptionsFS.jsp?header=emxEngineeringC
entral.Label.EditOption&StringResourceFileId=emxEngineeringCentralStringResource
&SuiteDirectory=engineeringcentral
    setting[Access Function].value = isModificationOptionAllowed
    setting[Access Program].value = cdmPartLibrary
    setting[Registered Suite].value = EngineeringCentral
    setting[Target Location].value = popup
    setting[Window Height].value = 650
    setting[Window Width].value = 700	
	
	
MQL<48>print command cdmElectronicPartEditDetails select href setting.value;
command   cdmElectronicPartEditDetails
    href = ${COMMON_DIR}/emxForm.jsp?header=emxEngineeringCentral.Part.EditPart&
mode=edit&HelpMarker=emxhelpparteditdetails&StringResourceFileId=emxEngineeringC
entralStringResource&SuiteDirectory=engineeringcentral&type=Part&viewURL=../engi
neeringcentral/cdmElectronicPartPropertyEditDialog.jsp
    setting[Access Function].value = isElectronicPartToolbarModificationAllowed
    setting[Access Program].value = cdmPartLibrary
    setting[Image].value = ${COMMON_DIR}/images/iconActionEdit.gif
    setting[Registered Suite].value = EngineeringCentral
    setting[Target Location].value = self
    setting[Window Height].value = 600
    setting[Window Width].value = 500


	
MQL<49>print command cdmPartCloneSummary select href setting.value;
command   cdmPartCloneSummary
    href = ${SUITE_DIR}/cdmPartCloneSummaryFS.jsp?header=emxEngineeringCentral.P
art.ClonePart&StringResourceFileId=emxEngineeringCentralStringResource&SuiteDire
ctory=engineeringcentral
    setting[Access Expression].value = (policy !='Manufacturing Part') && (polic
y !='Development Part')
    setting[Access Function].value = hasCloneAccess
    setting[Access Program].value = cdmPartLibrary
    setting[Image].value = ${COMMON_DIR}/images/iconActionCopy.png
    setting[Registered Suite].value = EngineeringCentral
    setting[Submit].value = true	


	
MQL<50>print command cdmPartRevisionsSummary select href setting.value;
command   cdmPartRevisionsSummary
    href = ${SUITE_DIR}/cdmPartRevisionsSummaryFS.jsp?StringResourceFileId=emxEn
gineeringCentralStringResource&SuiteDirectory=engineeringcentral&header=emxFrame
work.Command.Revise
    setting[Access Function].value = hasReviseAccess
    setting[Access Program].value = cdmPartLibrary
    setting[Image].value = ${COMMON_DIR}/images/iconActionRevise.png
    setting[Registered Suite].value = EngineeringCentral
    setting[Submit].value = true
	
	
	
	
MQL<62>print command cdmBOMExport select href setting.value;
command   cdmBOMExport
    href = ${SUITE_DIR}/cdmPartExportReportFS.jsp?exportProgram=cdmPartLibrary:e
xportBOMExcelData&header=emxEngineeringCentral.Command.ExportToExcel&StringResou
rceFileId=emxEngineeringCentralStringResource&SuiteDirectory=engineeringcentral
    setting[Image].value = ${COMMON_DIR}/images/iconActionExcelExport.gif
    setting[Registered Suite].value = EngineeringCentral
    setting[Submit].value = true
    setting[Target Location].value = popup	
	


MQL<67>print menu cdmPartAddNewPartMenu select command;
menu   cdmPartAddNewPartMenu
    command = cdmPartBOMAddNew



MQL<68>print command cdmPartBOMAddNew select href setting.value;
command   cdmPartBOMAddNew
    href = ../engineeringcentral/cdmPartBomAddPreProcess.jsp?CreateMode=EBOM&mul
tiPartCreation=true
    setting[Access Function].value = showAddNewAtBOMWindow
    setting[Access Program].value = emxENCActionLinkAccess
    setting[Image].value = ${COMMON_DIR}/images/iconActionCreate.png
    setting[Popup Modal].value = true
    setting[Registered Suite].value = EngineeringCentral
    setting[Row Select].value = single
    setting[Submit].value = true
    setting[Target Location].value = slidein



MQL<73>print command ENCBOMAddExisting select href setting.value;
command   ENCBOMAddExisting
    href = ${SUITE_DIR}/emxEngrFullSearchPreProcess.jsp?calledMethod=addExisting

    setting[Access Function].value = showInlineRMBCommands
    setting[Access Program].value = emxPart
    setting[Command Name].value = ENCBOMAddExisting
    setting[Image].value = ${COMMON_DIR}/images/iconActionAdd.png
    setting[Licensed Product].value = ENO_ENG_TP,ENO_TBE_TP
    setting[Mode].value = edit
    setting[Popup Modal].value = true
    setting[Registered Suite].value = EngineeringCentral
    setting[Submit].value = true
    setting[Target Location].value = listHidden
    setting[Window Height].value = 525
    setting[Window Width].value = 875



MQL<74>print command ENCInlineAddExisting select href setting.value;
command   ENCInlineAddExisting
    href = javascript:getLookupJPO()
    setting[Access Function].value = HideInlineCommands
    setting[Access Program].value = emxENCActionLinkAccess
    setting[Image].value = ${COMMON_DIR}/images/iconActionAdd.png
    setting[Licensed Product].value = ENO_ENG_TP,ENO_TBE_TP
    setting[Mode].value = edit
    setting[Registered Suite].value =  EngineeringCentral



MQL<76>print command ENCDeleteSelected select href setting.value;
command   ENCDeleteSelected
    href = ${SUITE_DIR}/emxpartDisconnectBOM.jsp?uiType=structureBrowser
    setting[Access Function].value = showInlineRMBCommands
    setting[Access Program].value = emxPart
    setting[Command Name].value = ENCDeleteSelected
    setting[Confirm Message].value = emxEngineeringCentral.Common.MsgConfirm
    setting[Image].value = ${COMMON_DIR}/images/iconActionRemove.gif
    setting[Licensed Product].value = ENO_ENG_TP,ENO_TBE_TP
    setting[Mode].value = edit
    setting[Registered Suite].value = EngineeringCentral
    setting[Row Select].value = multi
    setting[Submit].value = true
    setting[Target Location].value = listHidden



MQL<77>print menu cdmPartBOMChangeMenu select href setting.value;
menu   cdmPartBOMChangeMenu
    href =
    setting[Image].value = ${COMMON_DIR}/images/iconActionRevise.png
    setting[Registered Suite].value = EngineeringCentral





MQL<79>print command cdmPartBOMExistingECOCommand select href setting.value
;
command   cdmPartBOMExistingECOCommand
    href = ../engineeringcentral/cdmPartBOMChangeExisitingPostProcess.jsp?modeTy
pe=ECO
    setting[Registered Suite].value = EngineeringCentral
    setting[Row Select].value = multi
    setting[Submit].value = true
    setting[Target Location].value = popup




MQL<80>print command cdmPartBOMExistingEARCommand select href setting.value;
command   cdmPartBOMExistingEARCommand
    href = ../engineeringcentral/cdmPartBOMChangeExisitingPostProcess.jsp?modeTy
pe=EAR
    setting[Registered Suite].value = EngineeringCentral
    setting[Row Select].value = multi
    setting[Submit].value = true
    setting[Target Location].value = popup
	
	
	
MQL<81>print command cdmPartBOMExistingPEOCommand select href setting.value;
command   cdmPartBOMExistingPEOCommand
    href = ../engineeringcentral/cdmPartBOMChangeExisitingPostProcess.jsp?modeTy
pe=PEO
    setting[Registered Suite].value = EngineeringCentral
    setting[Row Select].value = multi
    setting[Submit].value = true
    setting[Target Location].value = popup



MQL<82>print command cdmPartBOMNewPEOCommand select href setting.value;
command   cdmPartBOMNewPEOCommand
    href = ../engineeringcentral/cdmPartBOMChangeNewPostProcess.jsp?modeType=PEO

    setting[Registered Suite].value = EngineeringCentral
    setting[Row Select].value = multi
    setting[Submit].value = true
    setting[Target Location].value = popup	
	



MQL<85>print command cdmEBOMPowerViewCommand select href setting.value;
command   cdmEBOMPowerViewCommand
    href = ${COMMON_DIR}/emxPortal.jsp?portal=cdmPartEBOMPortal&showPageHeader=f
alse&HelpMarker=emxhelppartebompv
    setting[Image].value = ${COMMON_DIR}/images/iconSmallFormFolder.gif
    setting[Registered Suite].value = EngineeringCentral
	
	
	
MQL<86>print portal cdmPartEBOMPortal select channel;
portal   cdmPartEBOMPortal
    channel = cdmPartEBOMChannel


	
MQL<88>print command ENCBOM select href setting.value;
command   ENCBOM
    href = ${SUITE_DIR}/emxEngrBOMIntermediateProcess.jsp?ENCBillOfMaterialsView
CustomFilter=engineering
    setting[Access Expression].value = !((policy.property[PolicyClassification].
value=="Equivalent") || (policy.property[PolicyClassification].value=="Unresolve
d") || (policy=="$<policy_ManufacturingPart>"))
    setting[Access Function].value = isEBOMIndentedTable
    setting[Access Program].value = emxENCActionLinkAccess
    setting[Image].value = ${COMMON_DIR}/images/iconSmallBOM.gif
    setting[Registered Suite].value = EngineeringCentral
    setting[Target Location].value = content
	
	

MQL<89>print command ENCRevisions select href setting.value;
command   ENCRevisions
    href = ${COMMON_DIR}/emxIndentedTable.jsp?program=emxPart:getObjectRevisions
&table=ENCRevisionSummary&toolbar=ENCEngrRevisionsSummaryToolBar&header=emxEngin
eeringCentral.CommandHeader.Revisions&HelpMarker=emxhelppartrevisions&PrinterFri
endly=true
    setting[Access Expression].value = ((policy.property[PolicyClassification].v
alue=="Production") || (policy.property[PolicyClassification].value=="Developmen
t") || (policy.property[PolicyClassification].value=="Unresolved"))
    setting[Image].value = ${COMMON_DIR}/images/iconSmallObjectFolder.gif
    setting[Registered Suite].value = EngineeringCentral
    setting[Target Location].value = content


	
	
MQL<90>print command cdmPartRelatedECs select href setting.value;
command   cdmPartRelatedECs
    href = ${COMMON_DIR}/emxIndentedTable.jsp?table=cdmPartRelatedECsView&progra
m=cdmPartLibrary:getPartRelatedECsData&selection=single&StringResourceFileId=emx
EngineeringCentralStringResource&SuiteDirectory=engineeringcentral&suiteKey=Engi
neeringCentral&mode=view&hideExtendedHeader=false&header=emxEngineeringCentral.L
abel.EC
    setting[Registered Suite].value = EngineeringCentral
    setting[Submit].value = true



MQL<91>print command cdmSeriesPart select href setting.value;
command   cdmSeriesPart
    href = ${COMMON_DIR}/emxIndentedTable.jsp?table=cdmPartCloneEditDetails&prog
ram=cdmPartLibrary:getSeriesPartData&selection=multiple&StringResourceFileId=emx
EngineeringCentralStringResource&SuiteDirectory=engineeringcentral&suiteKey=Engi
neeringCentral&mode=view&hideExtendedHeader=false&header=emxEngineeringCentral.L
abel.SeriesPart
    setting[Registered Suite].value = EngineeringCentral
    setting[Submit].value = true
	
	
	
	
MQL<95>print menu type_Document select href command;
menu   type_Document
    href = ${COMMON_DIR}/emxForm.jsp?form=type_Document&toolbar=cdmDocumentsDocumentToolbar&Export=False&displayCDMFileSummary=true
    command = APPDocumentFiles
    command = APPDocumentFileVersions
    command = APPDocumentRevisions
    command = APPClassifiedItemObjectAccess
    command = DomainAccessTreeCategory
    command = DCDocumentsWhereUsedTreeCategory
    command = AEFLifecycleBasic
    command = APPDocumentHistory	
	
	
	
MQL<96>print menu cdmDocumentsDocumentToolbar select command;
menu   cdmDocumentsDocumentToolbar
MQL<97>print menu cdmDocumentsDocumentToolbar select menu;
menu   cdmDocumentsDocumentToolbar
    menu = cdmDocumentsDocumentActions


MQL<2>print command APPDocumentFiles select href setting.value;
command   APPDocumentFiles
    href = ${COMMON_DIR}/emxTable.jsp?program=emxCommonFileUI:getFiles&table=APP
FileSummary&selection=multiple&sortColumnName=Name&sortDirection=ascending&toolb
ar=APPFileSummaryToolBar&header=emxComponents.Menu.Files&subHeader=emxComponents
.Menu.SubHeaderDocuments&HelpMarker=emxhelpdocumentfilelist&FilterFramePage=../c
omponents/emxCommonDocumentCheckoutUtil.jsp&FilterFrameSize=1&showClipboard=fals
e
    setting[Access Expression].value = ($<attribute[attribute_IsVersionObject].v
alue> != True) && (vcfile == FALSE && vcfolder == FALSE && vcmodule == FALSE)
    setting[Access Function].value = allowFileVersioning
    setting[Access Program].value = emxCommonDocument
    setting[Registered Suite].value = Components




MQL<3>print command APPDocumentFileVersions select href setting.value;
command   APPDocumentFileVersions
    href = ${COMMON_DIR}/emxTable.jsp?program=emxCommonFileUI:getFileVersions&ta
ble=APPFileVersions&disableSorting=true&header=emxComponents.Common.DocumentVers
ionsPageHeading&subHeader=emxComponents.Menu.SubHeaderDocuments&HelpMarker=emxhe
lpdocumentfileversions&FilterFramePage=${COMPONENT_DIR}/emxCommonDocumentCheckou
tUtil.jsp&FilterFrameSize=1
    setting[Access Expression].value = ($<attribute[attribute_IsVersionObject].v
alue> != True) && (vcfile == FALSE && vcfolder == FALSE && vcmodule == FALSE)
    setting[Access Function].value = allowFileVersioning
    setting[Access Program].value = emxCommonDocument
    setting[Registered Suite].value = Components



MQL<4>print command APPDocumentRevisions select href setting.value;
command   APPDocumentRevisions
    href = ${COMMON_DIR}/emxTable.jsp?program=emxCommonDocumentUI:getRevisions&t
able=APPDocumentRevisions&toolbar=APPDocumentRevisionsToolBar&header=emxComponen
ts.Common.RevisionsPageHeading&subHeader=emxComponents.Menu.SubHeaderDocuments&H
elpMarker=emxhelpdocumentfilerevisions
    setting[Access Expression].value = ($<attribute[attribute_IsVersionObject].v
alue> != True)
    setting[Registered Suite].value = Components




MQL<5>print command APPClassifiedItemObjectAccess select href setting.value;
command   APPClassifiedItemObjectAccess
    href = ${COMMON_DIR}/emxTable.jsp?table=APPObjectAccessSummary&program=emxOb
jectAccess:getAccessGrantees&toolbar=APPClassifiedItemObjectAccessToolbar&header
=emxComponents.ObjectAccess.AccessHeading&sortColumnName=Name&sortDirection=asce
nding&selection=none&HelpMarker=emxhelpaccess&PrinterFriendly=true&accessChoice=
Read_WO_Download,Read,Read_Write,Add,Remove,Add_Remove&showAllProgram=emxObjectA
ccess&showAllFunction=hasAccessRoles&pushGrantor=person_CommonAccessGrantor
    setting[Access Expression].value = (!type.kindof[$<type_DOCUMENTS>]) || (to[
$<relationship_ClassifiedItem>])
    setting[Image].value = ${COMMON_DIR}/images/iconSmallAccess.gif
    setting[Registered Suite].value = Components
    setting[Target Location].value = content



MQL<99>print command cdmDocumentsDocumentEditCommand select href setting.value;
command   cdmDocumentsDocumentEditCommand
    href = ${COMMON_DIR}/emxForm.jsp?form=type_Document&mode=edit&HelpMarker=emx
helpdocumenteditdetails&formHeader=emxComponents.Common.EditDetailsHeadingWithou
tRev&Export=False&displayCDMFileSummary=true&findMxLink=false
    setting[Access Expression].value = (attribute[Suspend Versioning].value != T
rue && current.access[modify] == true) && (attribute[Is Version Object].value !=
 True) && (vcfile == FALSE && vcfolder == FALSE) && (revision==last)
    setting[Image].value = ${COMMON_DIR}/images/iconActionEdit.png
    setting[Registered Suite].value = Components
    setting[Target Location].value = self
	
	
	
MQL<100>print command APPDocumentDownloadActionLink select href setting.value;
command   APPDocumentDownloadActionLink
    href = javascript:checkoutSelectedFiles(\"download\")
    setting[Access Function].value = hasDocumentDownloadAccess
    setting[Access Program].value = emxCommonDocument
    setting[Image].value = ${COMMON_DIR}/images/iconActionDownload.png
    setting[Registered Suite].value = Components
    setting[Target Location].value = hiddenFrame
    setting[Window Height].value = 525
    setting[Window Width].value = 875




MQL<101>print command APPDocumentCheckOutActionLink select href setting.value;
command   APPDocumentCheckOutActionLink
    href = javascript:checkoutSelectedFiles(\"checkout\")
    setting[Access Function].value = hasDocumentCheckOutAccess
    setting[Access Program].value = emxCommonDocument
    setting[Hide Mode].value = Mobile
    setting[Image].value = ${COMMON_DIR}/images/iconActionCheckOut.png
    setting[Registered Suite].value = Components
    setting[Target Location].value = hiddenFrame
    setting[Window Height].value = 525
    setting[Window Width].value = 875




MQL<8>print command APPDocumentCheckInActionLink select href setting.value;
command   APPDocumentCheckInActionLink
    href = ${COMPONENT_DIR}/emxCommonDocumentPreCheckin.jsp?objectAction=checkin

    setting[Access Function].value = hasDocumentAddFilesAccess
    setting[Access Program].value = emxCommonDocument
    setting[Image].value = ${COMMON_DIR}/images/iconActionAppend.png
    setting[Popup Modal].value = true
    setting[Registered Suite].value = Components
    setting[Target Location].value = popup
    setting[Window Height].value = 570
    setting[Window Width].value = 780





MQL<9>print command APPDeleteThisVersion select href setting.value;
command   APPDeleteThisVersion
    href = javascript:window.deleteThisVersion_onclick()
    setting[Access Expression].value = ($<attribute[attribute_SuspendVersioning]
.value> != True && current.access[checkin] == true) && ($<attribute[attribute_Is
VersionObject].value> != True) && (vcfile == FALSE && vcfolder == FALSE) && (cur
rent.access[todisconnect] == true ) && (revision == last)
    setting[Access Function].value = allowFileVersioning
    setting[Access Program].value = emxCommonDocument
    setting[Image].value = ${COMMON_DIR}/images/iconActionDelete.png
    setting[Registered Suite].value = Components
	
	
	
MQL<10>print command APPDeleteAllVersions select href setting.value;
command   APPDeleteAllVersions
    href = javascript:window.deleteAllVersions_onclick()
    setting[Access Expression].value = (current.access[todisconnect] == true) &&
 (revision==last)
    setting[Access Function].value = allowFileVersioning
    setting[Access Program].value = emxCommonDocument
    setting[Image].value = ${COMMON_DIR}/images/iconActionDelete.png
    setting[Registered Suite].value = Components
	
	
	
	
	
MQL<7>print menu type_cdmEC select href command;
menu   type_cdmEC
    href = ${COMMON_DIR}/emxPortal.jsp?portal=cdmECPortal
    command = cdmECAffectedItemCommand
    command = AEFHistory
    command = cdmLifecycleCommand



MQL<8>print portal cdmECPortal select channel;
portal   cdmECPortal
    channel = cdmECChannel
    channel = cdmLifecycleChannel
    channel = cdmAffectedItemChannel
	
	
MQL<9>print channel cdmECChannel select command;
channel   cdmECChannel
    command = cdmECPropertiesCommand
	
	
MQL<10>print command cdmECPropertiesCommand select href setting.value;
command   cdmECPropertiesCommand
    href = ${COMMON_DIR}/emxForm.jsp?form=type_cdmECDetailForm&toolbar=cdmECDeta
ilToolbar
    setting[Registered Suite].value = EngineeringCentral	
	
	
MQL<12>print command cdmECAffectedItemCommand select href setting.value;
command   cdmECAffectedItemCommand
    href = ${COMMON_DIR}/emxIndentedTable.jsp?table=cdmECTable&toolbar=cdmECActi
onToolbar&selection=multiple&program=cdmEC:getECTable&autoFilter=false&showClipb
oard=false&rowGrouping=false&PrinterFriendly=false&findMxLink=false&multiColumnS
ort=false&launched=false&hideLaunchButton=true&objectCompare=false&showPageURLIc
on=false&cellwrap=false&generateReport=false&customize=false&hideHeader=true
    setting[Registered Suite].value = EngineeringCentral
    setting[Target Location].value = content	
	

MQL<13>print menu cdmECDetailToolbar select command;
menu   cdmECDetailToolbar
    command = cdmECEditCommand
    command = cdmECExportCommand
    command = cdmECReportCommand
    command = cdmECTitleUpdateCommand


MQL<14>print command cdmECEditCommand select href setting.value;
command   cdmECEditCommand
    href = ${COMMON_DIR}/emxForm.jsp?form=type_cdmECEditForm&mode=edit
    setting[Access Expression].value = (current == Preliminary) && (owner == con
text.user)
    setting[Image].value = ${COMMON_DIR}/images/iconActionEdit.png
    setting[Registered Suite].value = EngineeringCentral
    setting[Target Location].value = self
	
	
MQL<15>print command cdmECExportCommand select href setting.value;
command   cdmECExportCommand
    href = ../engineeringcentral/cdmECExportValidateProcess.jsp
    setting[Access Expression].value = (current == Preliminary) && (owner == con
text.user)
    setting[Registered Suite].value = EngineeringCentral
    setting[Submit].value = true
    setting[Target Location].value = popup	
	
	
MQL<16>print command cdmECReportCommand select href setting.value;
command   cdmECReportCommand
    href = ${COMMON_DIR}/emxIndentedTable.jsp?table=cdmPLMExportTable&header=Rep
ort&program=cdmEC:getExportTable&submitURL=../engineeringcentral/cdmECPartExport
Process.jsp&submitLabel=Excel
    setting[Registered Suite].value = EngineeringCentral
    setting[Submit].value = true
    setting[Target Location].value = popup
	
	
MQL<17>print command cdmECTitleUpdateCommand select href setting.value;
command   cdmECTitleUpdateCommand
    href = ../engineeringcentral/cdmECTitleUpdateProcess.jsp
    setting[Access Expression].value = owner == context.user
    setting[Confirm Message].value = Update EO Title?
    setting[Registered Suite].value = EngineeringCentral
    setting[Submit].value = true
    setting[Target Location].value = listHidden
	
	
	
	
MQL<19>print command cdmECRemovePartCommand select href setting.value;
command   cdmECRemovePartCommand
    href = ../engineeringcentral/cdmECRemoveProcess.jsp
    setting[Access Expression].value = (current == Preliminary) && (owner == con
text.user)
    setting[Confirm Message].value = Are you sure you want to 'delete' the selec
ted part?
    setting[Image].value = ${COMMON_DIR}/images/iconActionDelete.png
    setting[Popup Modal].value = true
    setting[Registered Suite].value = EngineeringCentral
    setting[Row Select].value = multi
    setting[Submit].value = true
    setting[Target Location].value = listHidden
	
	
	
MQL<20>print command cdmECMoveToCommand select href setting.value;
command   cdmECMoveToCommand
    href = ../engineeringcentral/cdmECMoveToPostProcess.jsp
    setting[Access Expression].value = (current == Preliminary) && (owner == con
text.user)
    setting[Registered Suite].value = EngineeringCentral
    setting[Row Select].value = multi
    setting[Submit].value = true	
	







	
searchProjectGroup()
var sUrl = "../common/cdmPartLibraryChooser.jsp?callbackFunction=showVehicleFocus&header=emxEngineeringCentral.header.ProjectGroup&multiSelect=false&ShowIcons=true&searchMode=ProjectGroup&program=cdmPartLibrary:getProjectGroupFirstNode&expandProgram=cdmPartLibrary:expandProjectGroupLowLankNode&isFromSearch=false&isNeededOId=false&displayKey=name&rootNode=ProjectGroup&fieldNameActual=ProjectGroup&fieldNameDisplay=ProjectGroupDisplay&fromPage=ProjectGroupForm&firstLevelSelect=false&secondLevel=false&processURL=../engineeringcentral/cdmProjectGroupChooserProcess.jsp&StringResourceFileId=emxEngineeringCentralStringResource&SuiteDirectory=engineeringcentral";
    	

searchVehicle()
var sUrl = "../common/cdmPartLibraryChooser.jsp?callbackFunction=showVehicleFocus&header=emxEngineeringCentral.Label.Vehicle&multiSelect=true&ShowIcons=true&searchMode=CommonCode&program=cdmPartLibrary:getCommonCodeFirstNode&expandProgram=cdmPartLibrary:expandCommonCodeLowLankNode&isFromSearch=false&isNeededOId=false&displayKey=name&rootNode=CommonCode&fieldNameActual=CommonCode&fieldNameDisplay=Vehicle&fromPage=CommonCodeForm&firstLevelSelect=false&secondLevel=false&processURL=../engineeringcentral/cdmVehicleChooserProcess.jsp&StringResourceFileId=emxEngineeringCentralStringResource&SuiteDirectory=engineeringcentral";
    	

searchEC()
searchEC_URL = "../common/emxFullSearch.jsp?field=TYPES=type_cdmECO,type_cdmEAR,type_cdmPEO:POLICY=policy_cdmECPolicy:CURRENT=policy_cdmECPolicy.state_Preliminary&header=ECO,EAR,PEO";
			
if("Production" == phase){
	searchEC_URL = "../common/emxFullSearch.jsp?field=TYPES=type_cdmEAR,type_cdmECO:POLICY=policy_cdmECPolicy:CURRENT=policy_cdmECPolicy.state_Preliminary&header=ECO,EAR";	
}else if("Proto" == phase){
	searchEC_URL = "../common/emxFullSearch.jsp?field=TYPES=type_cdmPEO:POLICY=policy_cdmECPolicy:CURRENT=policy_cdmECPolicy.state_Preliminary&header=PEO";
}				

searchDrawingNo().
String searchDrawingNo_URL = "../common/emxFullSearch.jsp?field=TYPES=type_CATDrawing,type_cdmAutoCAD,type_cdmNXDrawing:POLICY=policy_Document,policy_DesignTEAMDefinition";
    searchDrawingNo_URL += "&showInitialResults=false&viewFormBased=true&hideHeader=true&table=ENCAddExistingGeneralSearchResults&selection=single&header=emxEngineeringCentral.Label.DrawingNo&showSavedQuery=false";
    searchDrawingNo_URL += "&StringResourceFileId=emxEngineeringCentralStringResource&SuiteDirectory=engineeringcentral&targetLocation=popup&excludeOIDprogram=cdmPartLibrary:excludePreviousDrawing";
    searchDrawingNo_URL += "&searchCollectionEnabled=false&submitURL=../engineeringcentral/cdmPartReviseAffectedItemECO.jsp?text=DrawingNo&hidden=DrawingNo_Oid&objectId="+objectId;
    
    String searchEC_URL = "&showInitialResults=true&viewFormBased=true&table=cdmECAddExistingGeneralSearchResults&selection=single&showSavedQuery=false";
    searchEC_URL += "&StringResourceFileId=emxEngineeringCentralStringResource&SuiteDirectory=engineeringcentral&targetLocation=popup&excludeOIDprogram=cdmPartLibrary:excludeConnectedObjectsEC";
    searchEC_URL += "&searchCollectionEnabled=false&submitURL=../engineeringcentral/cdmPartReviseAffectedItemECO.jsp?text=ECONumber&hidden=ECONumberOid";

    

searchProductDivision()
var sUrl = "../common/cdmPartLibraryChooser.jsp?callbackFunction=showVehicleFocus&header=emxEngineeringCentral.Label.ProductDivision&multiSelect=false&ShowIcons=true&searchMode=CommonCode&program=cdmPartLibrary:getCommonCodeFirstNode&expandProgram=cdmPartLibrary:expandCommonCodeLowLankNode&isFromSearch=false&isNeededOId=false&displayKey=name&rootNode=CommonCode&fieldNameActual=CommonCode&fieldNameDisplay=Product_Div&fromPage=CommonCodeForm&firstLevelSelect=false&secondLevel=false&processURL=../engineeringcentral/cdmProductTypeChooserProcess.jsp&StringResourceFileId=emxEngineeringCentralStringResource&SuiteDirectory=engineeringcentral";
    	

searchProductType()
var sUrl = "../common/cdmPartLibraryChooser.jsp?callbackFunction=showVehicleFocus&header=emxEngineeringCentral.Label.ProductType&multiSelect=false&ShowIcons=true&searchMode=CommonCode&program=cdmPartLibrary:getCommonCodeFirstNode&expandProgram=cdmPartLibrary:expandCommonCodeLowLankNode&isFromSearch=false&isNeededOId=false&displayKey=name&rootNode=CommonCode&fieldNameActual=CommonCode&fieldNameDisplay=Product_Group_Name&fromPage=CommonCodeForm&firstLevelSelect=false&secondLevel=false&processURL=../engineeringcentral/cdmProjectTypeChooserProcess.jsp&StringResourceFileId=emxEngineeringCentralStringResource&SuiteDirectory=engineeringcentral";
    	

materialPopup()

String material_URL = "../engineeringcentral/cdmCreatePartMaterialAndSurfaceTreatmentFS.jsp?header=emxEngineeringCentral.Label.AddInfomationInsert&StringResourceFileId=emxEngineeringCentralStringResource&SuiteDirectory=engineeringcentral";
    




=======================================================================================================================================================================
C:\DS\B418xcadconnectors\win_b64\reffiles\IEFClientWorkspaceService\config.xml
<?xml version="1.0" encoding="UTF-8"?>
<config>
  <serverURL>https://gcdm.halla.com/3dspace</serverURL>
  <language>en</language>
  <debug>false</debug>
  <charset>utf8</charset>
  <multiport>true</multiport>
  <portrangemin>2000</portrangemin>
  <portrangemax>5000</portrangemax>
  <jrehome>C:\Program Files\Java\jre1.8.0_91</jrehome>
<javaoptions>-Xmx256m -Xms256m</javaoptions>
</config>
=======================================================================================================================================================================
[MATRIX]
#MX_BOS_FIND_LIMIT=500
#MX_BOS_EXPAND_LIMIT=500
#MX_ADK_TRACEALL=true
#MX_PAM_AUTHENTICATE_CLASS=${CLASS:emxAICommonNTLMAuthenticationBase}
user=creator
MX_BOS_ROOT=C:\enoviaV6R2016x\server\
MX_BOS_WORKSPACE=workspace
MX_TRACE_FILE_PATH=C:\enoviaV6R2016x\server\logs
MX_ABORT_DANGLING_TRANSACTION=true
MX_SESSION_TIMEOUT=60
MX_BOS_ALLOW_SHARED_CONTEXT=false
MATRIXHOME=C:\enoviaV6R2016x\server\
MATRIXINSTALL=C:\enoviaV6R2016x\server
MX_FLASH_PATH=C:\enoviaV6R2016x\server\mxcache
MX_ARCH=win_b64
PIXMAPPATH=C:\enoviaV6R2016x\server\win_b64\pixmaps\app\
COLORPATH=C:\enoviaV6R2016x\server\win_b64\code\lib
MATRIXPATH=C:\enoviaV6R2016x\server\win_b64\code\bin
MX_TCL_SHLIB=
TCL_LIBRARY=C:\enoviaV6R2016x\server\win_b64\tcl85\lib\tcl8.5
TK_LIBRARY=C:\enoviaV6R2016x\server\win_b64\tcl85\lib\tk8.5
TMPDIR=C:\temp
#MX_JAVA_OPTIONS=-Dematrix.jpo.external 
#MX_JAVA_DEBUG=true
#MX_JAVA_DEBUG_PORT=11111
MX_JDK_DIR=C:\Program Files\Java\jdk1.8.0_91
MX_JAVAC=C:\Program Files\Java\jdk1.8.0_91\bin\javac.exe
#MX_CLASSPATH=C:\Program Files\Java\jdk1.8.0_91\lib;C:\enoviaV6R2016x\server\managed\properties;C:\enoviaV6R2016x\server\win_b64\docs\javacommon;C:\enoviaV6R2016x\server\win_b64\docs\javaserver;C:\enoviaV6R2016x\server\win_b64\docs\custom;
MX_CLASSPATH=C:\Program Files\Java\jdk1.8.0_91\lib;C:\enoviaV6R2016x\server\managed\properties;C:\enoviaV6R2016x\server\win_b64\docs\javacommon;C:\enoviaV6R2016x\server\win_b64\docs\javaserver;C:\enoviaV6R2016x\server\win_b64\docs\custom;C:\workspace_Mando\enovia\WebContent\WEB-INF\classes;C:\workspace_Mando\enovia\WebContent\WEB-INF\lib;C:\workspace_Mando\enovia\build;
MX_CONNECTION_POOL_SIZE=30
MX_CHARSET=UTF8
MX_JAVA_OPTIONS=-Xmx2048m -Dfile.encoding=UTF-8
MX_MEMORY_SYSTEM_LIMIT=6144m
[MXMRUN]
MXMRUN_OS=win_b64
=======================================================================================================================================================================
modify person "Test Everything" property preference_Command value TMCMyViewMyDesk;
modify person "admin_platform" property preference_Command value AEFPowerViewHome
=======================================================================================================================================================================
keytoolset.txt
"C:\Program Files\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb_ootb_root_ca -file Y:\install\ootb\ootb_ootb_root_ca.crt
"C:\Program Files\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb.halla.com -file Y:\install\ootb\ootb.halla.com.crt


\\172.20.110.209\mandocdm\install\ootb



"C:\Program Files\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb_ootb_root_ca -file C:\ootb\ootb_root_ca.crt
"C:\Program Files\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb.halla.com -file C:\ootb\ootb.halla.com.crt

"C:\Program Files (x86)\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files (x86)\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb_ootb_root_ca -file C:\ootb\ootb_root_ca.crt
"C:\Program Files (x86)\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files (x86)\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb.halla.com -file C:\ootb\ootb.halla.com.crt

C:\Program Files (x86)\Java\jre1.8.0_91

"C:\Program Files (x86)\Java\jre1.8.0_91\bin\keytool1\bin\keytool" -import -keystore "C:\Program Files (x86)\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb_root_ca -file Y:\install\ootb\ootb_root_ca.crt
"C:\Program Files (x86)\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files (x86)\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias 3ds.localdomain -file Y:\install\ootb\ootb.halla.com.crt



"C:\Program Files\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb_root_ca -file Y:\install\ootb\ootb_root_ca.crt
"C:\Program Files (x86)\Java\jre1.8.0_91\bin\keytool1\bin\keytool" -import -keystore "C:\Program Files (x86)\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb_root_ca -file Y:\install\ootb\ootb_root_ca.crt
"C:\Program Files\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias 3ds.localdomain -file Y:\install\ootb\ootb.halla.com.crt
"C:\Program Files (x86)\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files (x86)\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias 3ds.localdomain -file Y:\install\ootb\ootb.halla.com.crt








"C:\Program Files\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb_root_ca -file C:\ootb\ootb_root_ca.crt
"C:\Program Files\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb.halla.com -file C:\ootb\ootb.halla.com.crt

"C:\Program Files (x86)\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files (x86)\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb_root_ca -file C:\ootb\ootb_root_ca.crt
"C:\Program Files (x86)\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files (x86)\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb_ootb.halla.com -file C:\ootb\ootb.halla.com.crt



"C:\Program Files\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb_ootb_root_ca -file C:\ootb\ootb_root_ca.crt
"C:\Program Files\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias 3ds.localdomain -file C:\ootb\ootb.halla.com.crt

"C:\Program Files\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb_root_ca -file C:\ootb\ootb_root_ca.crt
"C:\Program Files\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias 3ds.localdomain -file C:\ootb\ootb.halla.com.crt



"C:\Program Files (x86)\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files (x86)\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias ootb_root_ca -file C:\ootb\ootb_root_ca.crt
"C:\Program Files (x86)\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files (x86)\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias 3ds.localdomain -file C:\ootb\ootb.halla.com.crt


admin_platform / Qwer1234

"C:\Program Files\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias 3dexperince -file C:\ootb\3dexperince.crt
"C:\Program Files (x86)\Java\jre1.8.0_91\bin\keytool" -import -keystore "C:\Program Files (x86)\Java\jre1.8.0_91\lib\security\cacerts" -storepass changeit -noprompt  -alias 3dexperince -file C:\ootb\3dexperince.crt
"C:\Program Files\Java\jdk1.8.0_91\jre\bin\keytool" -import -keystore "C:\Program Files\Java\jdk1.8.0_91\jre\lib\security\cacerts" -storepass changeit -noprompt  -alias 3dexperince -file C:\ootb\3dexperince.crt
=======================================================================================================================================================================
Approval RTP

rtpENCCreateMeasureRequestDialogFS.jsp

 

<%--
/*------------------------------------------------------------------------------
/* Name : rtpENCCreateMeasureRequestDialogFS.jsp
/* PROJ : Rotem PLM
/* 
/*------------------------------------------------------------------------------
/*                Comment
/*------------------------------------------------------------------------------
/* 2011.11.22        JaeHee, Lee        
--------------------------------------------------------------------------------*/
--%>

<%@include file="../emxUIFramesetUtil.inc"%>
<%@include file="emxEngrFramesetUtil.inc"%>

<%
 framesetObject fs = new framesetObject();
 fs.setDirectory(appDirectory);//링크에 사용되는 디렉토리 설정

  
   
  
    // Add Parameters Below

    // Specify URL to come in middle of frameset
    StringBuffer sbContentURL = new StringBuffer("../components/rtpemxMeasureRequestCreatePost.jsp?");
    //StringBuffer sbContentURL = new StringBuffer("rtpENCCreateMeasureDialog.jsp?");
    
   
    sbContentURL.append("objectId=");
    sbContentURL.append(emxGetParameter(request, "objectId"));
    sbContentURL.append("&rowId=");
    sbContentURL.append(emxGetParameter(request, "rowId"));
    
   
  
 // Page Heading - Internationalized
 String PageHeading = "rtpEngineeringCentral.Common.CreateMeasureRequestDocument";

 // Marker to pass into Help Pages
 // icon launches new window with help frameset inside
 String HelpMarker = "emxhelppcodecreate";
 
 //객체를 초기화 합니다.(표제로 사용하는 식별 키, 도움말에 전달하는 문자열, middle frame URL, 인쇄용 아이콘을 추가하려면 true,
 //           true일 경우 대화상자 페이지, 페이지 매김 아이콘을 추가하려면 true, 변환 아이콘을 추가하려면 true)
 fs.initFrameset(PageHeading,
     HelpMarker,
     sbContentURL.toString(),
     false,
     true,
     false,
     false);
 
 //번역에 사용되는 문자열 리소스 번들을 설정.
 fs.setStringResourceFile("emxEngineeringCentralStringResource");
 
 
 //하단프레임에 대한 링크를 만듭니다.(디스플레이로 사용하는 속성키, URL은 자바스크립트 구문으로 이동, 링크의 역할이 표시
 //        팝업새창을 열려면 true, 자바스크립트 방법은 true, 아이콘 링크(기본값은 미리 설정), 팝업 창의 크기 0~6)
 fs.createFooterLink("rtpEngineeringCentral.Common.Done",
      "aaa()",
      "role_GlobalUser",
      false,
      true,
      "emxUIButtonDone.gif",
      0);
 
 //하단프레임에 대한 링크를 만듭니다.
 fs.createFooterLink("rtpEngineeringCentral.Common.Cancel",
      "parent.window.close()",
      "role_GlobalUser",
      false,
      true,
      "emxUIButtonCancel.gif",
      0);
 //프레임페이지의 HTML을 씁니다.
 fs.writePage(out);
%>

 

 

 

 

 

rtpemxMeasureRequestCreatePost.jsp

 

<%@include file="../emxUIFramesetUtil.inc"%>
<%@include file = "emxRouteInclude.inc"%>
<%

    String initSource = emxGetParameter(request,"initSource");
    if (initSource == null){
        initSource = "";
    }
    String jsTreeID                 = emxGetParameter(request,"jsTreeID");
    String suiteKey                 = emxGetParameter(request,"suiteKey");
    String objectId                 = emxGetParameter(request,"objectId");
    String beanName                 = emxGetParameter(request,"beanName");
    beanName                        = "rtpemxMeasureReqestCreatePost.jsp";
    String selection                = emxGetParameter(request,"selection");
    String submitURL                = emxGetParameter(request,"submitURL");
    String submitAction             = emxGetParameter(request,"submitAction");
    String formName                 = emxGetParameter(request,"formName");
    String fieldNameOID             = emxGetParameter(request,"fieldNameOID");
    String fieldNameActual          = emxGetParameter(request,"fieldNameActual");
    String fieldNameDisplay         = emxGetParameter(request,"fieldNameDisplay");
    String mode                     = emxGetParameter(request,"mode");
    String chooserType              = emxGetParameter(request,"chooserType");
    String FieldName                = emxGetParameter(request,"FieldName");
    String emxTableRowId            = emxGetParameter(request,"emxTableRowId");
    String emxTableRowIds           = emxGetParameter(request,"emxTableRowIds");
    String isEO                     = emxGetParameter(request,"isEO");
    
    String current = emxGetParameter(request,"current");
    if (current == null){
        current = "";
    }
    String role = emxGetParameter(request,"role");
    if (role == null){
        role = "";
    }
    
    //String mode                     = emxGetParameter(request,"mode");

    //get URL
    
    String commonURL = "";
    commonURL += "?suiteKey=" + suiteKey + "&initSource=" + initSource + "&jsTreeID=" + jsTreeID;
    commonURL += "&objectId="+ objectId  + "&selection="+ selection;
    commonURL += "&submitURL=" + submitURL;
    commonURL += "&submitAction=" +    submitAction;    
    commonURL += "&formName=" +    formName;        
    commonURL += "&FieldName=" +FieldName;
    commonURL += "&fieldNameOID=" +    fieldNameOID;    
    commonURL += "&fieldNameActual=" +    fieldNameActual; 
    commonURL += "&fieldNameDisplay=" +    fieldNameDisplay;
    commonURL += "&mode=" +    mode;            
    commonURL += "&chooserType=" +    chooserType;     
    commonURL += "&current=" +    current;            
    commonURL += "&role=" +    role;
    commonURL += "&beanName=" +    beanName;
    commonURL += "&emxTableRowId=" +    emxTableRowId;
    commonURL += "&isEO=" +    "false";
    commonURL += "&approvalPage=" +    "../engineeringcentral/rtpemxCreateMeasureArea.jsp";
    
    
    
    String measureURL = "";
    measureURL += "?suiteKey=" + suiteKey + "&initSource=" + initSource + "&jsTreeID=" + jsTreeID;
    measureURL += "&objectId="+ objectId  + "&selection="+ selection;
    measureURL += "&submitURL=" + submitURL;
    measureURL += "&submitAction=" +    submitAction;    
    measureURL += "&formName=" +    formName;        
    measureURL += "&FieldName=" +FieldName;
    measureURL += "&fieldNameOID=" +    fieldNameOID;    
    measureURL += "&fieldNameActual=" +    fieldNameActual; 
    measureURL += "&fieldNameDisplay=" +    fieldNameDisplay;
    measureURL += "&mode=" +    mode;            
    measureURL += "&chooserType=" +    chooserType;     
    measureURL += "&current=" +    current;            
    measureURL += "&role=" +    role;
    measureURL += "&beanName=" +    beanName;
    measureURL += "&emxTableRowId=" +    emxTableRowId;
    
    

    String topURL = "";
    //leftURL += "../common/rtpPersonSearchLeftFS.jsp" + commonURL;
    topURL += "../components/rtpemxRouteCreateTop.jsp" + commonURL;
    
    
    
    String contentURL = "";
    contentURL += "../components/rtpemxRouteCreateContentFrame.jsp" + commonURL;
    
%>  


<script language="Javascript">

 function aaa() {
    
    top.pagecontent.approvalTop.measureSaveForm();
 }
</script>

<html>
  <head>
    <title></title> 
      <script language="JavaScript" type="text/javascript" src="../common/emxUIConstantsJavaScriptInclude.jsp"></script>
      <script language="javascript" src="../common/scripts/emxUIConstants.js"></script>
      <script language="javascript" src="../common/scripts/emxUISelectableTree.js"></script>
      <script language="javascript" src="../emxUIPageUtility.js"></script>
  </head>

  <frameset id="fsCol" rows="600,*" framespacing="3" frameborder="0" >
        <frame name="approvalTop" src="../engineeringcentral/rtpENCCreateMeasureDialog.jsp<%=measureURL%>" noresize="noresize"   />
        <frame name="approvalContent" src="<%=contentURL %>"  />
  </frameset>

</html>

 

 

rtpENCCreateMeasureDialog.jsp

 

<%--
/*------------------------------------------------------------------------------
/* Name : rtpENCCreateMeasureDialog.jsp
/* PROJ : Rotem PLM
/* 
/* Copyright 2007 by ENOVIA V6 All rights reserved.
/*------------------------------------------------------------------------------
/*                Revision history
/*------------------------------------------------------------------------------
/*  DATE             Author                   Description
/* ----------       ---------------------    ------------------------------
/* 2011.11.22        JaeHee, Lee             
--------------------------------------------------------------------------------*/
--%>

 


<html>

 

<%@page import="org.apache.commons.lang3.BooleanUtils"%>
<%@page import="org.apache.commons.lang3.StringUtils"%>
<%@page import="com.rtp.util.rtpConstantsUtil"%>
<%@page import="com.rtp.util.rtpDocumentUtil"%>
<%@page import="com.rtp.util.rtpPersonutil"%>
<%@page import="com.matrixone.apps.domain.util.FrameworkProperties"%>
<%@page import="com.matrixone.apps.engineering.EngineeringUtil"%>
<%@page import="com.matrixone.apps.program.ProjectSpace"%>
<%@page import="com.rtp.util.rtpMeasureRequestHolder"%>
<%@include file = "emxDesignTopInclude.inc"%>
<%@include file = "../emxUICommonHeaderBeginInclude.inc"%>
<%@include file = "emxengchgJavaScript.js"%>
<%@include file = "emxEngrVisiblePageInclude.inc"%>
<%@include file = "../common/emxUIConstantsInclude.inc"%>

 


<head>
  <%@include file = "../common/emxUIConstantsInclude.inc"%>
  <%@include file = "../emxJSValidation.inc"%>
  <script language="javascript" type="text/javascript" src="../common/scripts/emxUICalendar.js"></script>
</head>


<%
  //오류처리기에 필요한 정보를 설정(request, return page, target frame)
 JSPUtil.setupErrInfo(request, "rtpENCCreateMeasureDialog.jsp", "folderFrame");
 
 String sTemplateId = emxGetParameter(request,"templateId");
 String sObjectId   = emxGetParameter(request,"objectId");
 
 String pageName    = emxGetParameter(request,"page");
 String suiteKey    = emxGetParameter(request,"suiteKey");
 
 
 SimpleDateFormat sdformat = (SimpleDateFormat)SimpleDateFormat.getDateInstance(2, request.getLocale());
 String sdPattern = sdformat.toPattern();
 //DateFormat sdformat = new SimpleDateFormat("yyyy-MM-dd");

 
 Date date = new Date(); 
 String sDate = sdformat.format(date);
 
 
 System.out.println("sTemplateId   "+sTemplateId);
 System.out.println("sObjectId     "+sObjectId);
 System.out.println("pageName      "+pageName);
 System.out.println("suiteKey      "+suiteKey);
 System.out.println("sdPattern     "+sdPattern);

%>


<% 

 rtpMeasureRequestHolder.clearHolder(context.getUser());


    //emxTable을 만들때 필요한 2가지. 1)table(테이블 틀 정의) 2)program(데이타)
 String affectedItemHolderURL = "../common/emxTable.jsp?1=1";
 affectedItemHolderURL = affectedItemHolderURL + "&program=rtpMeasureRequest:getTempAffectedItems";
 affectedItemHolderURL = affectedItemHolderURL + "&table=rtpAffectedItemsHolderTable";
 affectedItemHolderURL = affectedItemHolderURL + "&header=emxEngineeringCentral.Label.AffectedItems";
 affectedItemHolderURL = affectedItemHolderURL + "&selection=multiple";
 affectedItemHolderURL = affectedItemHolderURL + "&sortColumnName=Name";
 affectedItemHolderURL = affectedItemHolderURL + "&sortDirection=ascending";
 affectedItemHolderURL = affectedItemHolderURL + "&objectId=" + "";
 affectedItemHolderURL = affectedItemHolderURL + "&suiteKey=EngineeringCentral";
 affectedItemHolderURL = affectedItemHolderURL + "&objectBased=true";
 affectedItemHolderURL = affectedItemHolderURL + "&toolbar=rtpENCMeasureAffectedItemsHolderToolBar";

 
%>

 


<script language="javascript" type="text/javascript" src="../common/scripts/jquery-latest.js"></script>
<script language="javascript" type="text/javascript" src="../common/scripts/jquery.autocomplete.js"></script>
<link rel="stylesheet" href="../common/styles/jquery.autocomplete.css">


 

<script type="text/javascript">


 /*
 window.onload = function() {
  alert(window.$('form'));
 }
 */

 $(document).ready(function() {
 
          //rtpENCSearchProjectCars
          //rtpENCFindProjectAsyncJSON
  $('#ProjectName').autocomplete('rtpENCFindProjectAsyncJSON.jsp', {
   minChars : 1
   , scrollHeight: 220
   , width: 200
   , selectFirst: true
   , formatItem : function (item, position, length) {
       var temp = (new String(item)).split(",");
       return temp[0];
     } 
   , formatValue : function (item, position, length) {
       var temp = (new String(item)).split(",");
       return temp[0];
     } 
   , formatResult : function (item, position, length) {
       var temp = (new String(item)).split(",");
       return temp[0];
     } 
  }).result(function (event, item) {
   var temp = (new String(item)).split(",");
   $("#projectOID").val(temp[1]);
   var tempName = decodeURIComponent(temp[2]).split("+").join(" ");
   $("#ProjectNameKO").val(tempName);
   $(this).data('selected', true);
    
   searchProjectCars(temp[1]);
   

   
  }).blur(function () {
  });
  
 }); // end of document ready

 function searchProjectCars(objectId) {
  jQuery.ajax({

    type:"GET",

    url:"rtpENCSearchProjectCars.jsp?objectId=" + objectId,

    //dataType:"JSON", // 옵션이므로 JSON으로 받을게 아니면 안써도 됨
    
    success : function(data) {
    
    //clearCarNameSelectBox();
    
    if (data)
    {
     data = data.replace(/^\s*|\s*$/g, '');
     //alert(data);

     var resultArray = data.split(",");
     var printHTML="";

     if (resultArray)
     {
       
      
      for (i = 0; i < resultArray.length-1; i++)
      {
 
       //alert(resultArray[i]);
       //var ca = document.createForm.applyCarKind;
       
       //alert(resultArray[i]);
          printHTML+="<input type='checkbox' name='box' id ='box' value='"+resultArray[i]+"'>"+resultArray[i];
    
       //printHTML+="<td >"+resultArray[i]+"</td>";
          
       /* 
       option.value = resultArray[i];
       option.innerHTML = resultArray[i];
       ca.appendChild(option);
       */
      }
        
       
       var check = document.getElementById("applyCarKind");
       check.innerHTML=printHTML;
     }
    }
   },

    complete : function(data) {
    //alert('complete');
   },
 
   error : function(xhr, status, error) {

    alert('error');

   }
     });
 }

 affectedValue = "";
 selectId = "";
 var affectedValues = new Array();
 

 function measureSaveForm(){
    
  var measureName   = document.createForm.measureName.value;
  var ProjectName   = document.createForm.ProjectName.value;
  var applyCarKind  = document.createForm.box;
  
    
  
  var receivePerson = window.parent.window.approvalContent.rightFrame.AreaContentFrame.approvalForm.receivePerson.options[0];
   
  
  if(ProjectName == ""|| ProjectName==null){
     alert("<emxUtil:i18nScript localize="i18nId">rtpEngineeringCentral.common.errNoProject</emxUtil:i18nScript>");
     document.createForm.ProjectName.focus();
     return;
    }
  
    if(measureName == ""|| measureName==null){
      alert("<emxUtil:i18nScript localize="i18nId">rtpEngineeringCentral.common.errNoName</emxUtil:i18nScript>");
      document.createForm.measureName.focus();
      return;
    }
    
    
    var isCheckedApplyCar = false;
    
    if(applyCarKind.checked){
     isCheckedApplyCar = true;
    }
    for(i=0; i<applyCarKind.length;i++){
     if(applyCarKind[i].checked ){
      isCheckedApplyCar = true;
      break;
     }
    }
    //alert(isCheckedApplyCar);
    if (!isCheckedApplyCar) {
     alert("<emxUtil:i18nScript localize="i18nId">rtpEngineeringCentral.common.errNoCar</emxUtil:i18nScript>");
     return;
    }
    
    if(receivePerson == "" || receivePerson==null){
     alert("<emxUtil:i18nScript localize="i18nId">rtpEngineeringCentral.common.errNoPerson</emxUtil:i18nScript>");
     return;
    }
  


  /*  
  $('input[name=affectedItem]').remove();
 
  $(AffectedItemFrame.document.listDisplay.document.emxTableForm.emxTableRowId).each(
   function (index, value) {
    $('#createForm').append('<input type="text" name="affectedItem" value="' +  $(this).val()+ '">');
    
   }
  ); 
    */
  
  
  


  

  //AffectedItem
  var targetWindow = findFrame(top.window.parent, "AffectedItemFrame");
  var aaa = targetWindow.document.listDisplay.document.emxTableForm;
  var af = "";
  
  if(affectedValue != null){
   affectedValue = "";
  }
  

  for(i=0;i<aaa.elements.length;i++){
   
   if(aaa.elements[i].type == "checkbox" && aaa.elements[i].name == "emxTableRowId" ){
    
       
    affectedValue = aaa.elements[i].value+",";
    //alert(affectedValue);
    
    
    lastInt = affectedValue.indexOf(",");
    
    af = affectedValue.substring(0, lastInt);
    
    
    
    addAffectedValues(af);
   }
  }
   
   

  //selectBox
  
  var selectBox = top.pagecontent.approvalContent.rightFrame.AreaContentFrame.approvalForm.receivePerson;
  

  if(selectId != null){
   selectId = "";
  }
  
  for(i=0;i<selectBox.options.length;i++){
   //alert(selectBox.options[i].value);
   selectId = selectBox.options[i].value+",";

   isdInt = selectId.indexOf(",");
   
   se = selectId.substring(0, isdInt);

   addSelectedValues(se);
  }
  
  save(); 
 
  }
    
 
  
  function addAffectedValues(a){
  
  
  //affectedValues[affectedValues.length] = v;
  
  
  var up_div = document.getElementById("createForm");
  var div = document.createElement("div");
  div.innerHTML = "<input type='hidden' size='30' id='affectedItem' name='affectedItem' value='"+a+"'/>";       
  
  up_div.appendChild(div);
  
  
  }
    
   
     function addSelectedValues(s){
  
  
  //affectedValues[affectedValues.length] = v;
  
  
  var up_div = document.getElementById("createForm");
  var div = document.createElement("div");
  div.innerHTML = "<input type='hidden' size='30' id='seletedID' name='seletedID' value='"+s+"'/>";       
  
  up_div.appendChild(div);
  
  
  }
     

    

 

 
  function save() {
   
  /*
   if (document.createForm.measureName.value == "") {
      document.createForm.action =  'rtpENCCreateMeasureProcess.jsp';
    } else {
      var rtpMeasureName = document.createForm.measureName.value;
    }
    */
    
    var fileNames = "";
    if (document.createForm.attachFile1.value == '') {
   document.createForm.action =  'rtpENCCreateMeasureProcess.jsp';
   document.createForm.encoding =  'application/x-www-form-urlencoded';
  } else {
   fileName = document.createForm.attachFile1.value;
   fileNames += fileName.substring(fileName.lastIndexOf('\\') + 1);
   fileNames += "|";
   
  } 
    
    if (document.createForm.attachFile2.value != '') {
   fileName = document.createForm.attachFile2.value;
   fileNames += fileName.substring(fileName.lastIndexOf('\\') + 1);
   fileNames += "|";
  }
    
    if (document.createForm.attachFile3.value != '') {
   fileName = document.createForm.attachFile3.value;
   fileNames += fileName.substring(fileName.lastIndexOf('\\') + 1);
   fileNames += "|";
  }
    
    if (document.createForm.attachFile4.value != '') {
   fileName = document.createForm.attachFile4.value;
   fileNames += fileName.substring(fileName.lastIndexOf('\\') + 1);
   fileNames += "|";
  }
    
    if (document.createForm.attachFile5.value != '') {
   fileName = document.createForm.attachFile5.value;
   fileNames += fileName.substring(fileName.lastIndexOf('\\') + 1);
   fileNames += "|";
  }
    
    
    
    document.createForm.fileNames.value = fileNames;
    
    
    
     document.createForm.submit();
  }
  
  function clearProjectName(){
   document.createForm.ProjectName.value = '';
   document.createForm.ProjectNameKO.value = '';
   document.createForm.txtPrId.value = '';
  
   clearCarNameCheckBox();
  //clearCarNameSelectBox();
  }

  function clearCarNameCheckBox(){
   
   printHTML = "";
   
   var check = document.getElementById("applyCarKind");
  check.innerHTML=printHTML;
   
  }
  
  
 function clearCarNameSelectBox() {
  var applyCarKind = document.getElementById("applyCarKind");
  var a = applyCarKind.options.length;
  
  for(i=a; i>0; i--){
   applyCarKind.options[i]=null;
  }
 }
 
 
  
  function showProjectName() {
   
   var url = '../common/rtpSearchProjectFS.jsp';
  url += '?type=type_ProjectSpace';        
  url += '&selection=single';
  url += '&formName=createForm';
  url += '&myProjectCollection=true';
  url += '&submitURL=../engineeringcentral/rtpSearchProjectUtil.jsp';
  url += '&mode=chooser';
  url += '&chooserType=PartProject';
  url += '&fieldNameOID=txtPrId';
  url += '&fieldNameDisplay=ProjectName';
  url += '&fieldProjectRealName=ProjectNameKO';
  
  
  showModalDialog(url, 850, 630);

  }
</script>

 
 
 <!-- onload="display()" -->

<body  leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" >

 <%
 String processPage = "/engineeringcentral/rtpENCCreateMeasureProcess.jsp";
 Map checkinURLMap = DocumentUtil.getFCSURLInfo(context, "STORE", 100, processPage, "" ,"" ,request ,response);
 //특정 저장소에 대해 FCS의 URL을 제공합니다.(context, store name, 파일 int수, 문자열 처리 페이지 - 페이지가 생성된다거나 파일 개정 후 개체를 저장소로 이동, targetPage, errorPage,
 //                               requestObject, responseObject)
 
 String checkinURL = (String)checkinURLMap.get("action");
 String ticketStr = (String)checkinURLMap.get("ticket");
 String jobTicket = (String)checkinURLMap.get("jobTicket");
 String failurePageName = (String)checkinURLMap.get("failurePageName");
 String failurePageValue = (String)checkinURLMap.get("failurePageValue");
 

 
%>
 
<%@include file = "../emxUICommonHeaderEndInclude.inc" %>
  <style>
   body {
 
    overflow: auto;
   }
  </style>


<form name="createForm" method="post" enctype="multipart/form-data" action="<%=checkinURL %>" target="_self" >

<input type="hidden" name="sdPattern" value="<%=sdPattern%>"/>
<input type="hidden" name="objectId" value="<%=sObjectId%>"/>
<input type="hidden" name="page" value="<%=pageName%>"/>
<input type="hidden" name="suiteKey" value="<%=suiteKey%>" />
<input type="hidden" name="<%=jobTicket%>" value="<%=ticketStr%>">
<input type="hidden" name="<%=failurePageName%>" value="<%=failurePageValue%>" >
<input type="hidden" name="fileNames"  value="">


<table border="0" cellspacing="0" cellpadding="0" width="100%" >
  <tr>
    <td  height="10"></td>
   
  </tr>
</table>

<table border="0" cellpadding="2" cellspacing="2" width="100%" name="measure" id="measure">
 
<!-- 파란글씨는 반드시 입력 -->
  <%
  String ErrorCheck="";
  ErrorCheck=(String)session.getAttribute("createSketchError");
  
  if (ErrorCheck!=null && !ErrorCheck.equalsIgnoreCase("null")){
  %>
 <tr>
  <td  valign="top" colspan=4><font color="#ff0000"><%=ErrorCheck%></font></td>
 </tr>
 <tr>
  <td  valign="top" colspan=4>&nbsp;</td>
 </tr>
  <%
  }else{
  %>
 <tr>
  <td valign="top" colspan=4><font color="#0000ff">Fields in blue are required.</font></td>
  
 </tr>
  <%
  }
  %>

  
<!-- 프로젝트 명 -->  
    <tr>
        <td width="20%" nowrap="nowrap" class="labelRequired" id="ProjectNameLabel"><emxUtil:i18n localize="i18nId">rtpEngineeringCentral.Common.ProjectName</emxUtil:i18n></td>
        <td  nowrap="nowrap"  class="field" style="width: 100%" colspan="3">
            <input type="text"  style="text-transform: uppercase;"  name="ProjectName" id="ProjectName" value="" style='width:17em;' >
         <input type="button" value="..." name="btnProName" onClick="javascript:showProjectName();">
         <input type="text" id="ProjectNameKO" name="ProjectNameKO" value="" disabled="disabled" style='width:25em;'>
         <input type="hidden" name="txtPrId" id="txtPrId" value="">
   <input type="hidden" name="projectOID" id="projectOID" value="">
         <a href="javascript:clearProjectName();" name ="clearProjectName" id="clearProjectName">
         <emxUtil:i18n localize="i18nId">emxEngineeringCentral.Common.Clear</emxUtil:i18n>
         </a>
        </td>      
    </tr>
    
    
<!-- 제목 -->    
    <tr>
        <td width="20%" nowrap="nowrap" class="labelRequired"><emxUtil:i18n localize="i18nId">rtpEngineeringCentral.Common.Subject</emxUtil:i18n></td>
        <td  nowrap="nowrap" colsapn = "3" class="field" style="width: 100%" colspan="3">
            <input type="text"  style="text-transform: uppercase;"  name="measureName" id ="measureName" value="" style='width:60em;' >
        </td>      
    </tr>
    
    
<!-- 적용차종 -->
 <tr>
  <td width="20%" nowrap="nowrap" class="labelRequired"><emxUtil:i18n localize="i18nId">rtpEngineeringCentral.Common.ApplyCarKind</emxUtil:i18n></td>
  <td nowrap="nowrap" class="field" style='width:15em;'>
  <div id="applyCarKind" name="applyCarKind"></div> 
  </td>
<!-- REV -->
  <td width="20%" nowrap="nowrap" class="label"><emxUtil:i18n localize="i18nId">rtpEngineeringCentral.Common.Rev</emxUtil:i18n></td>
  <td nowrap="nowrap" class="field" width="40%">
   <input type="text" name="rev" >
  </td> 
 </tr>
 
     
<!-- 설변내용 -->    
    <tr>
  <td width="20%" nowrap="nowrap" class="label"><emxUtil:i18n localize="i18nId">rtpEngineeringCentral.Common.ReasonContent</emxUtil:i18n></td>
  <td  nowrap="nowrap" class="field" > 
   <textarea rows="6" style="width: 100%" name="causeReason"></textarea>
  </td>
<!-- 변경사유 --> 
 
  <td width="20%" nowrap="nowrap" class="label" ><emxUtil:i18n localize="i18nId">rtpEngineeringCentral.Common.ChangeReason</emxUtil:i18n></td>
  <td  nowrap="nowrap" class="field" > 
   <textarea rows="6" style="width: 100%" name="changeReason"></textarea>
  </td>
 </tr>

<!-- 작성자 -->
 <tr>
  <td width="20%" nowrap="nowrap" class="label"><emxUtil:i18n localize="i18nId">rtpEngineeringCentral.Common.Creator</emxUtil:i18n></td>
<%
  String strOwnerDisplay = rtpPersonutil.getUserName(context,context.getUser());
%>
  <td  nowrap="nowrap" class="field">
  <%=strOwnerDisplay%>
  <input type="hidden" name="creator" value="<%=strOwnerDisplay%>">
  </td>
<!-- 작성 일자 -->
  <td width="20%" nowrap="nowrap" class="label"><emxUtil:i18n localize="i18nId">rtpEngineeringCentral.Common.Createdate</emxUtil:i18n></td>
  <td  nowrap="nowrap" class="field">
  <%=sDate%>
  <input type = "hidden" name = "createDate" value="<%=sDate%>">
  </td>
 </tr>


<!-- 첨부파일 -->
 <tr>
  <td width="20%" nowrap="nowrap" class="label" rowspan="6"><emxUtil:i18n localize="i18nId">rtpEngineeringCentral.Common.FileNames</emxUtil:i18n></td>
  
  <tr>
   <td class="field" nowrap="nowrap" colspan="3"><input type="file" name=fileName id="attachFile1" style="width: 100%" value="" /></td>
  </tr>
  <tr>
   <td class="field" nowrap="nowrap" colspan="3"><input type="file" name="fileName" id="attachFile2" style="width: 100%" value="" /></td>
  </tr>
  <tr>
   <td class="field" nowrap="nowrap" colspan="3"><input type="file" name="fileName" id="attachFile3" style="width: 100%" value="" /></td>
  </tr>
  <tr>
   <td class="field" nowrap="nowrap" colspan="3"><input type="file" name="fileName" id="attachFile4" style="width: 100%" value="" /></td>
  </tr>
  <tr>
   <td class="field" nowrap="nowrap" colspan="3"><input type="file" name="fileName" id="attachFile5" style="width: 100%" value="" /></td>
  </tr>
 </tr>
</table>
  

 <%
  System.out.println("affectedItemHolderURL " + affectedItemHolderURL);
 %>
<!-- Affected Items -->
 <table border="0" cellpadding="1" cellspacing="0" width="100%" height="80px"  align="center" class="formBG">
  <tr>
   <td>
    <iframe name="AffectedItemFrame"  src="<%=affectedItemHolderURL%>" style="position:static;" width="100%" height="200"></iframe>
   </td>
  </tr> 
 </table>
 

 <div><div/>
 


</form>
</body>
<%@include file = "../emxUICommonEndOfPageInclude.inc" %>
</html> 

 
################################################1
#rtpemxRouteCreateContentFrame.jsp
################################################
 

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">
<%@page import="org.apache.commons.lang3.StringUtils"%>
<%@include file = "../emxUIFramesetUtil.inc"%>
<%@include file = "emxRouteInclude.inc"%>
<%
 String queryString = request.getQueryString(); 
 String approvalPage = request.getParameter("approvalPage");
 String rightUrl = "rtpemxRouteApprovalLineDialog.jsp?" + queryString;
 if (StringUtils.isNotEmpty(approvalPage)) {
  rightUrl = approvalPage;
 } 

%>

<html>
<head>
</head>

<frameset cols="25%,47%,*" frameborder="NO" border="0" framespacing="2">
  <frame src="rtpemxRouteOrganizationChartDialogFS.jsp?<%=queryString %>" name="leftFrame" scrolling="NO" noresize >
  <frame src="rtpemxRoutePersonFrame.jsp?<%=queryString %>" name="centerFrame">
  <frame src="<%=rightUrl %>" name="rightFrame">
</frameset>
<noframes><body>

</body></noframes>
</html> 

 

 

rtpemxRouteOrganizationChartDialogFS.jsp

 

<%@include file="emxComponentsCommonUtilAppInclude.inc"%>
<%@include file="../emxUIFramesetUtil.inc"%>
</head>
<script language="JavaScript" src="../common/scripts/emxUIConstants.js"></script>
<script language="JavaScript" src="../common/scripts/emxUICore.js"></script>
<script language="JavaScript" src="../common/scripts/emxUICoreMenu.js"></script>
<script language="javascript" src="../common/scripts/rtpemxUISelectableTree.js"></script>
<script language="JavaScript" src="../common/scripts/emxUIToolbar.js"></script>
<script language="JavaScript" src="../emxUIFilterUtility.js"></script>
<script language="JavaScript" src="../common/scripts/emxUIActionbar.js"></script>
<script language="JavaScript" src="../common/scripts/emxUIModal.js"></script>
<script language="JavaScript" src="../common/scripts/emxNavigatorHelp.js"></script>
<script language="JavaScript" src="../emxUIPageUtility.js"></script>
<script language="JavaScript" src="../common/scripts/emxUIBottomPageJavaScriptInclude.js"></script>
<script language="Javascript">

addStyleSheet("emxUIDefault");
addStyleSheet("emxUIToolbar");
addStyleSheet("emxUIMenu");
addStyleSheet("emxUIDOMLayout");
addStyleSheet("emxUIDialog");
var linkArray = new Array;
var pageNumber = 1;
var pages = 1;
var idArray = new Array();
var busIdArray = new Array();
var contentArray = new Array();
var scrollLoc = 0;
var tree = new jsSelectableTree("emxUITree.css","approvalRequest");
</script>
<script language="javascript">
 
//-----------------------------------------------------------------
// Method doSubmitFromPop(strSelectItem,formPopUp)
// This function populates the parent forms text box with the selected value from the  chooser dialog  .
//
// Parameters:
//  strSelectItem, InterNationalized string for Warnig message if nothing is selected.
//  formPopUp, "true" OR null - If invoked from search form else "false".
// Returns:
//  nothing.
//-----------------------------------------------------------------
function doSubmitFromPop(formPopUp){
    var winObj = parent.window.opener;
    var selnode = localSelectableTree.nodes[localSelectableTree.selectedID];
    var Bookshelfnode = selnode.parent;
    var DocLibnode = Bookshelfnode.parent;
    
    var BookshelfnodeName = Bookshelfnode.name;    
    var DocLibnodeName = DocLibnode.name;    

    var BookId = selnode.id
    var BookName = selnode.name
    var BookskeSecurityClass = selnode.skeSecurityClass
    var BookskePreservationTerm = selnode.skePreservationTerm
    
   if(formPopUp == null || formPopUp == "") {
   formPopUp = "true"
   }

    if(selnode == null)
    {
      alert("<emxUtil:i18nScript localize="i18nId">emxComponents.Common.PleaseSelectAnItem</emxUtil:i18nScript>");
      return;
    }

    var selName = selnode.name;

    var newSelName = "";

    for (var n = 1 ; n <= selName.length ; n++)
    {
      if (selName.substring(n-1,n) == "'")
      {
        newSelName+="\\'";
      }
      else
      {
        newSelName+=selName.substring(n-1,n);
      }
    }

 if(formPopUp == "false") {
        eval("winObj.document.forms[0]." + fieldName + ".value='" + newSelName + "'");
        eval("winObj.document.forms[0]." + fieldId + ".value='" + selnode.id + "'");

  } else {
        if (winObj.document.forms[0])
        {

                var today = new Date();
                var iYear=today.getFullYear();
                iYear+= ""
                var sYear  = iYear.substring( iYear.length -2 ,iYear.length ); 
                

                DocLibnodeName = DocLibnodeName.replace(/^\s*/,'');
                DocLibnodeName = DocLibnodeName.replace(/\s*$/,'');
                BookshelfnodeName = BookshelfnodeName.replace(/^\s*/,'');
                BookshelfnodeName = BookshelfnodeName.replace(/\s*$/,'');
                BookName = BookName.replace(/^\s*/,'');
                BookName = BookName.replace(/\s*$/,'');               
                
                //parent.window.opener.document.forms[0].DocLibName.value= DocLibnodeName;
                //parent.window.opener.document.forms[0].BookshelfName.value= BookshelfnodeName;                   
                //parent.window.opener.document.forms[0].BookName.value= BookName;
                //parent.window.opener.document.forms[0].BookId.value= BookId;
                //parent.window.opener.document.forms[0].skeSecurityClass.value= BookskeSecurityClass;
                //parent.window.opener.document.forms[0].skePreservationTerm.value= BookskePreservationTerm;
                //parent.window.opener.document.forms[0].PreTitle.value= "["+BookName+"]";
        
        
        
               
                parent.window.opener.document.forms[0].BookName.value= BookName;
                parent.window.opener.document.forms[0].BookId.value= BookId;
                parent.window.opener.document.forms[0].DocLibName.value= DocLibnodeName;
                parent.window.opener.document.forms[0].BookshelfName.value= BookshelfnodeName; 
                
                var DocMode = parent.window.opener.document.forms[0].DocMode.value;

    if(DocMode!="Search"){
     parent.window.opener.document.forms[0].name.value= "TD" + sYear + "-";
                 parent.window.opener.document.forms[0].skeSecurityClass.value= BookskeSecurityClass;
                 parent.window.opener.document.forms[0].skePreservationTerm.value= BookskePreservationTerm;
                 parent.window.opener.document.forms[0].PreTitle.value= "["+BookName+"]";
 
 
                 var Classification = "<%=i18nStringNowUtil("emxComponents.Common.docLibClassification","emxComponentsStringResource",request.getHeader("Accept-Language"))%>";
                 var PartRelease = "<%=i18nStringNowUtil("emxComponents.Common.docLibPartRelease","emxComponentsStringResource",request.getHeader("Accept-Language"))%>";
              
                 if(Classification == DocLibnodeName){
            parent.window.opener.document.getElementById("Partlabels").style.display = "inline";
            parent.window.opener.document.getElementById("Partlabel").style.display = "none";
            parent.window.opener.document.forms[0].relatedPartProduct.value="";
            parent.window.opener.document.forms[0].relPartProductIds.value="";
            parent.window.opener.document.forms[0].title.value="";
            parent.window.opener.document.forms[0].title.readOnly=true;
            parent.window.opener.document.forms[0].title.style.backgroundColor="#F2F2F2";
                 }else if(PartRelease == BookshelfnodeName){
                  parent.window.opener.document.getElementById("Partlabels").style.display = "inline";
                        parent.window.opener.document.getElementById("Partlabel").style.display = "none";
                        parent.window.opener.document.forms[0].relatedPartProduct.value="";
                        parent.window.opener.document.forms[0].relPartProductIds.value="";
                        parent.window.opener.document.forms[0].title.readOnly=false;
                        parent.window.opener.document.forms[0].title.style.backgroundColor="#FFFFFF";
                 }else{
                  parent.window.opener.document.getElementById("Partlabels").style.display = "none";
               parent.window.opener.document.getElementById("Partlabel").style.display = "inline";
               
            parent.window.opener.document.forms[0].title.readOnly=false;
            parent.window.opener.document.forms[0].title.style.backgroundColor="#FFFFFF";
                 }
          }
          
        
        
        
        
                //var temp = "top.opener.document.frames[2].document.forms[0]."+ fieldName +".value='"+newSelName+"'";
                //eval(temp);
        } else {
                //eval("winObj.document.frames[1].document.forms[0]." + fieldName + ".value='" + newSelName + "'");
                //eval("winObj.document.frames[1].document.forms[0]." + fieldId + ".value='" + selnode.id  + "'");
        }
  }
  parent.window.close();
}

//-----------------------------------------------------------------
// Method doMultiDoneToProcessPage(strSelectItem,strProcessURL,strMode)
// This function redirects the chooser dialog to the process page - strProcessURL , on click of the Done button  .
//
// Parameters:
//  strSelectItem, InterNationalized string for Warnig message if nothing is selected.
//  strProcessURL, The process page where user is redirected to  .
//  strMode  , The mode parameter which is appended to the URL of the process page .
// Returns:
//  nothing.
//-----------------------------------------------------------------
function doMultiDoneToProcessPage(strProcessURL,strMode){
  var result = new Array();
  result[0] = "";
  result[1] = "";
  var objNode = null;
  //Iterate through all the child nodes.
  objNode = localSelectableTree.root;
  if (objNode.hasChildNodes) {
    result = objNode.getCheckedValues(result);
  }
  if(result[0] == "") {
    alert("<emxUtil:i18nScript localize="i18nId">emxComponents.Common.PleaseSelectAnItem</emxUtil:i18nScript>");
    return;
  }
  //replace all occurances of ";?" with "&"
  result[0]=result[0].replace(/\;\?/gi, "&");
  //remove the last character ";"
  result[0]=result[0].substring(0,result[0].length-1);
  parent.window.document.location.href=strProcessURL + result[0]+"&mode="+strMode;
}
</script>


<%
  String contentURL = "rtpemxRouteOrganizationChartDialog.jsp";
%>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<frameset rows="30,*" frameborder="NO" border="0" framespacing="0" scrolling="no">
  <frame src="rtpemxRouteOrganizationChartTopDialog.jsp" name="OrgTopFrame" > 
  <frame src="<%=contentURL%>" name="OrgFrame" scrolling="auto" >
</frameset>
<noframes><body>
</body></noframes>
</html> 

 

rtpemxRouteOrganizationChartTopDialog.jsp

 

<%@include file = "../emxUICommonAppInclude.inc"%>
<%@include file = "emxComponentsNoCache.inc"%>
<%@include file = "emxComponentsCommonUtilAppInclude.inc"%>
<%@include file = "../emxJSValidation.inc" %>
<%@include file = "../common/emxUIConstantsInclude.inc"%>
<%@ page import = "com.matrixone.apps.framework.ui.UIUtil"%>
<script language="javascript" type="text/javascript" src="../common/scripts/emxUICalendar.js"></script>
<%@include file = "../emxUICommonHeaderBeginInclude.inc" %>


<script language="javascript" type="text/javascript" src="../components/emxComponentsJSFunctions.js"></script> 
<html>
 <form name="" action="" method="POST">
  <table border="0" width="100%" cellpadding="5" cellspacing="2">
   <tr>
          <td class="heading1" colspan="2" style="height: 10px">
            <emxUtil:i18n localize="i18nId">emxComponents.Title.OrganizationChat</emxUtil:i18n>
          </td>
      </tr>
  </table>
 </form>
</html>
<%@include file = "../emxUICommonEndOfPageInclude.inc"%>

 

rtpemxRouteOrganizationChartDialog.jsp

 

<%@page import="com.rtp.util.rtpConstantsUtil"%>
<%@include file = "../emxUICommonAppInclude.inc"%>
<%@include file = "emxComponentsUtil.inc" %>
<jsp:useBean id="plant" scope="page" class="com.matrixone.apps.common.Plant"/>

<html>
<head>
<title>Tree</title>
</head>
<body onLoad="loadTree()">
Loading Tree...
</body>

<script language="javascript">
  function loadTree() {
    var tree = parent.tree;
    tree.displayFrame = self.name;
    //tree.multiSelect = true;
    tree.multiSelect = false;
    var objCurNode = null;
    var levelArray = new Array();


<%
 Company company = (Company)DomainObject.newInstance(context,DomainConstants.TYPE_COMPANY);
    com.matrixone.apps.common.Person person = com.matrixone.apps.common.Person.getPerson(context);

    String companyID  = emxGetParameter(request,"objectId");
    String treeParam = "";


    if(companyID != null && !"".equals(companyID)) {
     company.setId(companyID);
       company.getId();
      treeParam = "?objectId=" + companyID + "&newId=";
    } else {
     company = person.getCompany(context);
     companyID = company.getId();
    }
    
    String compName = company.getName();

   StringList buListSelectables = company.getBusSelectList(2);
   buListSelectables.add(rtpConstantsUtil.SELECT_ATTRIBUTE_RTPBUNAME);
   buListSelectables.add(company.SELECT_ID);

   MapList buList = company.getBusinessUnits(context,0,buListSelectables,false);
   buList.sortStructure(rtpConstantsUtil.SELECT_ATTRIBUTE_RTPBUNAME, "ascending", "String");

%>
    //create the root
    var objCompanyNode = tree.createRoot("<%=compName%>", "../common/images/iconSmallCompany.gif", "<%=company.getId()%>");
    tree.root.selectable = true;
    

<%
         Iterator itr = buList.iterator();

         int oldlevel = 1;
         int newlevel = 1;
         while(itr.hasNext()){
           Hashtable subBusMap =  (Hashtable)itr.next();
           String levelstr = (String)subBusMap.get("level");
           newlevel = new Integer(levelstr).intValue();


           if (newlevel == oldlevel && oldlevel == 1){
%>
               objCurNode = objCompanyNode.addChild("<%=subBusMap.get(rtpConstantsUtil.SELECT_ATTRIBUTE_RTPBUNAME)%>", "../common/images/iconSmallBusinessUnit.gif", false, "<%=treeParam + subBusMap.get(company.SELECT_ID)%>");
               objCurNode.selectable = true;
               levelArray[<%=oldlevel%>] = objCompanyNode;

<%
           }else if (newlevel > oldlevel){
%>

               var newnode = objCurNode.addChild("<%=subBusMap.get(rtpConstantsUtil.SELECT_ATTRIBUTE_RTPBUNAME)%>", "../common/images/iconSmallBusinessUnit.gif", false, "<%=treeParam + subBusMap.get(company.SELECT_ID)%>");
               newnode.selectable = true;
               levelArray[<%=newlevel%>] = objCurNode;

               objCurNode = newnode;

<%
           }else if (newlevel < oldlevel){
                 //moving back a level
%>
               var storednode = levelArray[<%=newlevel%>];

               var newnode = storednode.addChild("<%=subBusMap.get(rtpConstantsUtil.SELECT_ATTRIBUTE_RTPBUNAME)%>", "../common/images/iconSmallBusinessUnit.gif", false, "<%=treeParam + subBusMap.get(company.SELECT_ID)%>");
               newnode.selectable = true;

               objCurNode = newnode;

<%
           }else if (newlevel == oldlevel){
                 //equals but not at first level
%>
               var storednode = levelArray[<%=newlevel%>];

               var newnode = storednode.addChild("<%=subBusMap.get(rtpConstantsUtil.SELECT_ATTRIBUTE_RTPBUNAME)%>", "../common/images/iconSmallBusinessUnit.gif", false, "<%=treeParam + subBusMap.get(company.SELECT_ID)%>");
               newnode.selectable = true;

               levelArray[<%=newlevel%>] = storednode;

               objCurNode = newnode;
<%
           }
           oldlevel = newlevel;
         }
%>
    //draw the tree
    tree.draw();
 tree.toggleExpand('root_0');
 tree.toggleExpand('root_0_0');
  }
</script>
</html>

 

 
#########################################################2
#rtpemxRoutePersonFrame.jsp
#########################################################
 

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">
<%@include file = "../emxUIFramesetUtil.inc"%>
<%@include file = "emxRouteInclude.inc"%>
<%
String queryString = request.getQueryString();
String isEO = emxGetParameter(request, "isEO");
String rowSize = "";
if(isEO.equals("true")){
 rowSize = "97";
}else{
 rowSize = "67";
}
%>

<html>
<head>
</head>

<frameset rows="<%=rowSize %>,*" frameborder="NO" border="0" framespacing="0">
  <frame src="rtpemxRoutePersonTopDialog.jsp?<%=queryString %>" name="topFrame" scrolling="NO" noresize >
  <frame src="rtpemxRoutePersonContentDialog.jsp?<%=queryString %>" name="mainFrame">
</frameset>
<noframes><body>

</body></noframes>
</html> 

 

rtpemxRoutePersonTopDialog.jsp

 

<%@include file = "../emxUICommonAppInclude.inc"%>
<%@include file = "emxComponentsNoCache.inc"%>
<%@include file = "emxComponentsCommonUtilAppInclude.inc"%>
<%@include file = "../emxJSValidation.inc" %>
<%@include file = "../common/emxUIConstantsInclude.inc"%>
<%@ page import = "com.matrixone.apps.framework.ui.UIUtil"%>
<script language="javascript" type="text/javascript" src="../common/scripts/emxUICalendar.js"></script>
<%@include file = "../emxUICommonHeaderBeginInclude.inc" %>

<script type="text/javascript" src="../common/scripts/jquery-latest.js"></script>
<script language="javascript" type="text/javascript" src="../components/emxComponentsJSFunctions.js"></script>  
<%
 String personName = UINavigatorUtil.getI18nString("emxFramework.rtpPersonSearch.LocalName", "emxFrameworkStringResource", request.getHeader("Accept-Language"));
 String queryString = request.getQueryString();
 queryString = queryString+"&SearchMode=Name";
 String isEO = emxGetParameter(request, "isEO");
%>
<script type="text/javascript" language="javascript">
 function personNameSearch(){
  document.personSearchConditionForm.target = "mainFrame"; 
  document.personSearchConditionForm.action = "rtpemxRoutePersonContentDialog.jsp?<%=queryString%>";
  document.personSearchConditionForm.submit();
 }
 function clearChecked(){
  var mainFrame = top.pagecontent.approvalContent.centerFrame.mainFrame;
  
  mainFrame.$(':checked[name="emxTableRowId"]').each(function(index) {
   $(this).attr('checked',!$(this).attr('checked'));
  });
 }
 function sectionclick(){
  var root = top.pagecontent.approvalContent.leftFrame.localSelectableTree.root;
  top.pagecontent.approvalContent.centerFrame.mainFrame.orgLoad(root);
 }
</script>
<html>
 <form name="personSearchConditionForm" action="javascript:;" method="POST">
  <table border="0" width="100%" cellpadding="5" cellspacing="2">
   <tr>
          <td class="heading1" colspan="2" style="height: 10px">
            <emxUtil:i18n localize="i18nId">emxComponents.Title.Person</emxUtil:i18n>
          </td>
      </tr>
   <tr>
    <td class="label"><%=personName %></td>
    <td class="inputField">
     <input type="text" name="personName" style = "ime-mode:active" onkeypress="if(event.keyCode==13) {javascript:personNameSearch();}"/>
     <input name="search" onclick="javascript:personNameSearch()" type="button" value="Search"/>
     <input name="search" onclick="javascript:clearChecked()" type="button" value="Clear"/>
    </td>
   </tr>
   <%if(isEO.equals("true")){ %>
   <tr>
    <td class="label"><emxUtil:i18n localize="i18nId">emxComponents.Common.section</emxUtil:i18n></td>
    <td class="inputField">
     <input type="radio" name="section" checked="checked" value="member" onclick="javascript:sectionclick()"><emxUtil:i18n localize="i18nId">emxComponents.Common.member</emxUtil:i18n>
     <input type="radio" name="section" value="distibutor" onclick="javascript:sectionclick()"><emxUtil:i18n localize="i18nId">emxComponents.Common.distrbutor</emxUtil:i18n>
    </td>
   </tr>
   <%} %>
  </table>
 </form>
</html>
<%@include file = "../emxUICommonEndOfPageInclude.inc"%>

 

rtpemxRoutePersonContentDialog.jsp

 

<%--  rtpPersonSearchContent.jsp   -  This page displays options for deleting Collections.
   Copyright (c) 199x-2003 MatrixOne, Inc.
   All Rights Reserved.
   This program contains proprietary and trade secret information of MatrixOne,
   Inc.  Copyright notice is precautionary only
   and does not evidence any actual or intended publication of such program

      static const char RCSID[] = $Id: rtpPersonSearchContent.jsp.rca 1.5 Wed Oct 22 15:48:52 2008 przemek Experimental przemek $
--%>

<%@page import="com.matrixone.util.DomainUtil"%>
<%@page import="com.rtp.util.rtpConstantsUtil"%>
<%@page import="com.rtp.util.rtpPersonutil"%>
<%@page import="com.rtp.util.rtpStringUtil"%>
<%@ include file  ="../emxContentTypeInclude.inc" %>
<%@include file = "../engineeringcentral/emxDesignTopInclude.inc"%>
<%@include file = "../engineeringcentral/emxEngrVisiblePageInclude.inc"%>
<%@include file = "../engineeringcentral/eServiceUtil.inc"%>
<%@include file = "../engineeringcentral/emxengchgJavaScript.js"%>
<%@ include file = "../engineeringcentral/emxengchgUtil.inc"%>

<%@include file = "../emxUICommonHeaderBeginInclude.inc"%>
<%@include file = "../common/emxUIConstantsInclude.inc"%>
<script language="javascript" type="text/javascript" src="../common/scripts/emxUICalendar.js"></script>
<%@ include file = "../common/emxNavigatorTopErrorInclude.inc"%>
<%@include file = "../emxPaginationInclude.inc" %>
<script type="text/javascript" src="../common/scripts/jquery-latest.js"></script>
<%
  String jsTreeID = emxGetParameter(request,"jsTreeID");
  String objectId = emxGetParameter(request,"objectId");
  String initSource = emxGetParameter(request,"initSource");
  String suiteKey = emxGetParameter(request,"suiteKey");
  
  
  String selection = emxGetParameter(request,"selection");
  if(selection==null)selection="multi";
  
  String current = emxGetParameter(request,"current");
//  System.out.println("current : " + current);
  if (current == null || "".equals(current)){
      current = "Active";
      //current = "";
  }/*else if(current.equals("")){
   current = "";
  }
  */
  String role = emxGetParameter(request,"role");
  if (role == null || role.equals("")){
   role = "";
  }
  
  String submitURL                = emxGetParameter(request,"submitURL");
  String submitAction             = emxGetParameter(request,"submitAction");
  String formName                 = emxGetParameter(request,"formName");
  String fieldNameOID             = emxGetParameter(request,"fieldNameOID");
  String fieldNameActual          = emxGetParameter(request,"fieldNameActual");
  String fieldNameDisplay         = emxGetParameter(request,"fieldNameDisplay");
  String mode                     = emxGetParameter(request,"mode");
  String chooserType              = emxGetParameter(request,"chooserType");
  //String mode                     = emxGetParameter(request,"mode");
  String FieldName                = emxGetParameter(request,"FieldName");
  String orgInit                  = emxGetParameter(request,"orgInit");
  String section                  = emxGetParameter(request,"section");
  String isEO                  = emxGetParameter(request,"isEO");
  
  if(section==null){section="member";}
  
  
  
  //hardcoded for now: known issue
  if(suiteKey == null || suiteKey.equals("") || suiteKey.equals("null"))
     suiteKey = "eServiceSuiteFrameworkCentral";

  String commonURL = "";
  commonURL += "?suiteKey=" + suiteKey + "&initSource=" + initSource + "&jsTreeID=" + jsTreeID;
  commonURL += "&objectId="+ objectId  + "&selection="+ selection;
  commonURL += "&submitURL=" + submitURL;
  commonURL += "&submitAction=" +    submitAction;    
  commonURL += "&formName=" +    formName;   
  commonURL += "&FieldName=" +FieldName;
  commonURL += "&fieldNameOID=" +    fieldNameOID;    
  commonURL += "&fieldNameActual=" +    fieldNameActual; 
  commonURL += "&fieldNameDisplay=" +    fieldNameDisplay;
  commonURL += "&mode=" +    mode;            
  commonURL += "&chooserType=" +    chooserType;     
  commonURL += "&mode=" +    mode;          
  commonURL += "&isEO=" +    isEO;
  
  
  //System.out.println(commonURL);
  
  
  StringList  objectSelects = new StringList(10);
  objectSelects.add(DomainConstants.SELECT_ID);
  objectSelects.add(DomainConstants.SELECT_NAME);
  objectSelects.add(rtpConstantsUtil.SELECT_ATTRIBUTE_FIRSTNAME);
  objectSelects.add(rtpConstantsUtil.SELECT_ATTRIBUTE_LASTNAME);
  objectSelects.add(rtpConstantsUtil.SELECT_ATTRIBUTE_TITLE);
  objectSelects.add(rtpConstantsUtil.SELECT_ATTRIBUTE_RTPPOSITION);
  objectSelects.add("to["+DomainConstants.RELATIONSHIP_BUSINESS_UNIT_EMPLOYEE+"].from."+rtpConstantsUtil.SELECT_ATTRIBUTE_RTPBUNAME);
  objectSelects.add("to["+DomainConstants.RELATIONSHIP_BUSINESS_UNIT_EMPLOYEE+"]."+rtpConstantsUtil.SELECT_ATTRIBUTE_RTPDISTRIBUTIONPERSON);
  
  StringList  relSelectList = new StringList(1);
  relSelectList.add(DomainObject.SELECT_RELATIONSHIP_ID);
  relSelectList.add(rtpConstantsUtil.SELECT_ATTRIBUTE_RTPDISTRIBUTIONPERSON);
  
  
  
  MapList mlUserList = new MapList();  
  MapList userList = new MapList();   
  
  DomainObject deptObject  =  DomainObject.newInstance(context);
  
  String deptIdList = emxGetParameter(request,"busUnitIdList");
  if(deptIdList==null)deptIdList="";
  
  String searchMode = emxGetParameter(request,"SearchMode");
  if(searchMode == null){
   searchMode = "OrganizationChart";
  }

  String localName = emxGetParameter(request,"personName");
  if(localName==null)localName="";
  
  if(emxPage.isNewQuery()||(orgInit!=null && orgInit.equals("true") && searchMode.equals("OrganizationChart"))){
   if(searchMode.equals("OrganizationChart")){
    String sWhere = "";
       if(current != null && !current.equals("")){
           sWhere = " (current == '"+current+"') ";
       }
       
    StringTokenizer stDeptIdList = new StringTokenizer(deptIdList ,",");
    
    while (stDeptIdList.hasMoreTokens()) {
        String deptId = stDeptIdList.nextToken();
        deptObject.setId(deptId);
        
        userList = deptObject.getRelatedObjects(context,
                   DomainConstants.RELATIONSHIP_BUSINESS_UNIT_EMPLOYEE,
                       DomainConstants.TYPE_PERSON,
                       objectSelects,
                       relSelectList,
                       true,
                       true,
                       (short)1,
                       sWhere,
                       "",
                       0,
                       null,
                       null,
                       null);
        if(section != null && section.equals("distibutor")){
         MapList tempList = new MapList();
         for(int inx=0;inx<userList.size();inx++){
          Map userMap = (Map)userList.get(inx);
          String distibutor = (String)userMap.get(rtpConstantsUtil.SELECT_ATTRIBUTE_RTPDISTRIBUTIONPERSON);
          if(distibutor.equals("01")){
           tempList.add(userMap);
          }
         }
         mlUserList.addAll(tempList);
     }else{
      mlUserList.addAll(userList);
     }
    }
   }else if(searchMode.equals("Name")){
    String sWhere = "";
    if(!localName.equals("*")&&!localName.equals("")){
     sWhere = "("+rtpConstantsUtil.SELECT_ATTRIBUTE_FIRSTNAME+" smatchlist  \"*" + localName + "*\" ',' || "+rtpConstantsUtil.SELECT_ATTRIBUTE_LASTNAME+" smatchlist  \"*" + localName + "*\" ',')";
    }
     
    if(current != null && !current.equals("")){
        if(sWhere.equals("")){
         sWhere = " (current == '"+current+"') ";
        }else{
         sWhere += " &&  (current == '"+current+"') ";
        }
    }
    mlUserList = DomainObject.findObjects(context,
                       DomainConstants.TYPE_PERSON,
                       "*",
                       "*",
                       "*",
                       "eService Production",
                       sWhere,
                       false,
                       objectSelects);
   }
   
   emxPage.getTable().setObjects(mlUserList);
   emxPage.getTable().setSelects(objectSelects);
  }else{
   mlUserList =  emxPage.getTable().evaluate(context, emxPage.getCurrentPage());
   emxPage.getTable().setSelects(objectSelects);
  }
  MapList lmUsers = new MapList();
  if(role != null && !"".equals(role)) {
   DomainObject personObj = DomainObject.newInstance(context);
   Person person = new Person();
   for(int i = 0; i < mlUserList.size(); i++) {
  Map m = (Map) mlUserList.get(i);
  person.setId((String) m.get("id"));
  if(person.hasRole(context, role)) {
   lmUsers.add(m);
  }
   }
  } else {
   lmUsers.addAll(mlUserList);
  }
  lmUsers.sort(rtpConstantsUtil.SELECT_ATTRIBUTE_LASTNAME, "ascending", "String");
  String queryString = request.getQueryString();
  
%>

<script language="Javascript">

  function submit() {
   var selectFlag = false;
   for (var i = 0; i<document.formContent.elements.length; i++)
     {
         if(document.formContent.elements[i].name == "emxTableRowId" &&
             document.formContent.elements[i].checked == true){
             selectFlag = true;
             break;
         }
     }
   
   if(selectFlag){
    document.formContent.submit();
   }else{
    var msg = "<%=i18nStringNowUtil("emxEngineeringCentral.BuildECR.Noobjectsselected", "emxEngineeringCentralStringResource", request.getHeader("Accept-Language"))%>";
    alert(msg);
    return;
   }
  }
  /*
  function autoSubmit() {
   var url  = document.formContent.action;
   //var name = top.pagecontent.personLeft.PersonNameSearhForm.EngName.value;
   alert(name);
      if(document.getElementsByName("emxTableRowId").length == 1 && (name!="*" && name!="")){
       var obj = document.getElementsByName("emxTableRowId")[0];
       obj.checked=true;
       if(url!=null && url!='null'){
        submit();
       }
      }
  }
  */
  
  function orgLoad(node){
   document.formContent.busUnitIdList.value = "";
   document.formContent.SearchMode.value = "OrganizationChart";
   document.formContent.orgInit.value = "true";
   var personTopFrame = top.pagecontent.approvalContent.centerFrame.topFrame;
   var section = personTopFrame.$(':checked[name="section"]').val();
   document.formContent.section.value = section;

   childNodeCheckSubmit(node);
   document.formContent.action="rtpemxRoutePersonContentDialog.jsp?SearchMode=OrganizationChart&" + "<%=queryString%>";
   document.formContent.target="_self";
   document.formContent.submit();
     
  }
  
  function childNodeCheckSubmit(node){
   for (var i=0; i < node.childNodes.length; i++) {
        
        if(node.childNodes[i].checked == true || node.childNodes[i].checked == 'true'){
         var busList = document.formContent.busUnitIdList;

         if(busList.value == ""){
          busList.value =  node.childNodes[i].id;
         }else{
          busList.value = busList.value + "," + node.childNodes[i].id;
         }
         
        }
        childNodeCheckSubmit(node.childNodes[i]);
       }
  }
  
  function orgSelected(buId){
      document.formContent.busUnitIdList.value = buId;
      document.formContent.SearchMode.value = "OrganizationChart";
      document.formContent.orgInit.value = "true";
      var personTopFrame = top.pagecontent.approvalContent.centerFrame.topFrame;
      var section = personTopFrame.$(':checked[name="section"]').val();
      document.formContent.section.value = section;

      document.formContent.action="rtpemxRoutePersonContentDialog.jsp?SearchMode=OrganizationChart&" + "<%=queryString%>";
      document.formContent.target="_self";
      document.formContent.submit();
     
  }
  
</script>
 
<script type="text/javascript" src="/enovia/NewUI/common/scripts/jquery-latest.js"></script>
<script language="Javascript">
  addStyleSheet("emxUIDefault");
  addStyleSheet("emxUIList");
 </script>
<%@include file = "../emxUICommonHeaderEndInclude.inc" %>
<body  id="searchResult" name="searchResult" topmargin="0" marginheight="0" onload="top.turnOffProgress()">
<form name=formContent method="post" onsubmit="submit(); return false" action="<%=submitURL%>" target="pagehidden">
<input type="hidden" name="objectId" value="<%=objectId%>">
<input type="hidden" name="DeptIdList" value="">
<input type="hidden" name="busUnitIdList" value="">
  <input type="hidden" name="selection"                value="<%=selection%>">
  <input type="hidden" name="submitURL"                value="<%=submitURL%>">
  <input type="hidden" name="submitAction"             value="<%=submitAction%>">
  <input type="hidden" name="formName"                 value="<%=formName%>">
  <input type="hidden" name="FieldName"                 value="<%=FieldName%>">
  
  <input type="hidden" name="fieldNameOID"             value="<%=fieldNameOID%>">
  <input type="hidden" name="fieldNameActual"          value="<%=fieldNameActual%>">
  <input type="hidden" name="fieldNameDisplay"         value="<%=fieldNameDisplay%>">
  <input type="hidden" name="mode"                     value="<%=mode%>">
  <input type="hidden" name="chooserType"              value="<%=chooserType%>">
  <input type="hidden" name="mode"                     value="<%=mode%>">
  <input type="hidden" name="SearchMode"               value="">
  <input type="hidden" name="orgInit"                  value="">
  <input type="hidden" name="section"                  value="">
  <input type="hidden" name="isEO"                     value="<%=isEO%>">
  
  
  

 

  <fw:sortInit
      defaultSortKey="attribute[rtpPosition]"
      defaultSortType="string"
      defaultSortDir="ascending"
      resourceBundle="emxFrameworkStringResource"
      mapList="<%= lmUsers %>"
      params="<%=queryString%>"
      ascendText="emxFramework.Common.SortAscending"
      descendText="emxFramework.Common.SortDescending" />
  <table class="list" width="100%" border="0" cellpadding="2" cellspacing="2">
    <tr>
<%
            if(selection.equals("single")){
%>
                <th>&nbsp</th>
<%
            } else if(selection.equals("none")){

            }else{
%>
                <th><input type="checkbox" name="checkAll" onClick="allSelected('formContent')"></th>
<% 
            }
%>
       <th nowrap="nowrap">
         <fw:sortColumnHeader
           title="emxFramework.rtpPersonSearch.LocalName"
           sortKey="<%=rtpConstantsUtil.SELECT_ATTRIBUTE_LASTNAME%>"
           sortType="string"
           anchorClass="sortMenuItem" />
       </th>
       <th nowrap="nowrap">
         <fw:sortColumnHeader
           title="emxFramework.rtpPersonSearch.rtpPosition"
           sortKey="<%=rtpConstantsUtil.SELECT_ATTRIBUTE_RTPPOSITION%>"
           sortType="string"
           anchorClass="sortMenuItem" />
       </th>
       <th nowrap="nowrap">
         <fw:sortColumnHeader
           title="emxFramework.rtpPersonSearch.Department"
           sortKey="to[Business Unit Employee].from.attribute[rtpBUName]"
           sortType="string"
           anchorClass="sortMenuItem" />
       </th>
   
   </tr>    
<%
    if(lmUsers.size() >0){
%>
   <fw:mapListItr mapList="<%=lmUsers%>" mapName="resultsMap">
   <%
   
     
   
   
       String objId          =    "";
    String objName        =    "";
    String objFirstName   =    "";
    String objLastName    =    "";
    String objTitle       =    "";
    String objDeptName    =    "";
    String objPosition  =    "";
    String objDistributor =    "";
    String personName = "";
   
   try {
     objId          = (String)resultsMap.get("id");
     objName        = (String)resultsMap.get("name");
     objFirstName   = rtpStringUtil.setEmptyExt((String)resultsMap.get(rtpConstantsUtil.SELECT_ATTRIBUTE_FIRSTNAME));
     objLastName    = rtpStringUtil.setEmptyExt((String)resultsMap.get(rtpConstantsUtil.SELECT_ATTRIBUTE_LASTNAME));
     objTitle       = rtpStringUtil.setEmptyExt((String)resultsMap.get(rtpConstantsUtil.SELECT_ATTRIBUTE_TITLE));
     objPosition = rtpStringUtil.setEmptyExt((String)resultsMap.get(rtpConstantsUtil.SELECT_ATTRIBUTE_RTPPOSITION));
     objPosition = DomainUtil.getAttributeRangeValue(context, rtpConstantsUtil.ATTRIBUTE_RTPPOSITION, objPosition);
     objDeptName    = rtpStringUtil.setEmptyExt((String)resultsMap.get("to["+DomainConstants.RELATIONSHIP_BUSINESS_UNIT_EMPLOYEE+"].from."+rtpConstantsUtil.SELECT_ATTRIBUTE_RTPBUNAME));
     objDistributor = rtpStringUtil.setEmptyExt((String)resultsMap.get("to["+DomainConstants.RELATIONSHIP_BUSINESS_UNIT_EMPLOYEE+"]."+rtpConstantsUtil.SELECT_ATTRIBUTE_RTPDISTRIBUTIONPERSON));
     personName = rtpPersonutil.getUserName(context, objName);
   } catch (Exception e) {
       out.print(e.toString());
       
       e.printStackTrace();
       throw e;
   }
   %>
     <tr class='<fw:swap id="even"/>'>

<%
                if (selection.equals("single")){
%>
                        
                        <td><input type="radio" name="emxTableRowId" value="<%= objId %>"></td>
<%                      
                } else if(selection.equals("none")){

                }else{
     if(section.equals("distibutor")){
%>
                        <td><input type="checkbox" name="emxTableRowId" checked="checked" value="<%= objId %>" personName="<%=personName %>" position="<%=objPosition %>" deptName="<%=objDeptName %>" distrib="<%=objDistributor %>"></td>
<%                  
                 }else{
%>
                    <td><input type="checkbox" name="emxTableRowId" value="<%= objId %>" personName="<%=personName %>" position="<%=objPosition %>" deptName="<%=objDeptName %>" distrib="<%=objDistributor %>"></td>
<%
                 }
                }
%>
       
       <td>
       <a href="javascript:emxShowModalDialog('../common/emxTree.jsp?AppendParameters=true&objectId=<%=objId%>',800,600,false)"><%= personName %></a></td>
       <td><%= objPosition %></td>
       <td><%= objDeptName %></td>
     </tr>
   </fw:mapListItr>
<%
    }else{
%>
       <tr height="10">
         <input type="hidden" name="check"  value="" onClick="javascript:doCheckboxClick(this);">
         <td  class="error" width="100%" align="center" colspan="16"><%= i18nStringNowUtil("emxFramework.JavaScript.NoResults", "emxFrameworkStringResource", "ko") %></td>
       </tr>

<%
    }
%>
</table>
</form>
</body>
<%
  // ------------------------ Page content above here  ---------------------
%>
<%@include file = "../emxUICommonEndOfPageInclude.inc" %> 

 

rtpemxCreateMeasureArea.jsp

 


<script type="text/javascript" language="javascript">
 
</script>

<%
  String contentURL = "../components/rtpemxCreateMeasureAreaContent.jsp";
%>

<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<frameset rows="30,*" frameborder="NO" border="0" framespacing="0" scrolling="no">
  <frame src="../components/rtpemxCreateMeasureAreaTop.jsp" name="AreaTopFrame" > 
  <frame src="<%=contentURL%>" name="AreaContentFrame" scrolling="auto" >
</frameset>
</head>

<html>
<body>
</body>
</html> 

 

rtpemxCreateMeasureAreaTop.jsp

 

<%@include file = "../emxUICommonAppInclude.inc"%>
<%@include file = "emxComponentsNoCache.inc"%>
<%@include file = "emxComponentsCommonUtilAppInclude.inc"%>
<%@include file = "../emxJSValidation.inc" %>
<%@include file = "../common/emxUIConstantsInclude.inc"%>
<%@ page import = "com.matrixone.apps.framework.ui.UIUtil"%>
<script language="javascript" type="text/javascript" src="../common/scripts/emxUICalendar.js"></script>
<%@include file = "../emxUICommonHeaderBeginInclude.inc" %>


<script language="javascript" type="text/javascript" src="../components/emxComponentsJSFunctions.js"></script> 
<html>
 <form name="" action="" method="POST">
  <table border="0" width="100%" cellpadding="5" cellspacing="2">
   <tr>
          <td class="heading1" colspan="2" style="height: 10px">
            <emxUtil:i18n localize="i18nId">emxComponents.Title.ApprovalLineTop</emxUtil:i18n>
          </td>
      </tr>
  </table>
 </form>
</html>
<%@include file = "../emxUICommonEndOfPageInclude.inc"%>

 

rtpemxCreateMeasureAreaContent.jsp

 

<%@include file = "../emxUICommonAppInclude.inc"%>
<%@include file = "emxComponentsNoCache.inc"%>
<%@include file = "emxComponentsCommonUtilAppInclude.inc"%>
<%@include file = "../emxJSValidation.inc" %>
<%@include file = "../common/emxUIConstantsInclude.inc"%>
<%@include file = "../emxUICommonHeaderBeginInclude.inc" %>
<script language="javascript" type="text/javascript" src="../common/scripts/emxUICalendar.js"></script>
<script language="javascript" type="text/javascript" src="../components/emxComponentsJSFunctions.js"></script> 
<%@page import="com.matrixone.apps.domain.util.FrameworkProperties"%>
<%@page import="com.matrixone.apps.engineering.EngineeringUtil"%>
<%@page import = "com.matrixone.apps.framework.ui.UIUtil"%>
<%@page import="org.apache.commons.lang3.BooleanUtils"%>
<%@page import="com.matrixone.apps.program.ProjectSpace"%>
<%@page import="org.apache.commons.lang3.StringUtils"%>
<%@page import="com.rtp.util.rtpConstantsUtil"%>
<%@page import="com.rtp.util.rtpDocumentUtil"%>
<%@page import="com.rtp.util.rtpPersonutil"%>

<script type="text/javascript">
 


 function findPerson(){
  var personName = "";
  var position = "";
  var deptName = "";
  var opValue = "";
  var pa = document.approvalForm.receivePerson;
  var f = top.pagecontent.approvalContent.centerFrame.mainFrame.formContent;
  var count = f.elements.length;
  var x = document.getElementById("receivePerson");
  
  
  
  
  for(i=0;i<x.length;i++){//pa.options.length
   
   
   for(j=0;j<count;j++){
    
    if(f.elements[j].checked == true && f.elements[j].name == "emxTableRowId" ){
    
     personName = f.elements[j].personName;
     position = f.elements[j].position;
     deptName = f.elements[j].deptName;
     var objectId = f.elements[j].value;
     
     
     //alert(objectId);
     //alert(x.options[i].value);

  
     if(objectId == x.options[i].value){
      
      return;
      
    
     }else{
      
     }  
    }    
   }   
  }
  saveCheck();
 }
 
 function saveCheck(){
  var personName = "";
  var position = "";
  var deptName = "";
  var opValue = "";
  var f = top.pagecontent.approvalContent.centerFrame.mainFrame.formContent;
  var count = f.elements.length;
  var pa = document.approvalForm.receivePerson;
  var innerhtml = "";
  
  for(i=0;i<count;i++){
   
   
   
   if(f.elements[i].checked == true && f.elements[i].name == "emxTableRowId" ){
    personName = f.elements[i].personName;
    position = f.elements[i].position;
    deptName = f.elements[i].deptName;
    var objectId = f.elements[i].value;
    
       var option = document.createElement("option");
       option.value = objectId;
    
  
    option.innerHTML = personName+" "+position+" "+deptName;
    innerhtml = option.innerHTML;
    pa.appendChild(option);
    
   }
  } 
  
  
 }
 
 
 function removePerson(){
  
  var receivePerson = document.getElementById("receivePerson");
 
   receivePerson.remove(receivePerson.selectedIndex); 
  
 }
  
 
</script>
<html>
 <form name="approvalForm" id="approvalForm" action="" method="POST">
  <table border="0" width="100%" cellpadding="5" cellspacing="2" >
   <tr>
          <td>
     <img src="../common/images/iconStatusAdded.gif" style="cursor: hand" onclick="javascript:findPerson()">
     <img src="../common/images/iconStatusRemoved.gif"  style="cursor: hand" onclick="javascript:removePerson()">
    </td>
      </tr>
      <tr>
       <td>
       
    <select name="receivePerson" id = "receivePerson" multiple="multiple" style='width:90%; height:150px;' >
    
    
    
    </select>
    
    </td>
      </tr>
  </table>
 </form>
</html>
<%@include file = "../emxUICommonEndOfPageInclude.inc"%>

 
#############################################3
#rtpemxRouteApprovalLineDialog.jsp
#############################################
 

<%@page import="com.rtp.util.rtpRequestApprovalUtil"%>
<%@page import="com.matrixone.util.DomainUtil"%>
<%@page import="com.rtp.util.rtpConstantsUtil"%>
<%@page import="com.rtp.util.rtpPersonutil"%>
<%@include file = "../emxUICommonAppInclude.inc"%>
<%@include file = "emxComponentsNoCache.inc"%>
<%@include file = "emxComponentsCommonUtilAppInclude.inc"%>
<%@include file = "../emxJSValidation.inc" %>
<%@include file = "../common/emxUIConstantsInclude.inc"%>
<%@ page import = "com.matrixone.apps.framework.ui.UIUtil"%>
<%@include file = "../emxUICommonHeaderBeginInclude.inc" %>
<script language="javascript" type="text/javascript" src="../components/emxComponentsJSFunctions.js"></script>
<script type="text/javascript" src="../common/scripts/jquery-latest.js"></script>
<%
 String queryString = request.getQueryString();
 String objectId = emxGetParameter(request, "objectId");
 String emxTableRowId = emxGetParameter(request, "emxTableRowId");
 String isMessRequestApproval = emxGetParameter(request, "isMessRequestApproval");
 
 boolean isChange = false;
 
 if(isMessRequestApproval != null && isMessRequestApproval.equals("true")){
  String[] tempObjectIds = objectId.split(",");
  objectId = tempObjectIds[0];
 }
 DomainObject object = DomainObject.newInstance(context, objectId);
 if (rtpRequestApprovalUtil.isChangeWorkProcess(context,objectId)) {
  isChange = true;
 }
 
 boolean isEngineeringChange = false;
 if (isChange) {
  String eoType = object.getAttributeValue(context, "rtpEOType");
  isEngineeringChange = "FIRST".equals(eoType) || "CHANGE".equals(eoType);
 }
 
 String validationMsg = UINavigatorUtil.getI18nString("emxComponents.Common.RequestApprovalReviewerAndApproverCheck","emxComponentsStringResource",request.getHeader("Accept-Language"));
 
 String routeTemplateId = emxGetParameter(request, "routeTemplate") == null ? "" : emxGetParameter(request, "routeTemplate");
 
 // 수정모드 여부
 String mode = emxGetParameter(request, "mode") == null ? "" : emxGetParameter(request, "mode");

 String routeNodes = "";
 String disableRequestStep = "";
 MapList routeNodeList = new MapList();
 
 // 라우트 템플릿 아이디가 존재하거나 .... 수정모드인경우
 if(!"".equals(routeTemplateId)||mode.equals("edit")){
  HashMap paramMap = new HashMap();
  // 수정모드 일경우
  if(mode.equals("edit")){
   paramMap.put("objectId",objectId);
   paramMap.put("isActiveRoute","Y");
   paramMap.put("emxTableRowId",emxTableRowId);
   String[] disArgs = JPO.packArgs(paramMap);
   disableRequestStep = (String)JPO.invoke(context, "emxRoute", null, "getDisableRequestApprovalStep", disArgs, String.class);
  }else{
   paramMap.put("objectId",routeTemplateId);
  }
  String[] args = JPO.packArgs(paramMap);
  routeNodeList = (MapList)JPO.invoke(context, "emxLifecycle", null, "getRouteNodeList", args, MapList.class);
  for(int inx=0;inx<routeNodeList.size();inx++){
   Map routeNodeMap = (Map)routeNodeList.get(inx);
   String personId = (String)routeNodeMap.get(DomainConstants.SELECT_ID);
   String approvalStep = (String)routeNodeMap.get(rtpConstantsUtil.SELECT_ATTRIBUTE_RTPREQUESTAPPROVALSTEP);
   String personName = (String)routeNodeMap.get(DomainConstants.SELECT_NAME);
   String distibutor = (String)routeNodeMap.get("to["+DomainConstants.RELATIONSHIP_BUSINESS_UNIT_EMPLOYEE+"]."+rtpConstantsUtil.SELECT_ATTRIBUTE_RTPDISTRIBUTIONPERSON);
   
   personName = rtpPersonutil.getUserName(context,personName)+" "+rtpPersonutil.getUserPosition(context, personName)+" "+rtpPersonutil.getOranizationName(context, personName);
   String sType = object.getInfo(context, DomainConstants.SELECT_TYPE);
   if(!(approvalStep.equals("BOM_Check")
     || approvalStep.equals("DMU_Check")
     || (sType.equals(DomainConstants.TYPE_ECR)&&approvalStep.equals("In_Approval"))
     || (sType.equals(rtpConstantsUtil.TYPE_RTPSRREQUEST)&&approvalStep.equals("Processing")))
   ){
    if("".equals(routeNodes)){
     routeNodes = approvalStep+","+personName+","+personId+","+distibutor;
    }else{
     routeNodes = routeNodes+"^"+approvalStep+","+personName+","+personId+","+distibutor;
    }
   }
  }
  System.out.println("routeNodes===>" + routeNodes);
 }
 
%>
<script type="text/javascript" language="javascript">
 var isChange = <%=isChange%>;


function findPerson(selectObj) {
 var mainFrame = top.pagecontent.approvalContent.centerFrame.mainFrame;
 if(!selectObj.disabled){
  if(selectObj.name == "reviewer" || selectObj.name == "approver"){
   if(mainFrame.$(':checked[name="emxTableRowId"]').size()!=0){
    if (mainFrame.$(':checked[name="emxTableRowId"]').size()>1){
     alert("<%=validationMsg%>");
     return;
    }
    if($(selectObj).find('option').size()>0){
     $(selectObj).find('option').remove();
    }
   }
  }
  
  mainFrame.$(':checked[name="emxTableRowId"]').each(function(index) {
  var val = $(this).val();
  var personName = $(this).attr('personName');
  var position = $(this).attr('position');
  var deptName = $(this).attr('deptName');
  var exist = false;
  $(selectObj).find('option').each(function() {
   if ($(this).val() == val) {
    exist = true;
   }
  });
  
  // added by Y1M
  var distrib = $(this).attr('distrib');
  if (selectObj.name == "Distribution" && distrib != "01"){
   alert('<emxUtil:i18nScript localize="i18nId">emxComponents.Common.ChooseDistributionReceiver</emxUtil:i18nScript>');
   return;
  }
  
  if (!exist) $(selectObj).append('<option value="' + val +  '">' + personName + "&nbsp" + position + "&nbsp" + deptName + '</option>');
  exist = false;
  });
  
  if(selectObj.name =="coWorker"){
   if($(selectObj).find('option').size()>0){
    $('input:[name=approvalProgressForCoWorker]').attr("disabled",false);
   }
  }
 }
}
function removePerson(selectObj) {
 var selectedVal = $(selectObj).find(':selected[doNotRemove!="true"]').val();
 $(selectObj).find(':selected[doNotRemove!="true"]').remove();
 
 if(selectObj.name =="coWorker"){
  if($(selectObj).find('option').size() == 0){
   $('input:[name=approvalProgressForCoWorker]').attr("disabled",true);
  }
 }
}

function upPerson(selectObj) {
 var selectedOption = $(selectObj).find(':selected');
 if (selectedOption.prev()) {
  selectedOption.first().prev().before(selectedOption);
 }
}

function downPerson(selectObj) {
 var selectedOption = $(selectObj).find(':selected');
 if (selectedOption.next()) {
  selectedOption.last().next().after(selectedOption);
 }
} 
function submit(){
 if (!checkChangeApproval()) return;
 var approvalTopFrame = top.pagecontent.approvalTop;

 var requestApprovalComment = approvalTopFrame.$('textarea:[name=requestApprovalComment]').val();
 var targetObjectIds = approvalTopFrame.$('input:[name=targetObjectIds]').val();
 var isMessRequestApproval = approvalTopFrame.$('input:[name=isMessRequestApproval]').val();
 
 
 var emptyPersonCheck = false;
 var rightFrame = this;
 var mode = "<%=mode%>";
 rightFrame.$('select').each(function() {
  var selObj = $(this);
  var selObjName = selObj.attr('name');
  var selValue = "";
  if(selObj.find(':selected').val()!=null){
   selObj.find(':selected').each(function(){
    var selOption = $(this);
    
    selOption.attr('selected' , '');
   }
   );
  }
   selObj.find('option').each(function() {
    var optionValue = $(this).val();
    if(optionValue == null){
     optionValue = "";
    }
    if(selValue == ""){
     selValue = optionValue;
    }else{
     selValue = selValue +","+optionValue; 
    }
   });
   if(selObjName != "coWorker" && selValue == ""){
    var errMsg1 = "";
    
    if(selObjName=="reviewer"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.reviewer</emxUtil:i18nScript>';
    }else if(selObjName=="approver"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.approver</emxUtil:i18nScript>';
    }else if(selObjName=="In_Check"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.In_Check</emxUtil:i18nScript>';
    }else if(selObjName=="BOM_Check"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.BOM_Check</emxUtil:i18nScript>';
    }else if(selObjName=="In_Approval"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.In_Approval</emxUtil:i18nScript>';
    }else if(selObjName=="Distribution"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.Distribution</emxUtil:i18nScript>';
    }else if(selObjName=="Received"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.Received</emxUtil:i18nScript>';
    }else if(selObjName=="Processing"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.Processing</emxUtil:i18nScript>';
    }else if(selObjName=="Review"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.Review</emxUtil:i18nScript>';
    }
    
    var errMsg2 = "<emxUtil:i18nScript localize="i18nId">emxComponents.Common.requestApprovalErrMsg</emxUtil:i18nScript>";
    alert(errMsg1+" "+errMsg2);
    emptyPersonCheck = true;
    return false;
   }else{
    if(mode!='edit'){
     rightFrame.$('form:[name=requestApprovalCreateForm]').append('<input type="hidden" value="'+selValue+'" name="'+selObjName+'">');
    }else{
     if(!selObj.attr('disabled')){
      rightFrame.$('form:[name=requestApprovalCreateForm]').append('<input type="hidden" value="'+selValue+'" name="'+selObjName+'">');
     }
    }
   }
 });
 if(!emptyPersonCheck){
  // 결재요청 Msg 추가
  if(!confirm('<emxUtil:i18nScript localize="i18nId">emxComponents.Common.RequestApprovalMsg</emxUtil:i18nScript>')) return;

  onMaskProgress();
  document.requestApprovalCreateForm.requestApprovalComment.value = requestApprovalComment;
  document.requestApprovalCreateForm.targetObjectIds.value = targetObjectIds;
  document.requestApprovalCreateForm.isMessRequestApproval.value = isMessRequestApproval;
  document.requestApprovalCreateForm.target = "pagehidden";
  document.requestApprovalCreateForm.action = "rtpemxRouteApprovalLineProcess.jsp";
  document.requestApprovalCreateForm.submit();
 }
}

function save(){
 if (!checkChangeApproval()) return;
 var approvalTopFrame = top.pagecontent.approvalTop;

 var requestApprovalComment = approvalTopFrame.$('textarea:[name=requestApprovalComment]').val();
 var targetObjectIds = approvalTopFrame.$('input:[name=targetObjectIds]').val();
 var isMessRequestApproval = approvalTopFrame.$('input:[name=isMessRequestApproval]').val();
 
 
 var emptyPersonCheck = false;
 var rightFrame = this;
 rightFrame.$('select').each(function() {
  var selObj = $(this);
  var selObjName = selObj.attr('name');
  var selValue = "";
  if(selObj.find(':selected').val()!=null){
   selObj.find(':selected').each(function(){
    var selOption = $(this);
    
    selOption.attr('selected' , '');
   }
   );
  }
   selObj.find('option').each(function() {
    var optionValue = $(this).val();
    if(optionValue == null){
     optionValue = "";
    }
    if(selValue == ""){
     selValue = optionValue;
    }else{
     selValue = selValue +","+optionValue; 
    }
   });
   if(selObjName != "coWorker" && selValue == ""){
    var errMsg1 = "";
    
    if(selObjName=="reviewer"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.reviewer</emxUtil:i18nScript>';
    }else if(selObjName=="approver"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.approver</emxUtil:i18nScript>';
    }else if(selObjName=="In_Check"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.In_Check</emxUtil:i18nScript>';
    }else if(selObjName=="BOM_Check"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.BOM_Check</emxUtil:i18nScript>';
    }else if(selObjName=="In_Approval"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.In_Approval</emxUtil:i18nScript>';
    }else if(selObjName=="Distribution"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.Distribution</emxUtil:i18nScript>';
    }else if(selObjName=="Received"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.Received</emxUtil:i18nScript>';
    }else if(selObjName=="Processing"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.Processing</emxUtil:i18nScript>';
    }else if(selObjName=="Review"){
     errMsg1 = '<emxUtil:i18nScript localize="i18nId">emxComponents.Attribute.rtpRequestApprovalStep.Review</emxUtil:i18nScript>';
    }
    
    var errMsg2 = "<emxUtil:i18nScript localize="i18nId">emxComponents.Common.requestApprovalErrMsg</emxUtil:i18nScript>";
    alert(errMsg1+" "+errMsg2);
    emptyPersonCheck = true;
    return false;
   }else{
    rightFrame.$('form:[name=requestApprovalCreateForm]').append('<input type="hidden" value="'+selValue+'" name="'+selObjName+'">');
   }
 });
 if(!emptyPersonCheck){
  // 결재선 저장 Msg 추가
  if(!confirm('<emxUtil:i18nScript localize="i18nId">emxComponents.Common.SaveApprovalLineMsg</emxUtil:i18nScript>')) return;
  
  document.requestApprovalCreateForm.requestApprovalComment.value = requestApprovalComment;
  document.requestApprovalCreateForm.targetObjectIds.value = targetObjectIds;
  document.requestApprovalCreateForm.isMessRequestApproval.value = isMessRequestApproval;
  document.requestApprovalCreateForm.mode.value = "save";
  document.requestApprovalCreateForm.target = "pagehidden";
  document.requestApprovalCreateForm.action = "rtpemxRouteApprovalLineProcess.jsp";
  document.requestApprovalCreateForm.submit();
 }
}

function onLoad(){
 var mode = "<%=mode%>";
 var routeTemplateId = "<%=routeTemplateId%>";
 $('input:[name=approvalProgressForCoWorker]').attr("disabled","disabled");
 
 if(mode == "edit" || routeTemplateId != ""){
  var routeNodes = "<%=routeNodes%>";
  var routeNodeList = routeNodes.split("^");
  for(var inx=0;inx<routeNodeList.length;inx++){
   var routeNodeInfo = routeNodeList[inx];
   var routeNodeInfoList = routeNodeInfo.split(",");
   
   var approvalStep = routeNodeInfoList[0];
   var personName = routeNodeInfoList[1];
   var personId = routeNodeInfoList[2];
   var distributor = routeNodeInfoList[3];
   
   if(approvalStep == "Distribution" && distributor != "01"){
    //alert("distributor == " + distributor);
    continue;
   }
   var findOID = personId.substring(0, personId.length -1);
   /*if(approvalStep == "Distribution") {
    alert('findOID = ' + findOID);
   }*/
   if ($('select:[name='+approvalStep+']').children('option[value=' + findOID + ']').size() == 0) {
    $('select:[name='+approvalStep+']').append('<option value="' + personId +  '">' + personName + '</option>');
   }
   
  }
  if(mode == "edit"){
   var disableRequestStep = "<%=disableRequestStep%>";
   var disableRequestStepList = disableRequestStep.split(",");
   for(var jnx=0;jnx<disableRequestStepList.length;jnx++){
    $('select:[name='+disableRequestStepList[jnx]+']').attr("disabled","disabled");
   }
  }
  if($('select:[name="coWorker"]').find('option').size()>0){
   $('input:[name=approvalProgressForCoWorker]').attr("disabled",false);
  }
 }
}

function checkChangeApproval() {
 if (isChange) {
  if ($('select[name=In_Check] option').size() > 1) {
   alert('<emxUtil:i18nScript localize="i18nId">emxComponents.Warning.InCheckAcceptOnlyOneUser</emxUtil:i18nScript>');
   return false;
  }
  
  if ($('select[name=In_Approval] option').size() > 1) {
   alert('<emxUtil:i18nScript localize="i18nId">emxComponents.Warning.InApprovalAcceptOnlyOneUser</emxUtil:i18nScript>');
   return false;
  }
 }
 return true;
}

</script>
<html>
<body onload="onLoad()">
 <form name="requestApprovalCreateForm" method="POST">
  <table border="0" width="100%" cellpadding="5" cellspacing="2">
   <tr>
          <td class="heading1" colspan="2" style="height: 10px">
            <emxUtil:i18n localize="i18nId">emxComponents.Title.ApprovalLine</emxUtil:i18n>
          </td>
      </tr>
      <%
       if (!isChange) {
      %>
       <tr>
     <td class="inputField">
      <table width="100%" border="0" cellpadding="0"  cellspacing="0">
       <tr>
           <td>
         <img src="../common/images/iconStatusAdded.gif" style="cursor: hand" onclick="javascript:findPerson(document.requestApprovalCreateForm.coWorker)">
         <img src="../common/images/iconStatusRemoved.gif"  style="cursor: hand" onclick="javascript:removePerson(document.requestApprovalCreateForm.coWorker)">
         
        </td>
        <td align="right">
         <input type="checkbox" name="approvalProgressForCoWorker" id="approvalProgressForCoWorker">
        </td>
        <td style="font-weight: bolder;color:#535552;">
         <emxUtil:i18n localize="i18nId">emxComponents.Common.RequestApprovalProgress</emxUtil:i18n>
        </td>
        <td width="30%" class="" style="font-weight: bolder;" >
        <emxUtil:i18n localize="i18nId">emxComponents.Common.RequestApprovalCoWorker</emxUtil:i18n>
        </td>
       </tr>
       <tr>
          <td colspan="4">
           <table>
            <tr>
             <td>
            <select style="width: 100%; font-size: 12px" multiple size='5' name="coWorker" id="coWorker">
            
            </select>
           </td>
           <td width="20">
            &nbsp;<img src="../common/images/iconSmallArrowUp.gif" style="cursor: hand" onclick="javascript:upPerson(document.requestApprovalCreateForm.coWorker)"><br>
            &nbsp;<img src="../common/images/iconSmallArrowDown.gif"  style="cursor: hand" onclick="javascript:downPerson(document.requestApprovalCreateForm.coWorker)">
           </td>
          </tr>
         </table>
        </td>
       </tr>
      </table>
     </td>
    </tr>
    <tr>
     <td class="inputField">
      <table width="100%" border="0" cellpadding="0"  cellspacing="0">
       <tr>
           <td>
         <img src="../common/images/iconStatusAdded.gif" style="cursor: hand" onclick="javascript:findPerson(document.requestApprovalCreateForm.reviewer)">
         <img src="../common/images/iconStatusRemoved.gif"  style="cursor: hand" onclick="javascript:removePerson(document.requestApprovalCreateForm.reviewer)">
        </td>
        <td width="20%" class="" style="font-weight: bolder;color:#535552;" >
        <emxUtil:i18n localize="i18nId">emxComponents.Common.RequestApprovalReviewer</emxUtil:i18n>
        </td>
       </tr>
       <tr>
          <td colspan="2">
           <table>
            <tr>
             <td>
            <select style="width: 100%; font-size: 12px" multiple size='5' name="reviewer" id="reviewer">
            </select>
           </td>
           <td width="20">
            <!-- &nbsp;<img src="../common/images/iconSmallArrowUp.gif" style="cursor: hand" onclick="javascript:upPerson(document.requestApprovalCreateForm.reviewer)"><br>
            &nbsp;<img src="../common/images/iconSmallArrowDown.gif"  style="cursor: hand" onclick="javascript:downPerson(document.requestApprovalCreateForm.reviewer)">  -->
           </td>
          </tr>
         </table>
        </td>
       </tr>
      </table>
     </td>
    </tr>
    <tr>
     <td class="inputField">
      <table width="100%" border="0" cellpadding="0"  cellspacing="0">
       <tr>
           <td>
         <img src="../common/images/iconStatusAdded.gif" style="cursor: hand" onclick="javascript:findPerson(document.requestApprovalCreateForm.approver)">
         <img src="../common/images/iconStatusRemoved.gif"  style="cursor: hand" onclick="javascript:removePerson(document.requestApprovalCreateForm.approver)">
        </td>
        <td width="20%" class="" style="font-weight: bolder;color:#535552;" >
        <emxUtil:i18n localize="i18nId">emxComponents.Common.RequestApprovalApprover</emxUtil:i18n>
        </td>
       </tr>
       <tr>
          <td colspan="2">
           <table>
            <tr>
             <td>
            <select style="width: 100%; font-size: 12px" multiple size='5' name="approver" id="approver">
            </select>
           </td>
           <td width="20">
            <!-- &nbsp;<img src="../common/images/iconSmallArrowUp.gif" style="cursor: hand" onclick="javascript:upPerson(document.requestApprovalCreateForm.approver)"><br>
            &nbsp;<img src="../common/images/iconSmallArrowDown.gif"  style="cursor: hand" onclick="javascript:downPerson(document.requestApprovalCreateForm.approver)">  -->
           </td>
          </tr>
         </table>
        </td>
       </tr>
      </table>
     </td>
    </tr>
      <%
       } else {
        HashMap paramMap = new HashMap();
        paramMap.put("objectId", objectId);
        String[] args = JPO.packArgs(paramMap);
        StringList requestApprovalList = (StringList) JPO.invoke(context, "emxRoute", null, "getAllRequestApprovalList", args, StringList.class);
        for (int inx = 0; inx < requestApprovalList.size(); inx++) {
         String requestApprovalStep = (String) requestApprovalList.get(inx);
         String displayRequestApprovalStep = UINavigatorUtil.getI18nString("emxFramework.Attribute.rtpRequestApprovalStep."+ requestApprovalStep,"emxFrameworkStringResource",request.getHeader("Accept-Language"));
         String type = object.getInfo(context, DomainConstants.SELECT_TYPE);
         if (requestApprovalStep.equals("BOM_Check")
        || requestApprovalStep.equals("DMU_Check")
        || ((type).equals(DomainConstants.TYPE_ECR) && requestApprovalStep.equals("In_Approval"))
        || ((type).equals(rtpConstantsUtil.TYPE_RTPSRREQUEST) && requestApprovalStep.equals("Processing"))) {
          String autoPersonId = "";
          String displayAutoPersonName = "";
          MapList personList = new MapList();
          
          if(requestApprovalStep.equals("BOM_Check")){
           //BOM Admin
           String bomAdmin = MqlUtil.mqlCommand(context,"list Person * where (assignment[BOM Admin]==True)");
           DomainObject bomAdminObject = rtpPersonutil.getPersonDomainObject(context, bomAdmin);
           autoPersonId = bomAdminObject.getObjectId(context);
           String bomAdminName = rtpPersonutil.getUserName(context, bomAdmin);
           String bomAdminPosition = bomAdminObject.getInfo(context,rtpConstantsUtil.SELECT_ATTRIBUTE_RTPPOSITION);
           bomAdminPosition = DomainUtil.getAttributeRangeValue(context,rtpConstantsUtil.ATTRIBUTE_RTPPOSITION,bomAdminPosition);
           String bomAdminOranizationName = rtpPersonutil.getOranizationName(context, bomAdmin);
           displayAutoPersonName = bomAdminName + " " + bomAdminPosition + " " + bomAdminOranizationName + " (BOM)";
           
           HashMap bomAdminMap = new HashMap(); 
           bomAdminMap.put("autoPersonId",autoPersonId);
           bomAdminMap.put("displayAutoPersonName",displayAutoPersonName);
           personList.add(bomAdminMap);
          } else if (requestApprovalStep.equals("DMU_Check")){
           //DMU Admin
           String dmuAdmins = MqlUtil.mqlCommand(context,"list Person * where (assignment[DMU Admin]==True)");
           String[] dmuAdminList = dmuAdmins.split("\\n");
           
           for(int jnx=0;jnx<dmuAdminList.length;jnx++){
            DomainObject dmuAdminObject = rtpPersonutil.getPersonDomainObject(context, dmuAdminList[jnx]);
            autoPersonId = dmuAdminObject.getObjectId(context);
            String dmuAdminName = rtpPersonutil.getUserName(context, dmuAdminList[jnx]);
            String dmuAdminPosition = dmuAdminObject.getInfo(context,rtpConstantsUtil.SELECT_ATTRIBUTE_RTPPOSITION);
            dmuAdminPosition = DomainUtil.getAttributeRangeValue(context,rtpConstantsUtil.ATTRIBUTE_RTPPOSITION,dmuAdminPosition);
            String dumAdminOranizationName = rtpPersonutil.getOranizationName(context, dmuAdminList[jnx]);
            displayAutoPersonName = dmuAdminName + " " + dmuAdminPosition + " " + dumAdminOranizationName +" (DMU)";
            
            HashMap dmuAdminMap = new HashMap();
            dmuAdminMap.put("autoPersonId",autoPersonId);
            dmuAdminMap.put("displayAutoPersonName",displayAutoPersonName);
            personList.add(dmuAdminMap);
           }
          } else if (requestApprovalStep.equals("Processing")) {
           //SR Admin
           String srAdmin = "";
           srAdmin = MqlUtil.mqlCommand(context,"list Person * where (assignment[rtpSRAdmin]==True)");
           
           if (!srAdmin.equals("")) {
            DomainObject srAdminObject = rtpPersonutil.getPersonDomainObject(context, srAdmin);
            autoPersonId = srAdminObject.getObjectId(context);
            String srAdminName = rtpPersonutil.getUserName(context, srAdmin);
            String srAdminPosition = srAdminObject.getInfo(context,rtpConstantsUtil.SELECT_ATTRIBUTE_RTPPOSITION);
            srAdminPosition = DomainUtil.getAttributeRangeValue(context,rtpConstantsUtil.ATTRIBUTE_RTPPOSITION,srAdminPosition);
            String srAdminOranizationName = rtpPersonutil.getOranizationName(context, srAdmin);
            displayAutoPersonName = srAdminName + " " + srAdminPosition + " " + srAdminOranizationName;
            
            HashMap srAdminMap = new HashMap(); 
            srAdminMap.put("autoPersonId",autoPersonId);
            srAdminMap.put("displayAutoPersonName",displayAutoPersonName);
            personList.add(srAdminMap);
           }
          }else{
           String myDeptId = rtpPersonutil.getOranizationId(context, context.getUser());
           autoPersonId = MqlUtil.mqlCommand(context,"print bus "+myDeptId+" select from["+DomainConstants.RELATIONSHIP_RESOURCE_MANAGER+"].to.id dump ");
           DomainObject myTeamLeaderObject = DomainObject.newInstance(context, autoPersonId);
           String myTeamLeader = myTeamLeaderObject.getInfo(context, DomainConstants.SELECT_NAME);
           String myTeamLeaderName = rtpPersonutil.getUserName(context, myTeamLeader);
           String myTeamLeaderPosition = myTeamLeaderObject.getInfo(context,rtpConstantsUtil.SELECT_ATTRIBUTE_RTPPOSITION);
           myTeamLeaderPosition = DomainUtil.getAttributeRangeValue(context,rtpConstantsUtil.ATTRIBUTE_RTPPOSITION,myTeamLeaderPosition);
           String myTeamLeaderOranizationName = rtpPersonutil.getOranizationName(context, myTeamLeader);
           displayAutoPersonName = myTeamLeaderName + " " + myTeamLeaderPosition + " " + myTeamLeaderOranizationName;
           
           
           //==========================================================================================================
           //ECR의 경우 대결자를 지정한 경우 대결자가 결재선에 현시되도록 수정 (2012-11-21 By 이동한 GJ)
           if (type.equals(DomainConstants.TYPE_ECR)) {
            SimpleDateFormat sdf1 = new SimpleDateFormat("M/d/yyyy hh:mm:ss a", Locale.ENGLISH);
            String today = sdf1.format(new Date());
            
            String szMql = "temp query bus Person " + myTeamLeader + " * where 'attribute[Absence Start Date]<=\"" + today + "\" && attribute[Absence End Date]>=\"" + today + "\" && attribute[Absence Delegate]!=\"\"' select attribute[Absence Delegate] dump |";
            
            String resultValue = MqlUtil.mqlCommand(context, szMql);
            if (resultValue != null && !resultValue.equals("")) {
             StringList retList = FrameworkUtil.split(resultValue, "|");

             String delegatePersonName = (String)retList.get(3);

                if (delegatePersonName != null && !delegatePersonName.equals("")) {
                 //System.out.println("delegatePersonName===>" + delegatePersonName);
                 
                 szMql = "temp query bus Person " + delegatePersonName + " * select id dump |";
                 
                 resultValue = MqlUtil.mqlCommand(context, szMql);
                 if (resultValue != null && !resultValue.equals("")) {
                  retList = FrameworkUtil.split(resultValue, "|");
                  
                  String delegatePersonId = (String)retList.get(3);
                  
                  if (delegatePersonId != null && !delegatePersonId.equals("")) {
                   myTeamLeaderObject = DomainObject.newInstance(context, delegatePersonId);
                   
                   myTeamLeader = myTeamLeaderObject.getInfo(context, DomainConstants.SELECT_NAME);
                   myTeamLeaderName = rtpPersonutil.getUserName(context, myTeamLeader);
                   myTeamLeaderPosition = myTeamLeaderObject.getInfo(context,rtpConstantsUtil.SELECT_ATTRIBUTE_RTPPOSITION);
                   myTeamLeaderPosition = DomainUtil.getAttributeRangeValue(context,rtpConstantsUtil.ATTRIBUTE_RTPPOSITION,myTeamLeaderPosition);
                   myTeamLeaderOranizationName = rtpPersonutil.getOranizationName(context, myTeamLeader);
                   
                   displayAutoPersonName = myTeamLeaderName + " " + myTeamLeaderPosition + " " + myTeamLeaderOranizationName;
                   
                   autoPersonId = delegatePersonId;
                  }
                 }
                }
               }
           }
           //==========================================================================================================
            
            
           HashMap teamLeaderMap = new HashMap();
           teamLeaderMap.put("autoPersonId",autoPersonId);
           teamLeaderMap.put("displayAutoPersonName",displayAutoPersonName);
           personList.add(teamLeaderMap);
          }
      %>
       <tr>
     <td class="inputField">
      <table width="100%" border="0" cellpadding="0"  cellspacing="0">
       <tr>
           <td>
         <img src="../common/images/iconStatusAdded.gif" style="cursor: hand" onclick="javascript:findPerson(document.requestApprovalCreateForm.<%=requestApprovalStep%>)">
         <img src="../common/images/iconStatusRemoved.gif"  style="cursor: hand" onclick="javascript:removePerson(document.requestApprovalCreateForm.<%=requestApprovalStep%>)">
        </td>
        <td class="" style="font-weight: bolder;color:#535552;" align="right">
         <%=displayRequestApprovalStep%>&nbsp;&nbsp;
        </td>
        <td width="20">&nbsp;</td>
       </tr>
       <tr>
          <td colspan="2">
           <table>
            <tr>
             <td>
            <select style="width: 107%; font-size: 12px" multiple size='4' name="<%=requestApprovalStep%>" disabled="disabled" id="<%=requestApprovalStep%>">
            <%for(int knx=0;knx<personList.size();knx++){ 
             Map personInfoMap = (Map)personList.get(knx);
             autoPersonId =(String)personInfoMap.get("autoPersonId");
             displayAutoPersonName =(String)personInfoMap.get("displayAutoPersonName");
            %>
             <option value="<%=autoPersonId%>"><%=displayAutoPersonName%></option>
            <%}%>
            </select>
           </td>
           <td width="20">
            <!--  &nbsp;<img src="../common/images/iconSmallArrowUp.gif" style="cursor: hand" onclick="javascript:upPerson(document.requestApprovalCreateForm.<%=requestApprovalStep%>)"><br>
            &nbsp;<img src="../common/images/iconSmallArrowDown.gif"  style="cursor: hand" onclick="javascript:downPerson(document.requestApprovalCreateForm.<%=requestApprovalStep%>)">
            -->
            &nbsp;
           </td>
          </tr>
         </table>
        </td>
       </tr>
      </table>
     </td>
    </tr>
        <%
         } else {
        %>
       <tr>
     <td class="inputField">
      <table width="100%" border="0" cellpadding="0"  cellspacing="0">
       <tr>
           <td>
         <img src="../common/images/iconStatusAdded.gif" style="cursor: hand" onclick="javascript:findPerson(document.requestApprovalCreateForm.<%=requestApprovalStep%>)">
         <img src="../common/images/iconStatusRemoved.gif"  style="cursor: hand" onclick="javascript:removePerson(document.requestApprovalCreateForm.<%=requestApprovalStep%>)">
        </td>
        <td width="20%" class="" style="font-weight: bolder;color:#535552;" >
<!--         <emxUtil:i18n localize="i18nId">emxComponents.Common.RequestApprovalApprover</emxUtil:i18n> -->
         <%=displayRequestApprovalStep%>
        </td>
       </tr>
       <tr>
          <td colspan="2">
           <table>
            <tr>
             <td>
              <%if(requestApprovalStep.equals("Distribution")){ %>
               <select style="width: 100%; font-size: 12px" multiple size='8' name="<%=requestApprovalStep%>" id="<%=requestApprovalStep%>">
<%            if (isEngineeringChange) {
               Map<String, String> defaultDistributorsMap = (Map) JPO.invoke(context, "emxRoute", null, "getECODefaultDistributors", null, Map.class);
             for (Map.Entry<String, String> entry : defaultDistributorsMap.entrySet()) {
              String distributorOID = entry.getKey();
              String distributorContent = entry.getValue();
%>
              <option value="<%=distributorOID%>" doNotRemove="true" style='color: gray'><%=distributorContent %></option>
<%
             }
            }
%>
              
              
            </select>
              <%}else{ %>
            <select style="width: 100%; font-size: 12px" multiple size='4' name="<%=requestApprovalStep%>" id="<%=requestApprovalStep%>">
            </select>
            <%} %>
           </td>
           <td width="20">
            &nbsp;<img src="../common/images/iconSmallArrowUp.gif" style="cursor: hand" onclick="javascript:upPerson(document.requestApprovalCreateForm.<%=requestApprovalStep%>)"><br>
            &nbsp;<img src="../common/images/iconSmallArrowDown.gif"  style="cursor: hand" onclick="javascript:downPerson(document.requestApprovalCreateForm.<%=requestApprovalStep%>)">
           </td>
          </tr>
         </table>
        </td>
       </tr>
      </table>
     </td>
    </tr>
      <%
       }
        }
       }
      %>
  </table>
  <input type="hidden" name="targetObjectIds" value="">
  <input type="hidden" name="requestApprovalComment" value="">
  <input type="hidden" name="isChange" value="<%=isChange%>">
  <input type="hidden" name="mode" value="<%=mode%>">
  <input type="hidden" name="isMessRequestApproval" value="<%=isMessRequestApproval%>"/>
 </form>
 </body>
</html>
<%@include file = "../emxUICommonEndOfPageInclude.inc"%>

 

rtpemxRouteApprovalLineProcess.jsp

 

<%@page import="com.rtp.util.logger.rtpLogger"%>
<%@page import="org.apache.commons.lang3.StringUtils"%>
<%@include file = "../emxUIFramesetUtil.inc"%>
<%@include file = "emxRouteInclude.inc"%>

<script language="JavaScript" src="../emxUIPageUtility.js"></script>

<%
String objectId = (String)emxGetParameter(request,"targetObjectIds");
rtpLogger.debug("##### Request Approval Reserved start...");
String ret = MqlUtil.mqlCommand(context, "mod bus " + objectId + "  reserve");
rtpLogger.debug("##### Request Approval Reserved end...");
try {
 Enumeration requestEnum = request.getParameterNames();
 HashMap paramMap = new HashMap();
 while(requestEnum.hasMoreElements()){
  String paramName = (String)requestEnum.nextElement();
  String paramValue = emxGetParameter(request, paramName);
  paramMap.put(paramName,paramValue);
 }
 String[] args = JPO.packArgs(paramMap);
 String isChange = (String)emxGetParameter(request,"isChange");
 String mode = (String)emxGetParameter(request,"mode");
 String isMessRequestApproval = (String)emxGetParameter(request,"isMessRequestApproval");
 
 // 기 등록된 결재 상신 정보가 있는지 확인한다.
 String mql = "print bus " + objectId + " select from[Object Route|to.attribute[rtpActiveRequestApproval].value == 'Y'].to.to[Route Task]] dump";
 String result = MqlUtil.mqlCommand(context, mql);
 System.out.println(mql);
 if (StringUtils.equals("True", result)) {
%>
  <script type="text/javascript">
   alert('<emxUtil:i18nScript localize="i18nId">emxComponents.Warning.AlredyExistingRequestApproval</emxUtil:i18nScript>');
   top.close();
  </script>


<%
  return;
 } else {
  if (!"save".equals(mode) && !"edut".equals(mode)) {
   mql = "print bus " + objectId + " select from[Object Route|to.attribute[rtpActiveRequestApproval].value == 'Y'].to.id dump";
   String saveRouteId = MqlUtil.mqlCommand(context, mql);
   if (StringUtils.isNotEmpty(saveRouteId)) {
    DomainObject.newInstance(context, saveRouteId);
   }
  }
 }
 //if (true) return;
 // 기 저장 후 제출 버튼을 누를 경우
 rtpLogger.debug("mode = " + mode); 
 
 // 수정모드 일경우
 if (mode != null && mode.equals("edit")) {
  JPO.invoke(context, "emxRoute", null, "editChangeRequestApproval", args, String.class);
 } else {
  if(!isChange.equals("true")){
   JPO.invoke(context, "emxRoute", null, "createNonChangeRequestApproval", args, String.class);
  }else{
   JPO.invoke(context, "emxRoute", null, "createChangeRequestApproval", args, String.class);
  }
 }
%>
<script type="text/javascript">
 var isMessRequestApproval = "<%=isMessRequestApproval%>";
 if(isMessRequestApproval == "true"){
  top.opener.top.refreshTablePage();  
 }else{
  top.opener.top.content.location.href = '../common/emxTree.jsp?DefaultCategory=AEFLifecycle&objectId=<%=objectId%>&mode=insert'; 
 }
 
 //추가 (2012-11-29 By 이동한 GJ)
 offMaskProgress();
 
 top.window.close();
</script>

<%
} catch(Exception e) {
 String errorMessage = StringUtils.trim(e.getMessage()).replaceAll("System Error: #5000001: ", "");
 errorMessage = errorMessage.replaceAll("java.lang.Exception: ", "");
%>
 <script type="text/javascript">
  //추가 (2012-11-29 By 이동한 GJ)
  offMaskProgress();
 
  alert("<%=errorMessage%>");
  
  top.window.close();
  
 </script>
<% 
} finally {
 
 rtpLogger.debug("##### Request Approval UnReserved start...");
 MqlUtil.mqlCommand(context, "mod bus " + objectId + "  !reserve");
 rtpLogger.debug("##### Request Approval UnReserved end...");
}
%> 

 

 

 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------
eval express \" count true\" on temp query bus type name rev where attribute[]=='"  "' && relationship[]=='True';

eval expr 'count TRUE' on temp query bus type name rev where ...;

eval expr 'maximum attribute[]' on temp query bus type name rev where ...;

eval expr 'minimum attribute[]' on temp query bus type name rev where ...;

eval expr 'sum attribute[]' on expand bus objId from rel rel명 type type명 where ...;

print bus objId select evaluate[if(to[hhiPipeMBOM]==TRUE) then name else 'FALSE'] dump |;
                                boolean)true/false ? (true일경우):(false일경우)

print bus objId select from[hhiMBOM|to.attribute[]==''].to.id;
                       from[hhiMBOM|to.name~~'*comp'].to.id;
                       from[hhiMBOM|to.attribute[].value!=''].to.id;

last revision orderby -originated limit 1 where ... select id dump ;

MqlUtil.mqlcommand(context, temp query bus $1 Q2 Q3 orderby $4 limit $5 select $6 dump $7, type, name, revision, -originated, 10, evaluate[(substring13-1 name)], |);

"print bus \""+objectId+"\" select from[Subclass|to.type=='Part Family'].to.from[Classified Item|to.type=='Part'].to.id  dump |";
----------------------------------------------------------------------------------------------------------------------------------------------------------------------
1. 이클립스sync

2. Update

3. WEB-INF\classes 폴더 삭제

4. Project->clean 해서 빌드

5. Tomcat shutdown

6. C:\Workspace\belite 경로의 enovia폴더를 C:\ApacheGroup\Tomcat1\webapps 폴더로 복사

7. 바탕화면의 startup_8080 파일로 tomcat실행


########################################################################################


sqlite3 .svn/wc.db "select * from work_queue"

sqlite3 .svn/wc.db "delete from work_queue"



########################################################################################



set searchindex file C:\LFC\workspace\enovia\WebContent\config.xml;

\\btccws-demo02\LF_SHARE\LF Install\V6R2014X_SP19_20150707.DMP ������ ���� C:\app\oracle\backups ��ġ�� �����Ѵ�.

cmdâ���� ���� ��ũ��Ʈ ����

impdp system/system@orcl remap_schema=V6R2014X:V6R2014X remap_tablespace=V6R2014X_DATA:V6R2014X_DATA TRANSFORM=SEGMENT_ATTRIBUTES:N:INDEX TRANSFORM=SEGMENT_ATTRIBUTES:N:CONSTRAINT dumpfile=backups:V6R2014X_SP19_20150707.DMP logfile=backups:V6R2014X_SP19_20150707.out



#########################################################################################################################



C:\app\oracle\product\11.2.0\dbhome_1\BIN\sqlplus.exe

sqlplus conn as sysdba


C:\app\oracle\product\11.2.0\dbhome_1\BIN>sqlplus SAPSR3DB/welcome1@10.49.8.96:1521/LQ2


impdp system/system@orcl remap_schema=V6R2014X:V6R2014X remap_tablespace=V6R2014X_DATA:V6R2014X_DATA TRANSFORM=SEGMENT_ATTRIBUTES:N:INDEX TRANSFORM=SEGMENT_ATTRIBUTES:N:CONSTRAINT dumpfile=backups:V6R2014XDEV_20150915.DMP logfile=backups:V6R2014XDEV_20150915.out



C:\app\oracle\product\11.2.0\dbhome_1\NETWORK\ADMIN 


C:\ProgramData\DassaultSystemes\Licenses


################################################################################################################


C:\enoviaV6R2014x\studio\win_b64\code\bin\matrix.exe -bootfile MATRIX-R_DEV

C:\enoviaV6R2014x\studio\win_b64\code\bin\mql.exe -bootfile MATRIX-R_DEV

C:\enoviaV6R2014x\studio\win_b64\code\bin\business.exe -bootfile MATRIX-R_DEV

##############################################################################################################

DROP TABLESPACE "V6R2014X_DATA" INCLUDING CONTENTS AND DATAFILES;

DROP TABLESPACE "V6R2014X_INDEX" INCLUDING CONTENTS AND DATAFILES;

DROP TABLESPACE "V6R2014X_ADMIN_DATA" INCLUDING CONTENTS AND DATAFILES;

DROP USER V6R2014X CASCADE;


C:\app\oracle\oradata\ORCL �����ȿ� �ִ� V6R2014X_DATA, V6R2014X_INDEX, V6R2014X_ADMIN_DATA ����


CREATE TABLESPACE "V6R2014X_ADMIN_DATA" DATAFILE 'C:\app\oracle\oradata\ORCL\V6R2014X_ADMIN_DATA.dbf' SIZE 100M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED DEFAULT STORAGE (INITIAL 50K NEXT 1M MINEXTENTS 1 MAXEXTENTS 100 PCTINCREASE 0 );

CREATE USER V6R2014X IDENTIFIED BY V6R2014X DEFAULT TABLESPACE "V6R2014X_ADMIN_DATA" TEMPORARY TABLESPACE "TEMP" PROFILE DEFAULT;

GRANT "CONNECT" TO V6R2014X;

GRANT "RESOURCE" TO V6R2014X;

GRANT CREATE VIEW TO V6R2014X;

GRANT UNLIMITED TABLESPACE TO V6R2014X;

COMMIT;

ALTER USER V6R2014X DEFAULT ROLE ALL;

CREATE TABLESPACE "V6R2014X_DATA" DATAFILE 'C:\app\oracle\oradata\ORCL\V6R2014X_DATA.dbf' SIZE 5M AUTOEXTEND ON NEXT 5M MAXSIZE UNLIMITED DEFAULT STORAGE ( INITIAL 100K NEXT 200K MINEXTENTS 1 MAXEXTENTS 100 PCTINCREASE 0 );

CREATE TABLESPACE "V6R2014X_INDEX" DATAFILE 'C:\app\oracle\oradata\ORCL\V6R2014X_INDEX.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED DEFAULT STORAGE ( INITIAL 100K NEXT 200K MINEXTENTS 1 MAXEXTENTS 100 PCTINCREASE 0 );



CREATE OR REPLACE DIRECTORY backups AS 'C:\app\oracle\backups';

grant read, write on directory backups to V6R2014X;




#############################################################################################################################################################################

C:\app\oracle\product\11.2.0\dbhome_1\BIN ��ġ���� ����

impdp system/system@ORCL remap_schema=V6R2014XDEV:V6R2014X remap_tablespace=V6R2014XDEV_DATA:V6R2014X_DATA TRANSFORM=SEGMENT_ATTRIBUTES:N:INDEX TRANSFORM=SEGMENT_ATTRIBUTES:N:CONSTRAINT dumpfile=backups:V6R2014XDEV_FP1531_20150731.DMP logfile=backups:V6R2014XDEV_FP1531_20150731.out

#impdp system/system@enovia remap_schema=V6R2014XDEV:V6R2014XDEV remap_tablespace=V6R2014XDEV_DATA:V6R2014XDEV_DATA TRANSFORM=SEGMENT_ATTRIBUTES:N:INDEX TRANSFORM=SEGMENT_ATTRIBUTES:N:CONSTRAINT dumpfile=backups:V6R2014XDEV_FP1531_20150731.DMP logfile=backups:V6R2014XDEV_FP1531_20150731.out

impdp system/system@orcl remap_schema=V6R2014XDEV:V6R2014X remap_tablespace=V6R2014XDEV_DATA:V6R2014X_DATA TRANSFORM=SEGMENT_ATTRIBUTES:N:INDEX TRANSFORM=SEGMENT_ATTRIBUTES:N:CONSTRAINT dumpfile=backups:V6R2014XDEV_20150915.DMP logfile=backups:V6R2014XDEV_20150915.out

impdp system/system@orcl remap_schema=V6R2014XDEV:V6R2014X remap_tablespace=V6R2014XDEV_DATA:V6R2014X_DATA TRANSFORM=SEGMENT_ATTRIBUTES:N:INDEX TRANSFORM=SEGMENT_ATTRIBUTES:N:CONSTRAINT dumpfile=backups:V6R2014XDEV_20150918.DMP logfile=backups:V6R2014XDEV_20150918.out

impdp system/system@orcl remap_schema=V6R2014XDEV:V6R2014X remap_tablespace=V6R2014XDEV_DATA:V6R2014X_DATA TRANSFORM=SEGMENT_ATTRIBUTES:N:INDEX TRANSFORM=SEGMENT_ATTRIBUTES:N:CONSTRAINT dumpfile=backups:V6R2014XDEV_20151005.DMP logfile=backups:V6R2014XDEV_20151005.out

impdp system/system@orcl remap_schema=V6R2014XDEV:V6R2014X remap_tablespace=V6R2014XDEV_DATA:V6R2014X_DATA TRANSFORM=SEGMENT_ATTRIBUTES:N:INDEX TRANSFORM=SEGMENT_ATTRIBUTES:N:CONSTRAINT dumpfile=backups:V6R2014XDEV_20151029.DMP logfile=backups:V6R2014XDEV_20151029.out

impdp system/system@orcl remap_schema=V6R2014XDEV:V6R2014X remap_tablespace=V6R2014XDEV_DATA:V6R2014X_DATA TRANSFORM=SEGMENT_ATTRIBUTES:N:INDEX TRANSFORM=SEGMENT_ATTRIBUTES:N:CONSTRAINT dumpfile=backups:V6R2014XDEV_20151109_.DMP logfile=backups:V6R2014XDEV_20151109_.out



Shutdown

Startup mount

alter database datafile '' offline drop;

alter database open;

#####################################################################################################################

print bus 46976.24150.55829.1047 select from[Object Route].attribute[Route Base State].value;

print bus 46976.24150.55829.1047 select from[from[Object Route].attribute[Route Base State]=='state_Approved'\Object Route].attribute[Route Base State].value;


StringList selObjectList = new StringList();

      selObjectList.add("id");

      selObjectList.add("from[Object Route].attribute[Route Base State].value");

      allList = parObject.getRelatedObjects(

        context, // context.

        "Object Route", // relationship pattern.

        "Route", // type pattern.

        selObjectList, // business object selectables.

        null, // relationship selectables.

        false, // expand direction.

        true, // expand from direction.

        (short) 1, // level

        "",

        null, 0, null, null, null);

state = Create
state = Approved
state = Executives
state = AgreeApproved
state = Distribution

state = Create
state = Approved
state = Distribution

blpCreateRouteRightDialog.jsp
blpCreateRouteDialogNewProcess.jsp

//Library기존 추가
LBCMyDesk->LBCLibrariesMyDesk
mod menu LCClassActionsToolbar add command LBCGeneralLibraryContentAddExisting;


//일반문서
blpDocumentListActions

//Tree Content
blpSpecChooser.jsp
dwpCustomChooser.jsp


blpClassificationProductModelProcess.jsp
blpCreateSpecDialog.jsp
blpCreateSpecDialogFS.jsp
blpCreateSpecDialogProcess.jsp
blpDocumentListRightDialog.jsp
blpDocumentSpecFilterPage.jsp
blpSpecChooser.jsp
blpSpecClassificationProcess.jsp
blpSpecContentProcess.jsp
dwpClassificationVehicleProcess.jsp
blpSpecClassificationProcess.jsp
blpDocumentListActions(일반문서)
blpDocumentListRightDialog.jsp(문서 프레임 오른쪽)
blpGNVPageHeader.jsp(헤더 속성 값)


APPDocumentRevisions(command)
APPDocumentRevisionsRevise (개정)
APPDocumentRevisionsReviseWithFiles (파일과 함께 개정)


blpDocumentObjectPortal(spec)
blpDocumentSpecContentCommand


dwpPartActions (파트)PartList Command 

APPDocumentFiles

APPFileSummaryToolBar

APPFileSummaryActionsToolBar

APPFileDelete(모든버전 파일삭제)

//헤더 히든
parent.parent.document.getElementById("divToolbarContainer").style.display = "none";

엑셀 조건
=IF(D1="Complete", "blpTaskYN Y ", "")

//일반문서 생성
menu ENCReferenceDocumentsActionsToolbar
command blpENCCreateNewReferenceDocument

(문서 등록)
emxCommonDocumentPreCheckin.jsp -> emxCommonDocumentCreateDialogFS.jsp ->emxCommonDocumentCreateDialog.jsp

blpOpenIssueEditAction(Edit Command)

결재승인시 JPO  dwpRouteDeploy -> dwpApproveRejectStateComment

//결재요청 화면
blpCreateRouteNewDialogFS.jsp
dskGeneralApprovalOrgSelectDialog.jsp
dskGeneralApprovalOrgUsers.jsp
blpCreateRouteRightDialog.jsp

blpCreateRouteNewDialogFS.jsp - > blpCreateRouteNewDialog.jsp - > blpCreateRouteLeftDialog.jsp,blpCreateRouteRightDialog.jsp -> blpCreateRouteDialogNewProcess.jsp    "dwpRouteCreateProject"  "dwpClassification"
dwpMyTaskApproveRejectDialogFS.jsp ->   dwpMyTaskApproveRejectDialog.jsp  ->  dwpMyTaskApproveRejectProcess.jsp   "dwpRouteDeploy" "dwpApproveRejectStateComment"


//테이블 파라메터 정렬
&sortColumnName=Originated&sortDirection=descending


dwpENCReferenceDocuments(관련문서 등록 커맨드)
blpemxCommonDocumentCheckinProcess.jsp(관련문서등록 프로세스 페이지)


//프로젝트 타스크(Project Task)
GNVDashboardUser(emxGNV.String.MyDashboard : My Dashboard)  ->  GNVDashboardUser.jsp
GNVDashboardUserPortal -> GNVDashboardUserChannel -> 
GNVDashboardUserPendingTasks(테스크) 
GNVDashboardUserRecentDocs(최근문서) 
GNVDashboardUserProjects



dwpAPPMyTask(결재함)
portal=dwpMyTaskPortal
dwpMyTaskChannel

결재처리함(dwpMyTaskApproveBox)       -> dwpMyTaskApproveDialog.jsp

기안함(dwpMyTaskDraftBox)             -> dwpMyTaskDraftDialog.jsp

#결재완료함(dwpMyTaskApproveComplete) -> dwpMyTaskApproveCompleteDialog.jsp

#참조함(dwpMyTaskReferenceBox)        -> dwpMyTaskReferenceDialog.jsp

기결함(blpMyOutTray)                  -> blpMyOutTrayDialog.jsp

반려함(blpMyTaskRejectBox)            -> blpMyTaskRejectDialog.jsp




파트(dwpPartActions)

command = dwpPartCreateAction(생성)
command = dwpPartDelete(삭제)
command = blpPartKindCarModel(검색)
emxForm.jsp?form=type_dwpPart&toolbar=dwpENCpartPartDetailsToolBar(dwpDDSDataInterface)->dwpENCpartPartDetailsActionsToolBar(dwpENCpartPartDetails_Headerlink_0, dwpPartApproval)




ECO(dwpECOMyDesk)

dwpECO:getECOimageFileHTMLOutput(Form에서 파일 이미지 첨부)




ECR(dwpECRMyDesk)

blpOpenIssueDashboard(openIssue) -> blpOpenIssueDashboard.jsp



blpDocumentSpecContentCommand(SPEC) -> 

href = ${COMMON_DIR}/blpSpecChooser.jsp?callbackFunction=showVehicleFocus&header=emxFramework.Label.CreateSpecClassificationSelect
&multiSelect=false&ShowIcons=true&searchMode=blpDocument&program=dwpMasterMgt:getSpecLibraryFirstNode&expandProgram=dwpMasterMgt:expandSpecLibraryNode
&isFromSearch=false&isNeededOId=false&displayKey=name&rootNode=blpDocument&fieldNameActual=blpDocument&fieldNameDisplay=blpDocumentDisplay&fromPage=partForm&firstLevelSelect=false
&secondLevel=true&processURL=../documentcentral/blpSpecContentProcess.jsp



blpWorkManualContentCommand(업무 매뉴얼) ->

href = ${COMMON_DIR}/blpWorkManualChooser.jsp?callbackFunction=showVehicleFocus&header=emxFramework.Label.WorkManualSelect&multiSelect=false&ShowIcons=true
&searchMode=blpDocument&program=dwpMasterMgt:getWorkManualFirstNode&expandProgram=dwpMasterMgt:expandWorkManualNode&isFromSearch=false&isNeededOId=false
&displayKey=name&rootNode=blpDocument&fieldNameActual=blpDocument&fieldNameDisplay=blpDocumentDisplay&fromPage=partForm&firstLevelSelect=false
&secondLevel=true&processURL=../documentcentral/blpWorkManualProcess.jsp


blpCreateSpecActions(SPEC 등록) -> blpCreateSpecDialogFS.jsp



LBCLibrariesMyDesk(Library) -> 
href = ${COMMON_DIR}/emxIndentedTable.jsp?freezePane=Name&program=emxLibraryCentralUtil:getAllLibraries,emxLibraryCentralUtil:getAllDocumentLibraries,
emxLibraryCentralUtil:getAllGeneralLibraries,emxLibraryCentralUtil:getAllPartLibraries
&programLabel=emxDocumentCentral.Common.All,emxLibraryCentral.Common.DocumentLibrary,emxLibraryCentral.Common.GeneralLibrary,emxLibraryCentral.Common.PartLibrary
&table=LCLibraryList&selection=multiple&sortColumnName=Name&sortDirection=ascending&toolbar=LCLibrariesToolBar
&header=emxDocumentCentral.Common.Libraries&HelpMarker=emxhelplibrarylist&path=Library



href "${COMMON_DIR}/emxTree.jsp?appendParameters=true"(type_GeneralLibrary)

type_GeneralLibrary 관련 커맨드

command = APPLibClassObjectAccess

command = LCGeneralLibraryClasses

command = LCDiscussionCommand

command = AEFHistory

command = AEFLifecycle

command = APPRoutes

command = DCWhereUsedTreeCategory

command = IssueRollupListPage

command = LBCReferenceDocumentsTreeCategory

command = LBCBackgroundJobs




General Library 하위클래스의 툴바

LCClassActionsToolBar(Menu)

command = LBCCreateNewClass                    (href = ${SUITE_DIR}/emxLibraryCentralIntermediateForm.jsp?form=type_CreateClass&mode=create)

command = LBCClassMove                         (href = ${SUITE_DIR}/emxLibraryCentralSearchIntermediate.jsp?useMode=moveClass)

command = MCMClassRemove                       (href = ${SUITE_DIR}/emxMultipleClassificationRemoveClassPreProcess.jsp?Mode=Remove)

command = LCClassDelete                        (href = ${SUITE_DIR}/emxLibraryCentralObjectsDeleteProcess.jsp)

command = LBCGeneralLibraryContentAddExisting  (href = ${SUITE_DIR}/emxLibraryCentralSearchIntermediate.jsp?useMode=addClass)




WorkSpace

TMCWorkspacesMyDesk(command) -> 

href = ${COMMON_DIR}/emxTable.jsp?program=emxWorkspace:getAllMyDeskWorkspace,emxWorkspace:getActiveMyDeskWorkspace&table=TMCMyDeskWorkspaceSummary

&header=emxTeamCentral.Common.Workspace&toolbar=TMCWorkspaceSummaryToolBar&programLabel=emxTeamCentral.Filter.All,emxTeamCentral.Filter.Active&sortColumnName=Name

&sortDirection=ascending&selection=multiple&HelpMarker=emxhelpworkspaces




TMCWorkspaceTemplatesMyDesk9command) ->

href = ${COMMON_DIR}/emxTable.jsp?program=emxWorkspaceTemplate:getMyWorkspaceTemplates&table=TMCMyDeskWorkspaceTemplateSummary

&header=emxTeamCentral.WorkspaceTemplate.WorkspaceTemplates&topActionbar=TMCWorkspaceTemplateSummaryTopActionBar

&bottomActionbar=TMCWorkspaceTemplateSummaryBottomActionBar&sortColumnName=Name&sortDirection=ascending&selection=multiple&HelpMarker=emxhelpworkspacetemplate




type_TaskManagement -> PMCDeliverableCommandPowerView(산출물 커맨드) -> PMCContentSummaryToolBar(산출물 툴바)



PMCProjectSpaceMyDesk(프로젝트 전체)

href = ${COMMON_DIR}/emxIndentedTable.jsp?program=emxProjectSpace:getActiveProjects,emxProjectSpace:getCompletedProjects,emxProjectSpace:getCancelProjects,emxProjectSpace:getAllProjects

&programLabel=emxProgramCentral.Common.ActiveProjects,emxProgramCentral.Common.CompletedProjects,emxProgramCentral.Common.CancelProjects,emxProgramCentral.Common.All

&table=PMCProjectSpaceMyDesk&selection=multiple&header=emxProgramCentral.ProgramTop.Projects&sortColumnName=Type&sortDirection=ascending&Export=false&toolbar=PMCProjectSummaryToolBar

&HelpMarker=emxhelpprojectsummary&freezePane=blpProjectCarModel,blpProjectProduct,ProjectStatus,ProjectStatusDashboard,NewWindow&StringResourceFileId=emxProgramCentralStringResource




dwpDocumentSearchActions(문서검색)


blpGNVPastProblemDashboardPanel.jsp


//사용자 롤 
String assignments = MqlUtil.mqlCommand(context, "list person '"+context.getUser()+"' select Assignment dump |;" );

        StringList assign =  FrameworkUtil.split(assignments, "|");

        boolean buttonYn = false;

        for(int b=0;assign.size()>b;b++) {

            if(((String)assign.get(b)).equalsIgnoreCase("blpAprrovalRole")) {

                buttonYn = true;

            }

        }



=IF(D1="Complete", "blpTaskYN Y ", "")


(문서 등록)

emxCommonDocumentPreCheckin.jsp -> emxCommonDocumentCreateDialogFS.jsp ->emxCommonDocumentCreateDialog.jsp


blpOpenIssueEditAction(Edit Command)


결재승인시 JPO  dwpRouteDeploy -> dwpApproveRejectStateComment


blpCreateRouteNewDialogFS.jsp

dskGeneralApprovalOrgSelectDialog.jsp

dskGeneralApprovalOrgUsers.jsp

blpCreateRouteRightDialog.jsp




&sortColumnName=Originated&sortDirection=descending




blpCreateRouteNewDialogFS.jsp - > blpCreateRouteNewDialog.jsp - > blpCreateRouteLeftDialog.jsp,blpCreateRouteRightDialog.jsp -> blpCreateRouteDialogNewProcess.jsp    "dwpRouteCreateProject"  "dwpClassification"




dwpMyTaskApproveRejectDialogFS.jsp ->   dwpMyTaskApproveRejectDialog.jsp  ->  dwpMyTaskApproveRejectProcess.jsp   "dwpRouteDeploy" "dwpApproveRejectStateComment"




dwpENCReferenceDocuments(관련문서 등록 커맨드)

blpemxCommonDocumentCheckinProcess.jsp(관련문서등록 프로세스 페이지)




GNVDashboardUser(emxGNV.String.MyDashboard : My Dashboard)  ->  GNVDashboardUser.jsp

GNVDashboardUserPortal -> GNVDashboardUserChannel -> 

GNVDashboardUserPendingTasks(테스크) 

GNVDashboardUserRecentDocs(최근문서) 

GNVDashboardUserProjects




dwpAPPMyTask(결재함)

portal=dwpMyTaskPortal

dwpMyTaskChannel

결재처리함(dwpMyTaskApproveBox)       -> dwpMyTaskApproveDialog.jsp

기안함(dwpMyTaskDraftBox)             -> dwpMyTaskDraftDialog.jsp

#결재완료함(dwpMyTaskApproveComplete) -> dwpMyTaskApproveCompleteDialog.jsp

#참조함(dwpMyTaskReferenceBox)        -> dwpMyTaskReferenceDialog.jsp

기결함(blpMyOutTray)                  -> blpMyOutTrayDialog.jsp

반려함(blpMyTaskRejectBox)            -> blpMyTaskRejectDialog.jsp




파트(dwpPartActions)

command = dwpPartCreateAction(생성)

command = dwpPartDelete(삭제)

command = blpPartKindCarModel(검색)

emxForm.jsp?form=type_dwpPart&toolbar=dwpENCpartPartDetailsToolBar(dwpDDSDataInterface)->dwpENCpartPartDetailsActionsToolBar(dwpENCpartPartDetails_Headerlink_0, dwpPartApproval)




ECO(dwpECOMyDesk)

dwpECO:getECOimageFileHTMLOutput(Form에서 파일 이미지 첨부)




ECR(dwpECRMyDesk)




blpOpenIssueDashboard(openIssue) -> blpOpenIssueDashboard.jsp




blpDocumentSpecContentCommand(SPEC) -> 

href = ${COMMON_DIR}/blpSpecChooser.jsp?callbackFunction=showVehicleFocus&header=emxFramework.Label.CreateSpecClassificationSelect

&multiSelect=false&ShowIcons=true&searchMode=blpDocument&program=dwpMasterMgt:getSpecLibraryFirstNode&expandProgram=dwpMasterMgt:expandSpecLibraryNode

&isFromSearch=false&isNeededOId=false&displayKey=name&rootNode=blpDocument&fieldNameActual=blpDocument&fieldNameDisplay=blpDocumentDisplay&fromPage=partForm&firstLevelSelect=false

&secondLevel=true&processURL=../documentcentral/blpSpecContentProcess.jsp







blpWorkManualContentCommand(업무 매뉴얼) ->

href = ${COMMON_DIR}/blpWorkManualChooser.jsp?callbackFunction=showVehicleFocus&header=emxFramework.Label.WorkManualSelect&multiSelect=false&ShowIcons=true

&searchMode=blpDocument&program=dwpMasterMgt:getWorkManualFirstNode&expandProgram=dwpMasterMgt:expandWorkManualNode&isFromSearch=false&isNeededOId=false

&displayKey=name&rootNode=blpDocument&fieldNameActual=blpDocument&fieldNameDisplay=blpDocumentDisplay&fromPage=partForm&firstLevelSelect=false

&secondLevel=true&processURL=../documentcentral/blpWorkManualProcess.jsp




blpCreateSpecActions(SPEC 등록) -> blpCreateSpecDialogFS.jsp




LBCLibrariesMyDesk(Library) -> 

href = ${COMMON_DIR}/emxIndentedTable.jsp?freezePane=Name&program=emxLibraryCentralUtil:getAllLibraries,emxLibraryCentralUtil:getAllDocumentLibraries,

emxLibraryCentralUtil:getAllGeneralLibraries,emxLibraryCentralUtil:getAllPartLibraries

&programLabel=emxDocumentCentral.Common.All,emxLibraryCentral.Common.DocumentLibrary,emxLibraryCentral.Common.GeneralLibrary,emxLibraryCentral.Common.PartLibrary

&table=LCLibraryList&selection=multiple&sortColumnName=Name&sortDirection=ascending&toolbar=LCLibrariesToolBar

&header=emxDocumentCentral.Common.Libraries&HelpMarker=emxhelplibrarylist&path=Library




href "${COMMON_DIR}/emxTree.jsp?appendParameters=true"(type_GeneralLibrary)

type_GeneralLibrary 관련 커맨드

command = APPLibClassObjectAccess

command = LCGeneralLibraryClasses

command = LCDiscussionCommand

command = AEFHistory

command = AEFLifecycle

command = APPRoutes

command = DCWhereUsedTreeCategory

command = IssueRollupListPage

command = LBCReferenceDocumentsTreeCategory

command = LBCBackgroundJobs




General Library 하위클래스의 툴바

LCClassActionsToolBar(Menu)

command = LBCCreateNewClass                    (href = ${SUITE_DIR}/emxLibraryCentralIntermediateForm.jsp?form=type_CreateClass&mode=create)

command = LBCClassMove                         (href = ${SUITE_DIR}/emxLibraryCentralSearchIntermediate.jsp?useMode=moveClass)

command = MCMClassRemove                       (href = ${SUITE_DIR}/emxMultipleClassificationRemoveClassPreProcess.jsp?Mode=Remove)

command = LCClassDelete                        (href = ${SUITE_DIR}/emxLibraryCentralObjectsDeleteProcess.jsp)

command = LBCGeneralLibraryContentAddExisting  (href = ${SUITE_DIR}/emxLibraryCentralSearchIntermediate.jsp?useMode=addClass)




WorkSpace

TMCWorkspacesMyDesk(command) -> 

href = ${COMMON_DIR}/emxTable.jsp?program=emxWorkspace:getAllMyDeskWorkspace,emxWorkspace:getActiveMyDeskWorkspace&table=TMCMyDeskWorkspaceSummary

&header=emxTeamCentral.Common.Workspace&toolbar=TMCWorkspaceSummaryToolBar&programLabel=emxTeamCentral.Filter.All,emxTeamCentral.Filter.Active&sortColumnName=Name

&sortDirection=ascending&selection=multiple&HelpMarker=emxhelpworkspaces




TMCWorkspaceTemplatesMyDesk9command) ->

href = ${COMMON_DIR}/emxTable.jsp?program=emxWorkspaceTemplate:getMyWorkspaceTemplates&table=TMCMyDeskWorkspaceTemplateSummary

&header=emxTeamCentral.WorkspaceTemplate.WorkspaceTemplates&topActionbar=TMCWorkspaceTemplateSummaryTopActionBar

&bottomActionbar=TMCWorkspaceTemplateSummaryBottomActionBar&sortColumnName=Name&sortDirection=ascending&selection=multiple&HelpMarker=emxhelpworkspacetemplate




type_TaskManagement -> PMCDeliverableCommandPowerView(산출물 커맨드) -> PMCContentSummaryToolBar(산출물 툴바)




PMCProjectSpaceMyDesk(프로젝트 전체)

href = ${COMMON_DIR}/emxIndentedTable.jsp?program=emxProjectSpace:getActiveProjects,emxProjectSpace:getCompletedProjects,emxProjectSpace:getCancelProjects,emxProjectSpace:getAllProjects

&programLabel=emxProgramCentral.Common.ActiveProjects,emxProgramCentral.Common.CompletedProjects,emxProgramCentral.Common.CancelProjects,emxProgramCentral.Common.All

&table=PMCProjectSpaceMyDesk&selection=multiple&header=emxProgramCentral.ProgramTop.Projects&sortColumnName=Type&sortDirection=ascending&Export=false&toolbar=PMCProjectSummaryToolBar

&HelpMarker=emxhelpprojectsummary&freezePane=blpProjectCarModel,blpProjectProduct,ProjectStatus,ProjectStatusDashboard,NewWindow&StringResourceFileId=emxProgramCentralStringResource




dwpDocumentSearchActions(문서검색)

mod command dwpDocumentSearchActions

    href '${COMMON_DIR}/emxFullSearch.jsp?selection=multiple&suiteKey=Components&submitURL=&itemTemp=&table=dwpDocumentResultSummary&form=dwpDocumentSearchForm&search=&freezePane=Name&toolbar=dwpClassificationSearchActionToolBar&showInitialResults=false&objectId=&field=TYPES=type_Document:POLICY=policy_blpProjectTaskDocumentPolicy,policy_Document,policy_blpTeamApprovedDoc,policy_blpDefaultDoc,policy_blpAgreeApprovedDoc,policy_ProjectTask&dwpTitle=dwpDocument&genericDelete=true&sortColumnNam=Name&sortDirection=ascending'

;




blpGNVPastProblemDashboardPanel.jsp




//사용자 권한

String assignments = MqlUtil.mqlCommand(context, "list person '"+context.getUser()+"' select Assignment dump |;" );

        StringList assign =  FrameworkUtil.split(assignments, "|");

        boolean buttonYn = false;

        for(int b=0;assign.size()>b;b++) {

            if(((String)assign.get(b)).equalsIgnoreCase("blpAprrovalRole")) {

                buttonYn = true;

            }

        }

 

 *command = AEFLogoutToolbar

setting[Image].value = ${COMMON_DIR}/images/iconMedLogout.png

setting[Registered Suite].value = Framework

setting[Target Location].value = hiddenFrame

href = ${ROOT_DIR}/emxLogout.jsp 

 

 *command = AEFWelcomeToolbar

setting[Alignment].value = right

setting[Dynamic Label Function].value = getWelcomeMessage

setting[Dynamic Label Program].value = emxAEFUtil

setting[Registered Suite].value = Framework 







 *command = AEFHomeToolbar

href = emxNavigatorContentLoad.jsp 

setting[Alignment].value = right

setting[Image].value = ${COMMON_DIR}/images/iconMedHome.png

setting[Registered Suite].value = Framework

setting[Target Location].value = content 

 *command = AEFSeparator

 

 *command = AEFGlobalFullTextSearch 

setting[Alignment].value = right

setting[Default].value = *

setting[Input Type].value = textbox

setting[Registered Suite].value = Framework

setting[Width].value = 150

setting[format].value = fullsearch

href = javascript:void()




code = {

    main:function() {

           var queryType = emxUIConstants.STR_QUERY_TYPE;

       var value1= document.getElementById("AEFGlobalFullTextSearch").value;

       var focus = false;

       if(value1 != null && value1 != "" ) {




                if(validateBarChar(value1)) {

                                var jsonvalue = value1.replace(/'/g,"\\\\\'");

                                value1 = encodeURIComponent(value1);

                                if(queryType == "Indexed") {

                                        showWindowShadeDialog("../common/emxFull

Search.jsp?table=AEFGeneralSearchResults&showInitialResults=true&genericDelete=t

rue&selection=multiple&txtTextSearch="+value1+"&filters={'txtTextSearch':['Equal

s|"+jsonvalue+"']}",true,false);

                                }

                                else {

                                        showWindowShadeDialog("../common/emxFull

Search.jsp?table=AEFGeneralSearchResults&showInitialResults=true&genericDelete=t

rue&selection=multiple&default=NAME="+value1,true, false);

                                }

                } else {

                        alert(BADCHAR_ENTERED+BAD_CHAR);

                        focus = true;

                }




       } else {

           alert(FULL_SEARCH_ERROR);

           focus = true;

       }

       if(focus){

           var objTextBox = document.getElementById("AEFGlobalFullTextSearch");

           objTextBox.focus();

       }

    }

}




mod bus  46976.24150.33789.2265   blpDocumentSpecDecideDate '6/13/2016 12:00:00 AM';



//MS-SQL
@echo on

set TNS_ADMIN=C:\enoviaV6R2013x

set bootfile=MATRIX-R

set nls_lang=KOREAN_KOREA.KO16KSC5601

set path=C:\enoviaV6R2013x\studio\win_b64\code\bin;%path%;

start "C:\" "C:\enoviaV6R2013x\studio\win_b64\code\bin\mql.exe"

//Oracle
set NLS_LANG=KOREAN_KOREA.KO16MSWIN949
mql.exe


treedisplay

//blpemxTreeFrame.jsp
../common/emxIndentedTable.jsp?freezePane=Name&program=emxLibraryCentralUtilBase%3AgetSubclasses&table=LCClassificationList&selection=multiple&editLink=true&sortColumnName=Name&sortDirection=ascending&toolbar=LCClassToolBar&header=emxLibraryCentral.Common.Classifications&HelpMarker=emxhelpclasses&objectId=46976.24150.9104.58579&suiteKey=LibraryCentral&StringResourceFileId=emxLibraryCentralStringResource&SuiteDirectory=documentcentral&emxSuiteDirectory=&categoryTreeName=type_GeneralLibrary&isStructure=true&otherTollbarParams=isStructure

emxTreeInnerFrame.jsp?mode=null&treemode=structure&appendParameters=true&emxSuiteDirectory=documentcentral&relId=&parentOID=&suiteKey=LibraryCentral&objectId=46976.24150.9104.58579&jsTreeID=&structureTreeName=

../common/emxIndentedTable.jsp?freezePane=Name&program=emxLibraryCentralUtilBase%3AgetSubclasses&table=LCClassificationList&selection=multiple&editLink=true&sortColumnName=Name&sortDirection=ascending&toolbar=LCClassToolBar&header=emxLibraryCentral.Common.Classifications&HelpMarker=emxhelpclasses&objectId=46976.24150.9104.58579&suiteKey=LibraryCentral&StringResourceFileId=emxLibraryCentralStringResource&SuiteDirectory=documentcentral&emxSuiteDirectory=&categoryTreeName=type_GeneralLibrary&isStructure=true&otherTollbarParams=isStructure

emxTreeInnerFrame.jsp?mode=null&treemode=structure&appendParameters=true&emxSuiteDirectory=documentcentral&relId=&parentOID=&suiteKey=LibraryCentral&objectId=46976.24150.9104.58579&jsTreeID=&structureTreeName=LCLibraryStructure

../common/blpSpecChooser.jsp?callbackFunction=showVehicleFocus&&header=emxFramework.Label.CreateSpecClassificationSelect&multiSelect=false&ShowIcons=true&searchMode=blpDocument&program=dwpMasterMgt:getSpecLibraryFirstNode&expandProgram=dwpMasterMgt:expandSpecLibraryNode&isFromSearch=false&isNeededOId=false&displayKey=name&rootNode=blpDocument&fieldNameActual=blpDocument&fieldNameDisplay=blpDocumentDisplay&fromPage=partForm&firstLevelSelect=false&secondLevel=true&processURL=../documentcentral/blpSpecClassificationProcess.jsp



"expand bus"+" "+workspaceId+" "+"from rel 'Project Members' select bus id dump | where 'relationship[Project Members].to.relationship[Project Membership].from.name=="+"\""+ contextuser+"\" '";

String strProcessingPartQty = MqlUtil.mqlCommand(context, "eval expr 'sum attribute[hhiSMBQty]' on expand bus "+objectId+" from rel hhiCPProcessingPart type hhiSMBProcessingPart select bus where '(current==\"Released\")'");

code 'expand bus ${ID} from relationship ${RELATIONSHIP_HHICPANDPROCESSINGRAWPART},${RELATIONSHIP_HHICPINPUTREMNANT} select bus id attribute[hhiSMBNCNo] where "from[hhiRelatedProcessingPart] == True && (current!=Released && current!=Holding)" dump |'

code 'expand bus ${ID} from relationship "${RELATIONSHIP_HHICPANDPROCESSINGRAWPART},${RELATIONSHIP_HHICPINPUTREMNANT}" select bus id where "from[hhiRelatedProcessingPart] == True" dump |'

code 'expand bus ${ID} from relationship ${RELATIONSHIP_HHIWORKORDERITEM} from type ${TYPE_HHISMBWORKORDER} select bus id where "revision==last.revision" select rel id dump |'

"expand bus \"" + t1 + "\" \"" + n1 + "\" \"" + r1 + "\" " + direction + " rel \"" + relationshipname + "\" select bus where 'type == \"" + t2 + "\" && name == \"" + n2 + "\" && revision == \"" + r2 + "\"' select rel id dump \"" + separateur + "\"";

"expand bus \"" + t1 + "\" \"" + n1 + "\" \"" + r1 + "\" " + direction + " rel \"" + relationshipname + "\" select bus where 'type == \"" + t2 + "\" && name == \"" + n2 + "\" && revision == \"" + r2 + "\"' dump";

"expand bus " + busID + " terse select rel id where '((name == const\"CAD SubComponent\") && (from.id == " + busID + "))' dump |";

"expand bus " + majorID + " terse select rel id where '((name == const\"CAD SubComponent\") && (to.id == " + childObjectId + "))' dump |";

"expand bus \""+strParentFeatureId+"\" from relationship \""+ConfigurationConstants.RELATIONSHIP_MANDATORY_CONFIGURATION_FEATURES+"\" preventduplicates select rel id where \"to.id =='"+strChildFeatureId +"'\" dump | " ;



compile prog convert.* force

compile prog convert.* force update;

eval express \" count true\" on temp query bus type name rev where attribute[]=='"  "' && relationship[]=='True';

eval expr 'count TRUE' on temp query bus type name rev where ...;

eval expr 'maximum attribute[]' on temp query bus type name rev where ...;

eval expr 'minimum attribute[]' on temp query bus type name rev where ...;

eval expr 'sum attribute[]' on expand bus objId from rel rel�� type type�� where ...;

print bus objId select evaluate[if(to[hhiPipeMBOM]==TRUE) then name else 'FALSE'] dump |;
                               (boolean)true/false ? (true�ϰ���):(false�ϰ���)

print bus objId select from[hhiMBOM|to.attribute[]==].to.id;
                       from[hhiMBOM|to.name~~'*comp'].to.id;
                       from[hhiMBOM|to.attribute[].value!=''].to.id;

last revision orderby -originated limit 1 where ... select id dump ;

MqlUtil.mqlcommand(context, temp query bus $1 Q2 Q3 orderby $4 limit $5 select $6 dump $7, type, name, revision, -originated, 10, evaluate[(substring13-1 name)], |);

for(int i=0; i<mapListSize; i++){

    Map oneMap = (Map)mapList.get(i);

    Map twoMap = (Map)mapList.get(i+1);

    String oneCode = (String)oneMap.get("code");

    String twoCode = (String)twoMap.get("code");    

    if(!oneCode.equals(twoCode)){

        returnList.add(oneMap);

    }

    if(listSize-2==i){

        returnList.add(twoMap);

    }

}


MapList oneMap = bomList;

Map tempMap = null; 


for(int i=0; i<bomList.size(); i++){

    Map map = (Map) bomList.get(i);

    String code = (String)map.get("code");

    String type = (String)map.get("type");

    String matCode = tempMap == null?"":(String)tempMap.get("matCode");

    if(matCode.equals(code){

        int tempQty = Integer.parseInt(Util.defaultString((String)tempMap.get('qty'), '0');

        int spoolQty = Integer.parseInt(Util.defaultString((String)spoolMap.get('qty'), '0');    

        spoolMap.put('qty', String.valueOf(tempQty+spoolQty));     

    } else {

         if(!.equals(matCode)){

              returnMap.add(tempMap);

         }

    }

    returnMap = spoolMap;

}


if(tempMap != null){

    returnMap.add(tempMap);

}



\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
211.36.8.18:8081/enovia
belite_test

172.17.200.30\ENOVIAV6
test@test.com
192.168.0.79


blpTeamApprovedDoc
blpAgreeApprovedDoc
blpDefaultDoc

k151201
K140107

print bus 46976.24150.55829.1047 select from[Object Route].attribute[Route Base State].value;

print bus 46976.24150.55829.1047 select from[from[Object Route].attribute[Route Base State]=='state_Approved'\Object Route].attribute[Route Base State].value;


//결재정보
StringList selObjectList = new StringList();
						selObjectList.add("id");
						selObjectList.add("from[Object Route].attribute[Route Base State].value");
						
						allList = parObject.getRelatedObjects(
								context, // context.
								"Object Route", // relationship pattern.
								"Route", // type pattern.
								selObjectList, // business object selectables.
								null, // relationship selectables.
								false, // expand direction.
								true, // expand from direction.
								(short) 1, // level
								"",
								null, 0, null, null, null);


state = Create
state = Approved
state = Executives
state = AgreeApproved
state = Distribution

Create -> Approved -> Executives -> AgreeApproved -> Distribution

state = Create
state = Approved
state = Distribution

Create -> Approved -> Distribution

blpCreateRouteRightDialog.jsp
blpCreateRouteDialogNewProcess.jsp


LBCMyDesk->LBCLibrariesMyDesk
mod menu LCClassActionsToolbar add command LBCGeneralLibraryContentAddExisting;

일반문서 리스트
blpDocumentListActions -> blpDocumentListFS.jsp -> blpDocumentList.jsp


dwpClasification_mxJPO
dwpMasterMgt_mxJPO

blpCodeManager_mxJPO
dwpClassification_mxJPO
dwpMasterMgt_mxJPO
dwpPart_mxJPO

blpDocumentSpecDistributionDateDecide.jsp
blpSpecChooser.jsp
dwpCustomChooser.jsp

blpClassificationProductModelProcess.jsp
blpCreateSpecDialog.jsp
blpCreateSpecDialogFS.jsp
blpCreateSpecDialogProcess.jsp
blpDocumentListRightDialog.jsp
blpDocumentSpecFilterPage.jsp
blpSpecChooser.jsp
blpSpecClassificationProcess.jsp
blpSpecContentProcess.jsp
dwpClassificationVehicleProcess.jsp
blpSpecClassificationProcess.jsp
blpDocumentListRightDialog.jsp(문서 프레임 오른쪽)
blpGNVPageHeader.jsp(헤더 속성 값)


APPDocumentRevisions(command)
APPDocumentRevisionsRevise (개정)
APPDocumentRevisionsReviseWithFiles (파일과 함께 개정)

blpDocumentObjectPortal

blpDocumentSpecContentCommand

dwpPartActions PartList Command 

APPDocumentFiles
APPFileSummaryToolBar
APPFileSummaryActionsToolBar
APPFileDelete(모든버전 파일삭제)

dwpPart         -> EC Part
blpOpenIssue    -> blpOpenIssue
blpPastProblem  -> blpPastProblem
dwpECO          -> dwpECO
dwpECR          -> dwpECR
Task            -> Project Task

parent.parent.document.getElementById("divToolbarContainer").style.display = "none";

Document Policy
[팀장승인]blpTeamApprovedDoc
[결재 無]blpDefaultDoc
[본부장승인]blpAgreeApprovedDoc


산출물 관련문서 폴리시 (blpProjectTaskDocumentPolicy)

=IF(D1="Complete", "blpTaskYN Y ", "")

menu ENCReferenceDocumentsActionsToolbar

command blpENCCreateNewReferenceDocument

[Range Program] Command

(문서 등록)
emxCommonDocumentPreCheckin.jsp -> emxCommonDocumentCreateDialogFS.jsp ->emxCommonDocumentCreateDialog.jsp

blpOpenIssueEditAction(Edit Command)

결재승인시 JPO  dwpRouteDeploy -> dwpApproveRejectStateComment

blpCreateRouteNewDialogFS.jsp
dskGeneralApprovalOrgSelectDialog.jsp
dskGeneralApprovalOrgUsers.jsp
blpCreateRouteRightDialog.jsp

&sortColumnName=Originated&sortDirection=descending

blpCreateRouteNewDialogFS.jsp - > blpCreateRouteNewDialog.jsp - > blpCreateRouteLeftDialog.jsp,blpCreateRouteRightDialog.jsp -> blpCreateRouteDialogNewProcess.jsp    "dwpRouteCreateProject"  "dwpClassification"

dwpMyTaskApproveRejectDialogFS.jsp ->   dwpMyTaskApproveRejectDialog.jsp  ->  dwpMyTaskApproveRejectProcess.jsp   "dwpRouteDeploy" "dwpApproveRejectStateComment"

dwpENCReferenceDocuments(관련문서 등록 커맨드)
blpemxCommonDocumentCheckinProcess.jsp(관련문서등록 프로세스 페이지)

GNVDashboardUser(emxGNV.String.MyDashboard : My Dashboard)  ->  GNVDashboardUser.jsp
GNVDashboardUserPortal -> GNVDashboardUserChannel -> 
GNVDashboardUserPendingTasks(테스크) 
GNVDashboardUserRecentDocs(최근문서) 
GNVDashboardUserProjects

dwpAPPMyTask(결재함)
portal=dwpMyTaskPortal
dwpMyTaskChannel
결재처리함(dwpMyTaskApproveBox)       -> dwpMyTaskApproveDialog.jsp
기안함(dwpMyTaskDraftBox)             -> dwpMyTaskDraftDialog.jsp
#결재완료함(dwpMyTaskApproveComplete) -> dwpMyTaskApproveCompleteDialog.jsp
#참조함(dwpMyTaskReferenceBox)        -> dwpMyTaskReferenceDialog.jsp
기결함(blpMyOutTray)                  -> blpMyOutTrayDialog.jsp
반려함(blpMyTaskRejectBox)            -> blpMyTaskRejectDialog.jsp

파트(dwpPartActions)
command = dwpPartCreateAction(생성)
command = dwpPartDelete(삭제)
command = blpPartKindCarModel(검색)
emxForm.jsp?form=type_dwpPart&toolbar=dwpENCpartPartDetailsToolBar(dwpDDSDataInterface)->dwpENCpartPartDetailsActionsToolBar(dwpENCpartPartDetails_Headerlink_0, dwpPartApproval)

ECO(dwpECOMyDesk)
dwpECO:getECOimageFileHTMLOutput(Form에서 파일 이미지 첨부)

ECR(dwpECRMyDesk)

blpOpenIssueDashboard(openIssue) -> blpOpenIssueDashboard.jsp

blpDocumentSpecContentCommand(SPEC) -> 
href = ${COMMON_DIR}/blpSpecChooser.jsp?callbackFunction=showVehicleFocus&header=emxFramework.Label.CreateSpecClassificationSelect
&multiSelect=false&ShowIcons=true&searchMode=blpDocument&program=dwpMasterMgt:getSpecLibraryFirstNode&expandProgram=dwpMasterMgt:expandSpecLibraryNode
&isFromSearch=false&isNeededOId=false&displayKey=name&rootNode=blpDocument&fieldNameActual=blpDocument&fieldNameDisplay=blpDocumentDisplay&fromPage=partForm&firstLevelSelect=false
&secondLevel=true&processURL=../documentcentral/blpSpecContentProcess.jsp


blpWorkManualContentCommand(업무 매뉴얼) ->
href = ${COMMON_DIR}/blpWorkManualChooser.jsp?callbackFunction=showVehicleFocus&header=emxFramework.Label.WorkManualSelect&multiSelect=false&ShowIcons=true
&searchMode=blpDocument&program=dwpMasterMgt:getWorkManualFirstNode&expandProgram=dwpMasterMgt:expandWorkManualNode&isFromSearch=false&isNeededOId=false
&displayKey=name&rootNode=blpDocument&fieldNameActual=blpDocument&fieldNameDisplay=blpDocumentDisplay&fromPage=partForm&firstLevelSelect=false
&secondLevel=true&processURL=../documentcentral/blpWorkManualProcess.jsp

blpCreateSpecActions(SPEC 등록) -> blpCreateSpecDialogFS.jsp

LBCLibrariesMyDesk(Library) -> 
href = ${COMMON_DIR}/emxIndentedTable.jsp?freezePane=Name&program=emxLibraryCentralUtil:getAllLibraries,emxLibraryCentralUtil:getAllDocumentLibraries,
emxLibraryCentralUtil:getAllGeneralLibraries,emxLibraryCentralUtil:getAllPartLibraries
&programLabel=emxDocumentCentral.Common.All,emxLibraryCentral.Common.DocumentLibrary,emxLibraryCentral.Common.GeneralLibrary,emxLibraryCentral.Common.PartLibrary
&table=LCLibraryList&selection=multiple&sortColumnName=Name&sortDirection=ascending&toolbar=LCLibrariesToolBar
&header=emxDocumentCentral.Common.Libraries&HelpMarker=emxhelplibrarylist&path=Library

href "${COMMON_DIR}/emxTree.jsp?appendParameters=true"(type_GeneralLibrary)
type_GeneralLibrary 관련 커맨드
command = APPLibClassObjectAccess
command = LCGeneralLibraryClasses
command = LCDiscussionCommand
command = AEFHistory
command = AEFLifecycle
command = APPRoutes
command = DCWhereUsedTreeCategory
command = IssueRollupListPage
command = LBCReferenceDocumentsTreeCategory
command = LBCBackgroundJobs

General Library 하위클래스의 툴바
LCClassActionsToolBar(Menu)
command = LBCCreateNewClass                    (href = ${SUITE_DIR}/emxLibraryCentralIntermediateForm.jsp?form=type_CreateClass&mode=create)
command = LBCClassMove                         (href = ${SUITE_DIR}/emxLibraryCentralSearchIntermediate.jsp?useMode=moveClass)
command = MCMClassRemove                       (href = ${SUITE_DIR}/emxMultipleClassificationRemoveClassPreProcess.jsp?Mode=Remove)
command = LCClassDelete                        (href = ${SUITE_DIR}/emxLibraryCentralObjectsDeleteProcess.jsp)
command = LBCGeneralLibraryContentAddExisting  (href = ${SUITE_DIR}/emxLibraryCentralSearchIntermediate.jsp?useMode=addClass)

WorkSpace
TMCWorkspacesMyDesk(command) -> 
href = ${COMMON_DIR}/emxTable.jsp?program=emxWorkspace:getAllMyDeskWorkspace,emxWorkspace:getActiveMyDeskWorkspace&table=TMCMyDeskWorkspaceSummary
&header=emxTeamCentral.Common.Workspace&toolbar=TMCWorkspaceSummaryToolBar&programLabel=emxTeamCentral.Filter.All,emxTeamCentral.Filter.Active&sortColumnName=Name
&sortDirection=ascending&selection=multiple&HelpMarker=emxhelpworkspaces

TMCWorkspaceTemplatesMyDesk9command) ->
href = ${COMMON_DIR}/emxTable.jsp?program=emxWorkspaceTemplate:getMyWorkspaceTemplates&table=TMCMyDeskWorkspaceTemplateSummary
&header=emxTeamCentral.WorkspaceTemplate.WorkspaceTemplates&topActionbar=TMCWorkspaceTemplateSummaryTopActionBar
&bottomActionbar=TMCWorkspaceTemplateSummaryBottomActionBar&sortColumnName=Name&sortDirection=ascending&selection=multiple&HelpMarker=emxhelpworkspacetemplate

type_TaskManagement -> PMCDeliverableCommandPowerView(산출물 커맨드) -> PMCContentSummaryToolBar(산출물 툴바)

PMCProjectSpaceMyDesk(프로젝트 전체)
href = ${COMMON_DIR}/emxIndentedTable.jsp?program=emxProjectSpace:getActiveProjects,emxProjectSpace:getCompletedProjects,emxProjectSpace:getCancelProjects,emxProjectSpace:getAllProjects
&programLabel=emxProgramCentral.Common.ActiveProjects,emxProgramCentral.Common.CompletedProjects,emxProgramCentral.Common.CancelProjects,emxProgramCentral.Common.All
&table=PMCProjectSpaceMyDesk&selection=multiple&header=emxProgramCentral.ProgramTop.Projects&sortColumnName=Type&sortDirection=ascending&Export=false&toolbar=PMCProjectSummaryToolBar
&HelpMarker=emxhelpprojectsummary&freezePane=blpProjectCarModel,blpProjectProduct,ProjectStatus,ProjectStatusDashboard,NewWindow&StringResourceFileId=emxProgramCentralStringResource

dwpDocumentSearchActions(문서검색)
mod command dwpDocumentSearchActions
    href '${COMMON_DIR}/emxFullSearch.jsp?selection=multiple&suiteKey=Components&submitURL=&itemTemp=&table=dwpDocumentResultSummary&form=dwpDocumentSearchForm&search=&freezePane=Name&toolbar=dwpClassificationSearchActionToolBar&showInitialResults=false&objectId=&field=TYPES=type_Document:POLICY=policy_blpProjectTaskDocumentPolicy,policy_Document,policy_blpTeamApprovedDoc,policy_blpDefaultDoc,policy_blpAgreeApprovedDoc,policy_ProjectTask&dwpTitle=dwpDocument&genericDelete=true&sortColumnNam=Name&sortDirection=ascending'
;

blpGNVPastProblemDashboardPanel.jsp

//HHI 결재
hhiGeneralApprovalSelection.jsp -> hhiGeneralApprovalOrgSelectDialogFS -> hhiGeneralApprovalOrgSelectDialog.jsp -> hhiGeneralApprovalOrgUsers.jsp


//사용자 권한
String assignments = MqlUtil.mqlCommand(context, "list person '"+context.getUser()+"' select Assignment dump |;" );
        StringList assign =  FrameworkUtil.split(assignments, "|");
        boolean buttonYn = false;
        for(int b=0;assign.size()>b;b++) {
            if(((String)assign.get(b)).equalsIgnoreCase("blpAprrovalRole")) {
                buttonYn = true;
            }
        }
	
 *command = AEFLogoutToolbar
setting[Image].value = ${COMMON_DIR}/images/iconMedLogout.png
setting[Registered Suite].value = Framework
setting[Target Location].value = hiddenFrame
href = ${ROOT_DIR}/emxLogout.jsp 
 
 *command = AEFWelcomeToolbar
setting[Alignment].value = right
setting[Dynamic Label Function].value = getWelcomeMessage
setting[Dynamic Label Program].value = emxAEFUtil
setting[Registered Suite].value = Framework 


 *command = AEFHomeToolbar
href = emxNavigatorContentLoad.jsp 
setting[Alignment].value = right
setting[Image].value = ${COMMON_DIR}/images/iconMedHome.png
setting[Registered Suite].value = Framework
setting[Target Location].value = content 
 *command = AEFSeparator
 
 *command = AEFGlobalFullTextSearch	
setting[Alignment].value = right
setting[Default].value = *
setting[Input Type].value = textbox
setting[Registered Suite].value = Framework
setting[Width].value = 150
setting[format].value = fullsearch
href = javascript:void()
AEFGlobalFullTextSearch
code = 
{
    main:function() {
        var queryType = emxUIConstants.STR_QUERY_TYPE;
        var value1= document.getElementById("AEFGlobalFullTextSearch").value;
        var focus = false;
        if(value1 != null && value1 != "" ) {

            if(validateBarChar(value1)) {
                var jsonvalue = value1.replace(/'/g,"\\\\\'");
                value1 = encodeURIComponent(value1);
                if(queryType == "Indexed") {
                    showWindowShadeDialog("../common/emxFullSearch.jsp?table=AEFGeneralSearchResults&showInitialResults=true&genericDelete=true&selection=multiple&txtTextSearch="+value1+"&filters={'txtTextSearch':['Equals|"+jsonvalue+"']}",true,false);
                } else {
                    showWindowShadeDialog("../common/emxFullSearch.jsp?table=AEFGeneralSearchResults&showInitialResults=true&genericDelete=true&selection=multiple&default=NAME="+value1,true, false);
                }
            } else {
                alert(BADCHAR_ENTERED+BAD_CHAR);
                focus = true;
            }

        } else {
            alert(FULL_SEARCH_ERROR);
            focus = true;
        }
        if(focus){
            var objTextBox = document.getElementById("AEFGlobalFullTextSearch");
            objTextBox.focus();
        }
    }
}


logicalid physicalid


{
    main:function() {
	   var queryType = emxUIConstants.STR_QUERY_TYPE;
       var value1= document.getElementById("AEFGlobalFullTextSearch").value;
       var focus = false;
       if(value1 != null && value1 != "" ) {
               
       		if(validateBarChar(value1)) {
				var jsonvalue = value1.replace(/'/g,"\\\\\'");
				jsonvalue = encodeURIComponent(jsonvalue);
				value1 = encodeURIComponent(value1);
				var dispalyStyle = document.getElementById('windowshadeMask').style.display;
    				if(dispalyStyle.length != 0 && dispalyStyle != "none" ) {
					rerunsearch(value1);
				}else{
				if(queryType == "Indexed") {	
					showWindowShadeDialog("../common/emxFullSearch.jsp?table=AEFGeneralSearchResults&showInitialResults=true&genericDelete=true&selection=multiple&txtTextSearch="+value1+"&filters={'txtTextSearch':['Equals|"+jsonvalue+"']}",true,false);
				}
				else {	
					showWindowShadeDialog("../common/emxFullSearch.jsp?table=AEFGeneralSearchResults&showInitialResults=true&genericDelete=true&selection=multiple&default=NAME="+value1,true, false);
				}
				}
       		} else {
       			alert(BADCHAR_ENTERED+BAD_CHAR);
       			focus = true;
       		}
       		
       } else {
           alert(FULL_SEARCH_ERROR);
           focus = true;
       }
       if(focus){
       	   var objTextBox = document.getElementById("AEFGlobalFullTextSearch");
           objTextBox.focus();
       }
    }
}

mod bus 	46976.24150.33789.2265   blpDocumentSpecDecideDate '6/13/2016 12:00:00 AM';

@echo on
set TNS_ADMIN=C:\enoviaV6R2013x
set bootfile=MATRIX-R
set nls_lang=KOREAN_KOREA.KO16KSC5601

set path=C:\enoviaV6R2013x\studio\win_b64\code\bin;%path%;

start "C:\" "C:\enoviaV6R2013x\studio\win_b64\code\bin\mql.exe"


../common/emxIndentedTable.jsp?freezePane=Name&program=emxLibraryCentralUtilBase%3AgetSubclasses&table=LCClassificationList&selection=multiple&editLink=true&sortColumnName=Name&sortDirection=ascending&toolbar=LCClassToolBar&header=emxLibraryCentral.Common.Classifications&HelpMarker=emxhelpclasses&objectId=46976.24150.9104.58579&suiteKey=LibraryCentral&StringResourceFileId=emxLibraryCentralStringResource&SuiteDirectory=documentcentral&emxSuiteDirectory=&categoryTreeName=type_GeneralLibrary&isStructure=true&otherTollbarParams=isStructure

emxTreeInnerFrame.jsp?mode=null&treemode=structure&appendParameters=true&emxSuiteDirectory=documentcentral&relId=&parentOID=&suiteKey=LibraryCentral&objectId=46976.24150.9104.58579&jsTreeID=&structureTreeName=
../common/emxIndentedTable.jsp?freezePane=Name&program=emxLibraryCentralUtilBase%3AgetSubclasses&table=LCClassificationList&selection=multiple&editLink=true&sortColumnName=Name&sortDirection=ascending&toolbar=LCClassToolBar&header=emxLibraryCentral.Common.Classifications&HelpMarker=emxhelpclasses&objectId=46976.24150.9104.58579&suiteKey=LibraryCentral&StringResourceFileId=emxLibraryCentralStringResource&SuiteDirectory=documentcentral&emxSuiteDirectory=&categoryTreeName=type_GeneralLibrary&isStructure=true&otherTollbarParams=isStructure

treedisplay
emxTreeInnerFrame.jsp?mode=null&treemode=structure&appendParameters=true&emxSuiteDirectory=documentcentral&relId=&parentOID=&suiteKey=LibraryCentral&objectId=46976.24150.9104.58579&jsTreeID=&structureTreeName=LCLibraryStructure

../common/blpSpecChooser.jsp?callbackFunction=showVehicleFocus&&header=emxFramework.Label.CreateSpecClassificationSelect&multiSelect=false&ShowIcons=true&searchMode=blpDocument&program=dwpMasterMgt:getSpecLibraryFirstNode&expandProgram=dwpMasterMgt:expandSpecLibraryNode&isFromSearch=false&isNeededOId=false&displayKey=name&rootNode=blpDocument&fieldNameActual=blpDocument&fieldNameDisplay=blpDocumentDisplay&fromPage=partForm&firstLevelSelect=false&secondLevel=true&processURL=../documentcentral/blpSpecClassificationProcess.jsp


"expand bus"+" "+workspaceId+" "+"from rel 'Project Members' select bus id dump | where 'relationship[Project Members].to.relationship[Project Membership].from.name=="+"\""+ contextuser+"\" '";

String strProcessingPartQty = MqlUtil.mqlCommand(context, "eval expr 'sum attribute[hhiSMBQty]' on expand bus "+objectId+" from rel hhiCPProcessingPart type hhiSMBProcessingPart select bus where '(current==\"Released\")'");

code 'expand bus ${ID} from relationship ${RELATIONSHIP_HHICPANDPROCESSINGRAWPART},${RELATIONSHIP_HHICPINPUTREMNANT} select bus id attribute[hhiSMBNCNo] where "from[hhiRelatedProcessingPart] == True && (current!=Released && current!=Holding)" dump |'

code 'expand bus ${ID} from relationship "${RELATIONSHIP_HHICPANDPROCESSINGRAWPART},${RELATIONSHIP_HHICPINPUTREMNANT}" select bus id where "from[hhiRelatedProcessingPart] == True" dump |'

code 'expand bus ${ID} from relationship ${RELATIONSHIP_HHIWORKORDERITEM} from type ${TYPE_HHISMBWORKORDER} select bus id where "revision==last.revision" select rel id dump |'

"expand bus \"" + t1 + "\" \"" + n1 + "\" \"" + r1 + "\" " + direction + " rel \"" + relationshipname + "\" select bus where 'type == \"" + t2 + "\" && name == \"" + n2 + "\" && revision == \"" + r2 + "\"' select rel id dump \"" + separateur + "\"";

"expand bus \"" + t1 + "\" \"" + n1 + "\" \"" + r1 + "\" " + direction + " rel \"" + relationshipname + "\" select bus where 'type == \"" + t2 + "\" && name == \"" + n2 + "\" && revision == \"" + r2 + "\"' dump";

"expand bus " + busID + " terse select rel id where '((name == const\"CAD SubComponent\") && (from.id == " + busID + "))' dump |";

"expand bus " + majorID + " terse select rel id where '((name == const\"CAD SubComponent\") && (to.id == " + childObjectId + "))' dump |";

"expand bus \""+strParentFeatureId+"\" from relationship \""+ConfigurationConstants.RELATIONSHIP_MANDATORY_CONFIGURATION_FEATURES+"\" preventduplicates select rel id where \"to.id =='"+strChildFeatureId +"'\" dump | " ;




emxUIToolbar  ->  767    



query connection type EBOM where from == last" select id from.name from.revision to.name to.revision dump  |  output c:\mig\test2.txt;




-Dcatalina.base="C:\workspace_Mando\.metadata\.plugins\org.eclipse.wst.server.core\tmp0" -Dcatalina.home="C:\apache-tomee-1.7.2-plus\apache-tomee-plus-1.7.2" -Dwtp.deploy="C:\workspace_Mando" -Djava.endorsed.dirs="C:\apache-tomee-1.7.2-plus\apache-tomee-plus-1.7.2\endorsed" -XX:MaxPermSize=256m -Xms1024m -Xmx2048m -Dfile.encoding=UTF-8 -Duser.language=en -Duser.country=US

-Dfile.encoding=UTF-8

C:\DS\B418xcadconnectors\win_b64\reffiles\IEFClientWorkspaceService\config.xml

ABLEDEV =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST =192.168.0.20)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = ABLEDEV)
    )
  )
MX_CLASSPATH에 WEB-INF/classes와 WEB-INF/lib의 full path를 추가  
print bus 'Part Family' TEST_PART_LIBRARY_1 56994AD400001FC85771E81700001727 select from[Classified Item].to.id from[Classified Item].to.type from[Classified Item].to.name from[Classified Item].to.revision to[Subclass].from.type to[Subclass].from.name to[Subclass].from.revision to[Subclass].from.id;
LBCAttributeGroupCreateNew



C:\Users\Lee>mql -b matrix-R_PRD -install -user cdm_admin -password cdm_admin_pr
od -host CDM -driver 'Oracle/OCI80'













	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	